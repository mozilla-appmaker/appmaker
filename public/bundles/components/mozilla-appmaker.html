<polymer-element name="ceci-transformer" extends="ceci-element" attributes="message" assetpath="/bundles/components/component-transformer/">
  <ceci-definition>
    {
      &quot;name&quot;: &quot;Signal Transformer&quot;,
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Transforms an incoming signal to a value you set and broadcasts it.&quot;,
      &quot;broadcasts&quot;: {
        &quot;transformedMessage&quot;: {
          &quot;label&quot;: &quot;Transformed Message&quot;
        }
      },
      &quot;listeners&quot;: {
        &quot;incomingMessage&quot;: {
          &quot;label&quot;: &quot;Incoming Message&quot;,
          &quot;default&quot; : true
        }
      },
      &quot;attributes&quot;: {
        &quot;message&quot;: {
          &quot;label&quot;: &quot;Message&quot;,
          &quot;editable&quot;: &quot;Text&quot;,
          &quot;default&quot; : true
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host .counter {
  text-align: center;
  font-size: 16px;
  padding: 8px 0px;
  background: #DDD;
  color: #666;
}

:host .counter .count-wrapper {
  display: inline-block;
  background: white;
  padding: 5px 12px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  border: solid 1px #CCC;
  border-width: 1px 1px 2px 1px;
}
</style>
    <div class="counter">
      <div class="count-wrapper">
        Transform to &quot;<span class="count">{{message}}</span>&quot;
      </div>
    </div>
    <shadow></shadow>
  </template>
  <tags>starter,math</tags>
    <script>
      Polymer("ceci-transformer", {
        ready: function() {
          this.super();
        },
        incomingMessage : function(){
          this.broadcast("transformedMessage", this.message);
        },
        message: 'Sprocket',
        unitChanged: function() {
          this.updateUnit();
        },
        resetCount: function() {
          this.value = 0;
        }
      });
    </script>
</polymer-element>
<polymer-element name="ceci-todo-list" extends="ceci-element" attributes="collection" collection="" assetpath="/bundles/components/component-todo/">
  <ceci-definition>
    {
      &quot;name&quot;: &quot;To-Do List&quot;,
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;A list of things to do&quot;,
      &quot;broadcasts&quot;: {
        &quot;itemcompleted&quot;: {
          &quot;label&quot;: &quot;Item done&quot;,
          &quot;description&quot;: &quot;Sends a message that an item in the list was completed.&quot;
        },
        &quot;allitemscompleted&quot;: {
          &quot;label&quot;: &quot;All items done&quot;,
          &quot;description&quot;: &quot;Sends a message that the todo list was completed.&quot;
        }
      },
      &quot;listeners&quot;: {
        &quot;additem&quot;: {
          &quot;description&quot;: &quot;Adds a todo list item.&quot;,
          &quot;label&quot;: &quot;Add Item&quot;,
          &quot;default&quot; : true
        }
      },
      &quot;attributes&quot;: {
        &quot;collection&quot;: {
          &quot;description&quot;: &quot;&quot;,
          &quot;label&quot;: &quot;Collection&quot;,
          &quot;editable&quot;: &quot;collection&quot;
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  background: white;
}

:host .hidden {
  display: none;
}

:host .list-container {
  padding: 10px;
}

:host .item {
  font-size: 16px;
  border-bottom: solid 1px #DDD;
}

:host .item:last-child {
  border: none;
}

:host .remove-column {
  text-align: center;
  cursor: pointer;
}

:host .remove-column:hover {
  color: #212429;
  background: #fff;
}

:host .remove-item {
  display: none;
  float: right;
  color: #639ccd;
}

:host .first-run-container {
  padding: 10px;
}

:host .first-run-container p {
  margin: 0;
  padding: 0;
  font-size: 16px;
  margin-bottom: 8px;
  color: #999;
}

:host .first-run-container h3 {
  margin: 0;
  padding: 0;
  font-size: 16px;
  font-weight: bold;
}

:host .first-run-container input {
  font-size: 16px;
  padding: 6px 3px;
}

:host .completed .remove-item {
  display: inline-block;
  float: right;
  color: #639ccd;
  cursor: pointer;
  padding: 10px 0;
}

:host label {
  display: block;
  padding: 10px 0;
  width: 240px;
}

:host .completed .remove-item:hover {
  text-decoration: underline;
}

:host .completed label {
  text-decoration: line-through;

  color: #999;
}

:host .no-items {
  font-size: 16px;
  margin: 0;
}

:host button {
  background: #6eba1d;
  border: none;
  font-size: 16px;
  color: white;
  padding: 8px 8px;
  cursor: pointer;

}
</style>
    <div class="first-run-container">
      <h3>Choose or Create a Collection</h3>
      <p>This Brick will store your items in a Collection with this name.</p>
      <input placeholder="Ex. &apos;todos&apos;" value="todos" type="text">
      <button on-click="{{addNewCollection}}">Done</button>
    </div>
    <div class="list-container hidden">
      <template if="{{ items.length == 0 }}">
      <p class="no-items">0 To-do Items</p>
      </template>
      <template repeat="{{item, itemindex in items}}">
        <div class="item {{item.completed | applyClassName}}">
          <a on-click="{{removeItem}}" data-item-index="{{itemindex}}" class="remove-item">Clear</a>
          <label>
            <input data-item-index="{{itemindex}}" on-change="{{onCheckboxChange}}" type="checkbox" checked="{{item.completed}}">
            {{item.description}}
          </label>
        </div>
      </template>
    </div>
    <shadow></shadow>
  </template>
    <script>
      Polymer("ceci-todo-list", {
        ready: function() {
          this.super();
          this.collections = document.querySelector("ceci-collections");
          this.items = [];
          this.onItemChange = null;
          this.completed = 0;
        },
        collectionReady: function() {
          var self = this;
          var collection = this.collections.getCollection(this.collection);
          var completedField = collection.getField("completed");
          var descriptionField = collection.getField("description");
          if (!completedField) {
            collection.addField("completed", "checkbox");
          }
          if (!descriptionField) {
            collection.addField("description", "text");
          }
          this.shadowRoot.querySelector(".list-container").classList.remove("hidden");
          this.shadowRoot.querySelector(".first-run-container").classList.add("hidden");
          this.items = [];
          this.completed = 0;
          for (var i = 0; i < collection.data.length; i++) {
            this.items.push(collection.data[i]);
            if (collection.data[i].completed) {
              this.completed++;
            }
          }
          this.onItemChange = function(e) {
            var detail = e.detail;
            if (detail.removed) {
              self.items.splice(detail.index, 1);
            }
            if (detail.added) {
              self.items.splice(detail.index, 0, detail.added);
            }
          };
          collection.addEventListener("itemchange", this.onItemChange);
          this.lastCollection = this.collection;
        },
        addNewCollection: function() {
          this.collection = this.shadowRoot.querySelector(".first-run-container input").value;
        },
        additem: function(item) {
          if(item){
            var collection = this.collections.getCollection(this.collection);
            collection.addItem({
              description: item
            });
          }
        },
        collectionChanged: function() {
          // Clean up any events on the old collection if we change collections.
          if (this.lastCollection && this.onItemChange) {
            var lastCollection = this.collections.getCollection(this.lastCollection);
            lastCollection.removeEventListener("itemchange", this.onItemChange);
            this.onItemChange = null;
          }
          this.shadowRoot.querySelector(".first-run-container input").value = this.collection;
          if (this.collection === "") {
            return;
          }
          var collection = this.collections.getCollection(this.collection);
          if (!collection) {
            this.collections.addCollection(this.collection);
          }
          this.async(this.collectionReady);
        },
        onCheckboxChange: function(event, detail, sender) {
          var collection = this.collections.getCollection(this.collection);
          var index = parseInt(sender.getAttribute('data-item-index'));
          var dataItem = collection.data[index];
          dataItem.completed = sender.checked;
          collection.updateItem(index, dataItem);
          if (sender.checked) {
            this.completed++;
            this.broadcast("itemcompleted", dataItem.description);
            if (this.completed >= this.items.length) {
              this.broadcast("allitemscompleted", this.completed);
            }
          } else {
            this.completed--;
          }
        },
        removeItem: function(event, detail, sender) {
          var collection = this.collections.getCollection(this.collection);
          var index = parseInt(sender.getAttribute('data-item-index'));
          var dataItem = collection.data[index];
          collection.removeItem(index);
          this.completed--;
        },
        applyClassName: function(value) {
          if (value) {
            return "completed";
          }
          return;
        }
      });
    </script>
</polymer-element>
<polymer-element name="ceci-timer" extends="ceci-element" attributes="time" assetpath="/bundles/components/component-timer/">
  <ceci-definition>
    {
      &quot;name&quot;: &quot;Timer&quot;,
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Keeps track of time and broadcasts when time is up.&quot;,
      &quot;tags&quot;: [&quot;timer&quot;, &quot;time&quot;],
      &quot;broadcasts&quot;: {
        &quot;timeup&quot;: {
          &quot;label&quot;: &quot;Time is Up&quot;,
          &quot;description&quot;: &quot;Time is up!&quot;
        }
      },
      &quot;listeners&quot;: {
        &quot;start&quot;: {
          &quot;label&quot;: &quot;Start&quot;,
          &quot;description&quot;: &quot;Starts the timer.&quot;
        },
        &quot;pause&quot;: {
          &quot;label&quot;: &quot;Pause&quot;,
          &quot;description&quot;: &quot;Pauses the timer.&quot;
        },
        &quot;reset&quot;: {
          &quot;label&quot;: &quot;Reset&quot;,
          &quot;description&quot;: &quot;Resets the timer.&quot;
        }
      },
      &quot;attributes&quot;: {
        &quot;time&quot;: {
          &quot;label&quot;: &quot;Time&quot;,
          &quot;description&quot;: &quot;Amount of time to elapse&quot;,
          &quot;editable&quot;: &quot;number&quot;
        }
      }
    }
  </ceci-definition>
  <template>
    <style>
      :host {
        display: block;
        height: 3.5em;
        padding-top: 5px;
        padding-bottom: 5px;
      }
      :host .timer, :host .elapsed-time {
        margin-left: 10px;
      }

      @-webkit-keyframes flashing {
        from {
          background-color: darkred;
          color: white;
        }
        to {
          background-color: transparent;
          color: darkred;
        }
      }

      @keyframes flashing {
        from {
          background-color: darkred;
          color: white;
        }
        to {
          background-color: transparent;
          color: darkred;
        }
      }

      :host #timerTime.timeup {
        -webkit-animation: flashing 2s infinite;
        animation: flashing 2s infinite;
        -webkit-animation-timing-function: steps(2, end);
        animation-timing-function: steps(2, end);
        font-weight: bold;
      }
    </style>
    <template if="{{time &gt; 0}}">
      <div class="timer"><strong>Time Left:</strong> <span id="timerTime">{{_timeLeftString}}</span></div>
    </template>
    <div class="elapsed-time"><strong>Elapsed Time:</strong> {{_elapsedTimeString}}</div>
    <shadow></shadow>
  </template>
  <script>
    function timeFromSeconds (milliseconds) {
      milliseconds = parseInt(milliseconds, 10);

      var hours = Math.floor(milliseconds / 3600000);
      var minutes = Math.floor((milliseconds - (hours * 3600000)) / 60000);
      var seconds = Math.floor((milliseconds - (hours * 3600000) - (minutes * 60000)) / 1000);

      milliseconds = milliseconds - (seconds * 1000) - (hours * 3600000) - (minutes * 60000);

      if (hours < 10) hours = "0" + hours;
      if (minutes < 10) minutes = "0" + minutes;
      if (seconds < 10) seconds = "0" + seconds;
      if (milliseconds < 10) milliseconds = "00" + milliseconds;
      else if (milliseconds < 100) milliseconds = "0" + milliseconds;

      return hours + ':' + minutes + ':' + seconds + '.' + milliseconds;
    }

    Polymer("ceci-timer", {
      time: 10,
      _timeLeft: 0,
      _elapsedTime: 0,
      _lastElapsedTime: 0,
      _timeUp: false,
      ready: function() {
        this.super();
        this._timeLeft = this.time * 1000;
        this._elapsedTimeString = timeFromSeconds(this._elapsedTime);
        this._timeLeftString = timeFromSeconds(this._timeLeft);
      },
      start: function() {
        if (this._timeUp || this._timerInterval) {
          this.reset();
        }
        this._startTime = Date.now();
        this._startTimer();
      },
      pause: function () {
        this._lastElapsedTime = this._elapsedTime;
        clearInterval(this._timerInterval);
        this._timerInterval = null;
      },
      reset: function () {
        clearInterval(this._timerInterval);
        this._timerInterval = null;
        this._timeUp = false;
        this._timeLeft = this.time * 1000;
        this._elapsedTime = 0;
        this._lastElapsedTime = 0;
        this._elapsedTimeString = timeFromSeconds(this._elapsedTime);
        this._timeLeftString = timeFromSeconds(this._timeLeft);
        this.$.timerTime.classList.remove('timeup');
      },
      _startTimer: function () {
        this._timerInterval = setInterval(function () {
          this._elapsedTime = Date.now() - this._startTime + this._lastElapsedTime;
          this._timeLeft = (this.time * 1000) - this._elapsedTime;
          this._elapsedTimeString = timeFromSeconds(this._elapsedTime);

          if (this._timeLeft <= 0) {
            this._timeLeftString = timeFromSeconds(0);
            if (!this._timeUp) {
              this._timeUp = true;
              this.$.timerTime.classList.add('timeup');
              this.broadcast('timeup');
            }
          }
          else {
            this._timeLeftString = timeFromSeconds(this._timeLeft);
          }
        }.bind(this), 50);
      },
    });
  </script>
</polymer-element>
<polymer-element name="ceci-textbox" attributes="text fontsize textalign textcolor backgroundcolor" extends="ceci-element" textalign="left" fontsize="16" textcolor="#666666" backgroundcolor="#FFFFFF" text="I&apos;m a textbox!" assetpath="/bundles/components/component-textbox/">
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;form&quot;, &quot;input&quot;, &quot;text&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Displays entered or incoming text.&quot;,
      &quot;name&quot;: &quot;Text&quot;,
      &quot;broadcasts&quot;: {},
      &quot;listeners&quot;: {
        &quot;setValue&quot;: {
          &quot;description&quot;: &quot;Set value text box&quot;,
          &quot;label&quot;: &quot;Set Text&quot;
        }
      },
      &quot;attributes&quot;: {
        &quot;text&quot;: {
          &quot;label&quot;: &quot;Text&quot;,
          &quot;description&quot;: &quot;A text for your label to show up in your app.&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;textalign&quot;: {
          &quot;label&quot;: &quot;Text Alignment&quot;,
          &quot;description&quot;: &quot;Text Alignment&quot;,
          &quot;editable&quot;: &quot;select&quot;,
          &quot;options&quot;: [&quot;Left&quot;,&quot;Center&quot;,&quot;Right&quot;]
        },
        &quot;fontsize&quot;: {
          &quot;label&quot;: &quot;Font Size&quot;,
          &quot;description&quot;: &quot;Font Size&quot;,
          &quot;editable&quot;: &quot;number&quot;,
          &quot;min&quot; : &quot;4&quot;,
          &quot;max&quot; : &quot;50&quot;
        },
        &quot;backgroundcolor&quot;: {
          &quot;label&quot;: &quot;Background Color&quot;,
          &quot;description&quot;: &quot;Background Color&quot;,
          &quot;editable&quot;: &quot;color&quot;
        },
        &quot;textcolor&quot;: {
          &quot;label&quot;: &quot;Text Color&quot;,
          &quot;description&quot;: &quot;Text Color&quot;,
          &quot;editable&quot;: &quot;color&quot;
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}

:host p {
  padding: 10px;
  word-wrap: break-word;
  overflow: hidden;
  margin: 0;
  font-size: 15px;
  font-family: "FiraSans", sans-serif;
  font-weight: 500;
  line-height: auto;
}
</style>
      <p style="text-align: {{textalign}}; font-size: {{fontsize}}px; background: {{backgroundcolor}}; color: {{textcolor}}" id="textBox">{{text}}</p>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-textbox', {
      ready: function () {
        this.super();
      },
      setValue: function(e) {
        this.text = e;
      }
    });
  </script>
</polymer-element>
<polymer-element name="ceci-text-input" attributes="buttonlabel inputname placeholdertext emitonchange label" extends="ceci-element" placeholdertext="Placeholder" buttonlabel="Submit" inputname="Text Input" assetpath="/bundles/components/component-text-input/">
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;input&quot;, &quot;form&quot;, &quot;button&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;name&quot;: &quot;Text Input with Button&quot;,
      &quot;description&quot;: &quot;Sends text you&apos;ve entered when you press the button.&quot;,
      &quot;broadcasts&quot;: {
        &quot;sendData&quot;: {
          &quot;label&quot;: &quot;Send Data&quot;,
          &quot;description&quot;: &quot;Sends the current value of the input field.&quot;,
          &quot;default&quot;: true
        }
      },
      &quot;listeners&quot;: {
        &quot;click&quot;: {
          &quot;description&quot;: &quot;Causes a fake click event to occur.&quot;,
          &quot;label&quot;: &quot;Send Data&quot;
        },
        &quot;setvalue&quot;: {
          &quot;description&quot;: &quot;Set the value of the field.&quot;,
          &quot;label&quot;: &quot;Set Value&quot;
        }
      },
      &quot;attributes&quot;: {
        &quot;inputname&quot;: {
          &quot;label&quot;: &quot;Input Name&quot;,
          &quot;description&quot;: &quot;The name of this field, helpful when saving data.&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;buttonlabel&quot;: {
          &quot;label&quot;: &quot;Button Label&quot;,
          &quot;description&quot;: &quot;The label on the button.&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;placeholdertext&quot;: {
          &quot;label&quot;: &quot;Placeholder Text&quot;,
          &quot;description&quot;: &quot;The text you want your input field to show by default.&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;emitonchange&quot;: {
          &quot;label&quot;: &quot;Emit on change&quot;,
          &quot;description&quot;: &quot;Background color of the button while it is being clicked or tapped.&quot;,
          &quot;editable&quot;: &quot;boolean&quot;
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host input[type=text]{
  padding: 10px 5px;
  height: 100%;
  border: none;
  color: #000;
  font-weight: 500;
  font-size: 1.6rem;
  background-color: #FFF;
  background-size: auto 100%;
  width: 70%;
  border-radius: 0;
  margin: 0;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border: 0.1rem solid rgb(204, 204, 204);
  border-right: none;
  text-indent: 0.6rem;
  outline: none;
  font-weight: 400;
  font-size: 1.6rem;
  font-family: "FiraSans", sans-serif;
}

:host .onchange input[type=text]{
  width: 100%;
}

:host .onchange button {
  display: none;
}

:host #wrapper {
  position: relative;
}

:host button {
  background: linear-gradient(to top, #f8f8f8, #ddd);
  background: -webkit-linear-gradient(top, #f8f8f8, #ddd);
  border: 0.1rem solid #a6a6a6;
  border-radius: 0 0.2rem 0.2rem 0;
  right: 0px;

  width: 30%;
  padding: 0;
  height: 100%;
  font-weight: 500;
  font-size: 1.6rem;
  font-family: "FiraSans", sans-serif;
  position: absolute;
}

:host button:active {
  background: linear-gradient(to top, #ddd, #ddd);
  background: -webkit-linear-gradient(top, #ddd, #ddd);
}</style>
    <div id="wrapper">
      <input id="inputText" type="text" on-input="{{input}}" on-keypress="{{keypress}}">
      <button id="button" on-click="{{submit}}">{{buttonlabel}}</button>
    </div>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-text-input', {
      emitonchange:false,
      ready: function () {
        this.super();
        var that = this;
        this.$.button.textContent = this.gettext("ceci-text-input/button") || this.$.button.textContent;
      },
      submit: function () {
        this.broadcast('sendData', this.$.inputText.value);
        this.$.inputText.value = "";
      },
      click : function(){
        this.submit();
      },
      input: function (e) {
        if (!this.emitonchange) {
          return;
        }
        this.broadcast('sendData', this.$.inputText.value);
      },
      keypress: function (e) {
        if (!this.emitonchange) {
          if (e.keyCode == 13) {
            this.broadcast('sendData', this.$.inputText.value);
            this.$.inputText.value = '';
          }
        }
      },
      setvalue: function(v) {
        this.$.inputText.value = v;
      },
      emitonchangeChanged: function(oldValue, newValue) {
        this.$.wrapper.classList.toggle('onchange');
      },
      placeholdertextChanged: function(oldValue, newValue) {
        if (this.$.inputText.hasAttribute('placeholder')) {
          this.$.inputText.setAttribute("placeholder", newValue);
        }
        else {
          this.$.inputText.setAttribute("placeholder", newValue);
        }
      }
    });
  </script>
</polymer-element>
<polymer-element name="ceci-splitter" extends="ceci-element" assetpath="/bundles/components/component-splitter/">
  <template>
    <style>:host, :host .splitter {
  display: block;
  width: 100%;
  height: 50px;
}

:host .splitter {
  background: url(/bundles/components/component-splitter/thumbnail.png) black no-repeat center;
}
</style>
    <div class="splitter">
    </div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;channel&quot;, &quot;splitter&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Splits an input on one channel into broadcasts on multiple channels.&quot;,
      &quot;name&quot;: &quot;Channel Splitter&quot;,
      &quot;broadcasts&quot;: {
        &quot;splitter1&quot;: {
          &quot;label&quot;: &quot;Output 1&quot;,
          &quot;description&quot;: &quot;repeats input&quot;,
          &quot;default&quot;: true
        },
        &quot;splitter2&quot;: {
          &quot;label&quot;: &quot;Output 2&quot;,
          &quot;description&quot;: &quot;repeats input&quot;
        },
        &quot;splitter3&quot;: {
          &quot;label&quot;: &quot;Output 3&quot;,
          &quot;description&quot;: &quot;repeats input&quot;
        },
        &quot;splitter4&quot;: {
          &quot;label&quot;: &quot;Output 4&quot;,
          &quot;description&quot;: &quot;repeats input&quot;
        },
        &quot;splitter5&quot;: {
          &quot;label&quot;: &quot;Output 5&quot;,
          &quot;description&quot;: &quot;repeats input&quot;
        },
        &quot;splitter6&quot;: {
          &quot;label&quot;: &quot;Output 6&quot;,
          &quot;description&quot;: &quot;repeats input&quot;
        }
      },
      &quot;listeners&quot;: {
        &quot;input&quot;: {
          &quot;description&quot;: &quot;input 1&quot;,
          &quot;label&quot;: &quot;Input&quot;,
          &quot;default&quot;: true
        }
      },
      &quot;attributes&quot;: {}
    }
  </ceci-definition>
  <script>
    Polymer('ceci-splitter', {
      ready: function () {
        this.super();
      },
      input: function(val) {
        this.broadcast("splitter1", val );
        this.broadcast("splitter2", val );
        this.broadcast("splitter3", val );
        this.broadcast("splitter4", val );
        this.broadcast("splitter5", val );
        this.broadcast("splitter6", val );
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-spacer" attributes="height background" extends="ceci-element" height="30" background="#FFFFFF" assetpath="/bundles/components/component-spacer/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
}
</style>
    <div style="background: {{background}}; height: {{height}}px;" id="spacer"></div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;starter&quot;, &quot;layout&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;name&quot;: &quot;Spacer&quot;,
      &quot;description&quot;: &quot;Adds blank space to separate your bricks.&quot;,
      &quot;broadcasts&quot;: {},
      &quot;listeners&quot;: {},
      &quot;attributes&quot;: {
        &quot;height&quot;: {
          &quot;label&quot;: &quot;Height&quot;,
          &quot;description&quot;: &quot;The height of the spacer.&quot;,
          &quot;editable&quot;: &quot;number&quot;,
          &quot;min&quot; : 5
        },
        &quot;background&quot;: {
          &quot;label&quot;: &quot;Background Color&quot;,
          &quot;description&quot;: &quot;The background color of the spacer.&quot;,
          &quot;editable&quot;: &quot;color&quot;
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-spacer', {
      ready: function () {
        this.super();
      }
    });
  </script>
</polymer-element>
<polymer-element name="ceci-snaredrum" attributes="drumcolor backgroundcolor stickcolor volume" drumcolor="#FFFFFF" stickcolor="#000000" backgroundcolor="#ff9900" extends="ceci-element" volume=".5" assetpath="/bundles/components/component-snaredrum/">
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;music&quot;, &quot;instrument&quot;, &quot;audio&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Plays a snare drum.&quot;,
      &quot;name&quot;: &quot;Snare Drum&quot;,
      &quot;broadcasts&quot;: {},
      &quot;listeners&quot;: {
        &quot;kick&quot;: {
          &quot;description&quot;: &quot;Causes a fake click event to occur.&quot;,
          &quot;label&quot;: &quot;Hit&quot;,
          &quot;default&quot;: true
        }
      },
      &quot;attributes&quot;: {
        &quot;stickcolor&quot;: {
          &quot;label&quot;: &quot;Stick Color&quot;,
          &quot;editable&quot;: &quot;color&quot;
        },
        &quot;volume&quot;: {
          &quot;label&quot;: &quot;Volume&quot;,
          &quot;editable&quot;: &quot;number&quot;,
          &quot;min&quot; : 0,
          &quot;max&quot; : 1
        },
        &quot;backgroundcolor&quot;: {
          &quot;label&quot;: &quot;Background Color&quot;,
          &quot;editable&quot;: &quot;color&quot;
        },
        &quot;drumcolor&quot;: {
          &quot;label&quot;: &quot;Drum Color&quot;,
          &quot;description&quot;: &quot;Color of the drum.&quot;,
          &quot;editable&quot;: &quot;color&quot;
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  background: orange;
}

:host #kick {
  height: 75px;
  display: block;
  cursor: pointer;
  overflow: hidden;
  width: 100%;
  position: relative;
}

:host #kick, :host #kick * {

}

:host #drum {
  height: 200px;
  width: 200px;
  background: white;
  position: absolute;
  left: calc(50% - 100px);
  border-radius: 150px;
  top: -20px;
  -webkit-transform: scaleY(.4);
  -moz-transform: scaleY(.4);
  transform: scaleY(.4);
}

:host #stick {
  height: 8px;
  width: 120px;
  background: black;
  position: absolute;
  left: 40px;
  top: 20px;
  border-radius: 100px;
  -webkit-transform-origin: left;
  -moz-transform-origin: left;
  transform-origin: left;
}

:host .hit #stick {
  top: 25px;
  -webkit-transform: rotate(15deg);
  -moz-transform: rotate(15deg);
  transform: rotate(15deg);
}

:host .hit #drum {
  top: -15px;
}

:host audio {
  display: none;
}
</style>
    <div id="kick" class="off" on-ceci-pressdown="{{kickon}}" on-ceci-pressup="{{kickoff}}">
      <div id="drum"></div>
      <div id="stick"></div>
    </div>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-snaredrum', {
      audioBuffer: null,
      ready: function () {
        this.super();

        this.ctx = window.AudioContext || window.webkitAudioContext;

        if (!this.ctx) {
          console.error('Could not get AudioContext for kickdrum.');
          return;
        }

        this.ctx = new this.ctx();
        var that = this;
        var xhr = new XMLHttpRequest();
        xhr.open("GET", this.resolvePath('sounds/snare.mp3'), true);
        xhr.responseType = "arraybuffer";
        xhr.onload = function () {
          if (xhr.response.byteLength) {
            that.ctx.decodeAudioData(xhr.response, function(data) {
              that.audioBuffer = data;
            },
            function (e) {
              console.error('Error decoding the audio buffer for kickdrum.', arguments);
            });
          }
        };
        xhr.send();
      },
      kickon: function () {
        var src = this.ctx.createBufferSource();
        var gain = this.ctx.createGain();
        gain.gain.value = this.volume;
        src.buffer = this.audioBuffer;
        src.loop = false;
        src.connect(gain);
        gain.connect(this.ctx.destination);
        src.start(0);
        this.$.kick.classList.add("hit");
      },
      kick : function(){
        this.kickon();
        var that = this;
        window.setTimeout(function(){
          that.kickoff();
        },100);
      },
      kickoff : function(){
        this.$.kick.classList.remove("hit");
      },
      stickcolorChanged: function (oldValue, newValue) {
        this.$.stick.style.background = newValue;
      },
      drumcolorChanged: function (oldValue, newValue) {
        this.$.drum.style.background = newValue;
      },
      backgroundcolorChanged: function (oldValue, newValue) {
        this.$.kick.style.background = newValue;
      }
    });
  </script>
</polymer-element>
<script>(function(global) {
  "use strict";

  var inNodeJS = false;
  if (typeof module !== 'undefined' && module.exports) {
    inNodeJS = true;
    var request = require('request');
  }

  var supportsCORS = false;
  var inLegacyIE = false;
  try {
    var testXHR = new XMLHttpRequest();
    if (typeof testXHR.withCredentials !== 'undefined') {
      supportsCORS = true;
    } else {
      if ("XDomainRequest" in window) {
        supportsCORS = true;
        inLegacyIE = true;
      }
    }
  } catch (e) { }

  // Create a simple indexOf function for support
  // of older browsers.  Uses native indexOf if 
  // available.  Code similar to underscores.
  // By making a separate function, instead of adding
  // to the prototype, we will not break bad for loops
  // in older browsers
  var indexOfProto = Array.prototype.indexOf;
  var ttIndexOf = function(array, item) {
    var i = 0, l = array.length;
    
    if (indexOfProto && array.indexOf === indexOfProto) return array.indexOf(item);
    for (; i < l; i++) if (array[i] === item) return i;
    return -1;
  };
  
  /*
    Initialize with Tabletop.init( { key: '0AjAPaAU9MeLFdHUxTlJiVVRYNGRJQnRmSnQwTlpoUXc' } )
      OR!
    Initialize with Tabletop.init( { key: 'https://docs.google.com/spreadsheet/pub?hl=en_US&hl=en_US&key=0AjAPaAU9MeLFdHUxTlJiVVRYNGRJQnRmSnQwTlpoUXc&output=html&widget=true' } )
      OR!
    Initialize with Tabletop.init('0AjAPaAU9MeLFdHUxTlJiVVRYNGRJQnRmSnQwTlpoUXc')
  */

  var Tabletop = function(options) {
    // Make sure Tabletop is being used as a constructor no matter what.
    if(!this || !(this instanceof Tabletop)) {
      return new Tabletop(options);
    }
    
    if(typeof(options) === 'string') {
      options = { key : options };
    }

    this.callback = options.callback;
    this.wanted = options.wanted || [];
    this.key = options.key;
    this.simpleSheet = !!options.simpleSheet;
    this.parseNumbers = !!options.parseNumbers;
    this.wait = !!options.wait;
    this.reverse = !!options.reverse;
    this.postProcess = options.postProcess;
    this.debug = !!options.debug;
    this.query = options.query || '';
    this.orderby = options.orderby;
    this.endpoint = options.endpoint || "https://spreadsheets.google.com";
    this.singleton = !!options.singleton;
    this.simple_url = !!options.simple_url;
    this.callbackContext = options.callbackContext;
    
    if(typeof(options.proxy) !== 'undefined') {
      // Remove trailing slash, it will break the app
      this.endpoint = options.proxy.replace(/\/$/,'');
      this.simple_url = true;
      this.singleton = true;
      // Let's only use CORS (straight JSON request) when
      // fetching straight from Google
      supportsCORS = false
    }
    
    this.parameterize = options.parameterize || false;
    
    if(this.singleton) {
      if(typeof(Tabletop.singleton) !== 'undefined') {
        this.log("WARNING! Tabletop singleton already defined");
      }
      Tabletop.singleton = this;
    }
    
    /* Be friendly about what you accept */
    if(/key=/.test(this.key)) {
      this.log("You passed an old Google Docs url as the key! Attempting to parse.");
      this.key = this.key.match("key=(.*?)(&|#|$)")[1];
    }

    if(/pubhtml/.test(this.key)) {
      this.log("You passed a new Google Spreadsheets url as the key! Attempting to parse.");
      this.key = this.key.match("d\\/(.*?)\\/pubhtml")[1];
    }

    if(!this.key) {
      this.log("You need to pass Tabletop a key!");
      return;
    }

    this.log("Initializing with key " + this.key);

    this.models = {};
    this.model_names = [];

    this.base_json_path = "/feeds/worksheets/" + this.key + "/public/basic?alt=";

    if (inNodeJS || supportsCORS) {
      this.base_json_path += 'json';
    } else {
      this.base_json_path += 'json-in-script';
    }
    
    if(!this.wait) {
      this.fetch();
    }
  };

  // A global storage for callbacks.
  Tabletop.callbacks = {};

  // Backwards compatibility.
  Tabletop.init = function(options) {
    return new Tabletop(options);
  };

  Tabletop.sheets = function() {
    this.log("Times have changed! You'll want to use var tabletop = Tabletop.init(...); tabletop.sheets(...); instead of Tabletop.sheets(...)");
  };

  Tabletop.prototype = {

    fetch: function(callback) {
      if(typeof(callback) !== "undefined") {
        this.callback = callback;
      }
      this.requestData(this.base_json_path, this.loadSheets);
    },
    
    /*
      This will call the environment appropriate request method.
      
      In browser it will use JSON-P, in node it will use request()
    */
    requestData: function(path, callback) {
      if (inNodeJS) {
        this.serverSideFetch(path, callback);
      } else {
        //CORS only works in IE8/9 across the same protocol
        //You must have your server on HTTPS to talk to Google, or it'll fall back on injection
        var protocol = this.endpoint.split("//").shift() || "http";
        if (supportsCORS && (!inLegacyIE || protocol === location.protocol)) {
          this.xhrFetch(path, callback);
        } else {
          this.injectScript(path, callback);
        }
      }
    },

    /*
      Use Cross-Origin XMLHttpRequest to get the data in browsers that support it.
    */
    xhrFetch: function(path, callback) {
      //support IE8's separate cross-domain object
      var xhr = inLegacyIE ? new XDomainRequest() : new XMLHttpRequest();
      xhr.open("GET", this.endpoint + path);
      var self = this;
      xhr.onload = function() {
        try {
          var json = JSON.parse(xhr.responseText);
        } catch (e) {
          console.error(e);
        }
        callback.call(self, json);
      };
      xhr.send();
    },
    
    /*
      Insert the URL into the page as a script tag. Once it's loaded the spreadsheet data
      it triggers the callback. This helps you avoid cross-domain errors
      http://code.google.com/apis/gdata/samples/spreadsheet_sample.html

      Let's be plain-Jane and not use jQuery or anything.
    */
    injectScript: function(path, callback) {
      var script = document.createElement('script');
      var callbackName;
      
      if(this.singleton) {
        if(callback === this.loadSheets) {
          callbackName = 'Tabletop.singleton.loadSheets';
        } else if (callback === this.loadSheet) {
          callbackName = 'Tabletop.singleton.loadSheet';
        }
      } else {
        var self = this;
        callbackName = 'tt' + (+new Date()) + (Math.floor(Math.random()*100000));
        // Create a temp callback which will get removed once it has executed,
        // this allows multiple instances of Tabletop to coexist.
        Tabletop.callbacks[ callbackName ] = function () {
          var args = Array.prototype.slice.call( arguments, 0 );
          callback.apply(self, args);
          script.parentNode.removeChild(script);
          delete Tabletop.callbacks[callbackName];
        };
        callbackName = 'Tabletop.callbacks.' + callbackName;
      }
      
      var url = path + "&callback=" + callbackName;
      
      if(this.simple_url) {
        // We've gone down a rabbit hole of passing injectScript the path, so let's
        // just pull the sheet_id out of the path like the least efficient worker bees
        if(path.indexOf("/list/") !== -1) {
          script.src = this.endpoint + "/" + this.key + "-" + path.split("/")[4];
        } else {
          script.src = this.endpoint + "/" + this.key;
        }
      } else {
        script.src = this.endpoint + url;
      }
      
      if (this.parameterize) {
        script.src = this.parameterize + encodeURIComponent(script.src);
      }
      
      document.getElementsByTagName('script')[0].parentNode.appendChild(script);
    },
    
    /* 
      This will only run if tabletop is being run in node.js
    */
    serverSideFetch: function(path, callback) {
      var self = this
      request({url: this.endpoint + path, json: true}, function(err, resp, body) {
        if (err) {
          return console.error(err);
        }
        callback.call(self, body);
      });
    },

    /* 
      Is this a sheet you want to pull?
      If { wanted: ["Sheet1"] } has been specified, only Sheet1 is imported
      Pulls all sheets if none are specified
    */
    isWanted: function(sheetName) {
      if(this.wanted.length === 0) {
        return true;
      } else {
        return (ttIndexOf(this.wanted, sheetName) !== -1);
      }
    },
    
    /*
      What gets send to the callback
      if simpleSheet === true, then don't return an array of Tabletop.this.models,
      only return the first one's elements
    */
    data: function() {
      // If the instance is being queried before the data's been fetched
      // then return undefined.
      if(this.model_names.length === 0) {
        return undefined;
      }
      if(this.simpleSheet) {
        if(this.model_names.length > 1 && this.debug) {
          this.log("WARNING You have more than one sheet but are using simple sheet mode! Don't blame me when something goes wrong.");
        }
        return this.models[ this.model_names[0] ].all();
      } else {
        return this.models;
      }
    },

    /*
      Add another sheet to the wanted list
    */
    addWanted: function(sheet) {
      if(ttIndexOf(this.wanted, sheet) === -1) {
        this.wanted.push(sheet);
      }
    },
    
    /*
      Load all worksheets of the spreadsheet, turning each into a Tabletop Model.
      Need to use injectScript because the worksheet view that you're working from
      doesn't actually include the data. The list-based feed (/feeds/list/key..) does, though.
      Calls back to loadSheet in order to get the real work done.

      Used as a callback for the worksheet-based JSON
    */
    loadSheets: function(data) {
      var i, ilen;
      var toLoad = [];
      this.foundSheetNames = [];

      for(i = 0, ilen = data.feed.entry.length; i < ilen ; i++) {
        this.foundSheetNames.push(data.feed.entry[i].title.$t);
        // Only pull in desired sheets to reduce loading
        if( this.isWanted(data.feed.entry[i].content.$t) ) {
          var linkIdx = data.feed.entry[i].link.length-1;
          var sheet_id = data.feed.entry[i].link[linkIdx].href.split('/').pop();
          var json_path = "/feeds/list/" + this.key + "/" + sheet_id + "/public/values?alt="
          if (inNodeJS || supportsCORS) {
            json_path += 'json';
          } else {
            json_path += 'json-in-script';
          }
          if(this.query) {
            json_path += "&sq=" + this.query;
          }
          if(this.orderby) {
            json_path += "&orderby=column:" + this.orderby.toLowerCase();
          }
          if(this.reverse) {
            json_path += "&reverse=true";
          }
          toLoad.push(json_path);
        }
      }

      this.sheetsToLoad = toLoad.length;
      for(i = 0, ilen = toLoad.length; i < ilen; i++) {
        this.requestData(toLoad[i], this.loadSheet);
      }
    },

    /*
      Access layer for the this.models
      .sheets() gets you all of the sheets
      .sheets('Sheet1') gets you the sheet named Sheet1
    */
    sheets: function(sheetName) {
      if(typeof sheetName === "undefined") {
        return this.models;
      } else {
        if(typeof(this.models[ sheetName ]) === "undefined") {
          // alert( "Can't find " + sheetName );
          return;
        } else {
          return this.models[ sheetName ];
        }
      }
    },

    /*
      Parse a single list-based worksheet, turning it into a Tabletop Model

      Used as a callback for the list-based JSON
    */
    loadSheet: function(data) {
      var model = new Tabletop.Model( { data: data, 
                                    parseNumbers: this.parseNumbers,
                                    postProcess: this.postProcess,
                                    tabletop: this } );
      this.models[ model.name ] = model;
      if(ttIndexOf(this.model_names, model.name) === -1) {
        this.model_names.push(model.name);
      }
      this.sheetsToLoad--;
      if(this.sheetsToLoad === 0)
        this.doCallback();
    },

    /*
      Execute the callback upon loading! Rely on this.data() because you might
        only request certain pieces of data (i.e. simpleSheet mode)
      Tests this.sheetsToLoad just in case a race condition happens to show up
    */
    doCallback: function() {
      if(this.sheetsToLoad === 0) {
        this.callback.apply(this.callbackContext || this, [this.data(), this]);
      }
    },

    log: function(msg) {
      if(this.debug) {
        if(typeof console !== "undefined" && typeof console.log !== "undefined") {
          Function.prototype.apply.apply(console.log, [console, arguments]);
        }
      }
    }

  };

  /*
    Tabletop.Model stores the attribute names and parses the worksheet data
      to turn it into something worthwhile

    Options should be in the format { data: XXX }, with XXX being the list-based worksheet
  */
  Tabletop.Model = function(options) {
    var i, j, ilen, jlen;
    this.column_names = [];
    this.name = options.data.feed.title.$t;
    this.elements = [];
    this.raw = options.data; // A copy of the sheet's raw data, for accessing minutiae

    if(typeof(options.data.feed.entry) === 'undefined') {
      options.tabletop.log("Missing data for " + this.name + ", make sure you didn't forget column headers");
      this.elements = [];
      return;
    }
    
    for(var key in options.data.feed.entry[0]){
      if(/^gsx/.test(key))
        this.column_names.push( key.replace("gsx$","") );
    }

    for(i = 0, ilen =  options.data.feed.entry.length ; i < ilen; i++) {
      var source = options.data.feed.entry[i];
      var element = {};
      for(var j = 0, jlen = this.column_names.length; j < jlen ; j++) {
        var cell = source[ "gsx$" + this.column_names[j] ];
        if (typeof(cell) !== 'undefined') {
          if(options.parseNumbers && cell.$t !== '' && !isNaN(cell.$t))
            element[ this.column_names[j] ] = +cell.$t;
          else
            element[ this.column_names[j] ] = cell.$t;
        } else {
            element[ this.column_names[j] ] = '';
        }
      }
      if(element.rowNumber === undefined)
        element.rowNumber = i + 1;
      if( options.postProcess )
        options.postProcess(element);
      this.elements.push(element);
    }

  };

  Tabletop.Model.prototype = {
    /*
      Returns all of the elements (rows) of the worksheet as objects
    */
    all: function() {
      return this.elements;
    },

    /*
      Return the elements as an array of arrays, instead of an array of objects
    */
    toArray: function() {
      var array = [],
          i, j, ilen, jlen;
      for(i = 0, ilen = this.elements.length; i < ilen; i++) {
        var row = [];
        for(j = 0, jlen = this.column_names.length; j < jlen ; j++) {
          row.push( this.elements[i][ this.column_names[j] ] );
        }
        array.push(row);
      }
      return array;
    }
  };

  if(inNodeJS) {
    module.exports = Tabletop;
  } else {
    global.Tabletop = Tabletop;
  }

})(this);
</script>
<polymer-element name="ceci-component-sheet" extends="ceci-element" attributes="url" assetpath="/bundles/components/component-sheet/">
  <ceci-definition>
    {
      &quot;name&quot;: &quot;Sheet&quot;,
      &quot;tags&quot;: &quot;ceci-component-sheet&quot;,
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;A canvas for drawing and sharing&quot;,
      &quot;broadcasts&quot;: {
        &quot;sendvalue&quot;: {
          &quot;label&quot;: &quot;send value&quot;,
          &quot;description&quot;: &quot;A cell was tapped&quot;
        },
        &quot;sendheading&quot;: {
          &quot;label&quot;: &quot;send heading&quot;,
          &quot;description&quot;: &quot;A cell was tapped&quot;
        }
      },
      &quot;listeners&quot;: {
      },
      &quot;attributes&quot;: {
        &quot;url&quot;: {
          &quot;label&quot;: &quot;Google Docs URL&quot;,
          &quot;description&quot;: &quot;URL&quot;,
          &quot;editable&quot;: &quot;text&quot;
        }
      }
    }
  </ceci-definition>
  <template>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>/*
 * HTML5 Boilerplate
 *
 * What follows is the result of much research on cross-browser styling.
 * Credit left inline and big thanks to Nicolas Gallagher, Jonathan Neal,
 * Kroc Camen, and the H5BP dev community and team.
 */

/* ==========================================================================
   Base styles: opinionated defaults
   ========================================================================== */

html,
button,
input,
select,
textarea {
  color: #222;
}

body {
  font-size: 1em;
  line-height: 1.4;
}

a {
  color: #00e;
}

a:visited {
  color: #551a8b;
}

a:hover {
  color: #06e;
}

/*
 * Remove the gap between images and the bottom of their containers: h5bp.com/i/440
 */

img {
  vertical-align: middle;
}

/*
 * Remove default fieldset styles.
 */

fieldset {
  border: 0;
  margin: 0;
  padding: 0;
}

/*
 * Allow only vertical resizing of textareas.
 */

textarea {
  resize: vertical;
}

/* ==========================================================================
   Author's custom styles
   ========================================================================== */


















/* ==========================================================================
   Helper classes
   ========================================================================== */

/* Prevent callout */

.nocallout {
  -webkit-touch-callout: none;
}

.pressed {
  background-color: rgba(0, 0, 0, 0.7);
}

/* A hack for HTML5 contenteditable attribute on mobile */

textarea[contenteditable] {
  -webkit-appearance: none;
}

/* A workaround for S60 3.x and 5.0 devices which do not animated gif images if
   they have been set as display: none */

.gifhidden {
  position: absolute;
  left: -100%;
}

/*
 * Image replacement
 */

.ir {
  background-color: transparent;
  background-repeat: no-repeat;
  border: 0;
  direction: ltr;
  display: block;
  overflow: hidden;
  text-align: left;
  text-indent: -999em;
}

.ir br {
  display: none;
}

/*
 * Hide from both screenreaders and browsers: h5bp.com/u
 */

.hidden {
  display: none !important;
  visibility: hidden;
}

/*
 * Hide only visually, but have it available for screenreaders: h5bp.com/v
 */

.visuallyhidden {
  border: 0;
  clip: rect(0 0 0 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

/*
 * Extends the .visuallyhidden class to allow the element to be focusable
 * when navigated to via the keyboard: h5bp.com/p
 */

.visuallyhidden.focusable:active,
.visuallyhidden.focusable:focus {
  clip: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  position: static;
  width: auto;
}

/*
 * Hide visually and from screenreaders, but maintain layout
 */

.invisible {
  visibility: hidden;
}

/**
 * Clearfix helper
 * Used to contain floats: h5bp.com/q
 */

.clearfix::before,
.clearfix::after {
  content: "";
  display: table;
}

.clearfix::after {
  clear: both;
}

/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   Theses examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 800px) {
  /* Style adjustments for viewports that meet the condition */
}

@media only screen and (-webkit-min-device-pixel-ratio: 1.5),
     only screen and (min-resolution: 144dpi) {
  /* Style adjustments for viewports that meet the condition */
}
</style>
    <style>/*
 * Web Starter Kit
 *
 * Multi-screen layout styles for your page. Brought to you by the
 * Web Starter Kit team.
 *
 */

html,
body {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
}

body {
  position: relative;
  font-family: 'Roboto Condensed', 'Helvetica', 'Arial', sans-serif;
  font-weight: 300;
  background-color: #FFFFFF;
  box-sizing: border-box;
  min-height: 100%;
}

body.open {
  overflow: hidden;
}

.app-bar {
  display: block;
  width: 100%;
  position: fixed;
  top: 0;
  left: 0;
  background-color: #4285f4;
  overflow: hidden;
  z-index: 1;
}

.app-bar-container {
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  width: 100%;
  height: 60px;
  position: relative;
  -webkit-flex-direction: row;
      -ms-flex-direction: row;
          flex-direction: row;
  margin: 0 auto;
}

.app-bar.open,
.app-bar.open ~ main {
  -webkit-transform: translate(250px, 0);
          transform: translate(250px, 0);
}

.app-bar .logo {
  -webkit-flex: 1;
      -ms-flex: 1;
          flex: 1;
  font-size: 2em;
  line-height: 60px;
  margin: 0 16px;
  padding: 0;
  color: #fefefe;
  float: none;
  max-width: none;
  font-weight: 300;
  line-height: 60px;
}

.app-bar .logo a {
  text-decoration: none;
  color: inherit;
  font-weight: normal;
}

.app-bar-actions {
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-flex-direction: row;
      -ms-flex-direction: row;
          flex-direction: row;
  z-index: 2;
}

.app-bar button {
  width: 60px;
  height: 60px;
  background-image: none;
  background-color: transparent;
  border: none;
  padding: 0;
  -webkit-transition: background-color 0.2s ease-out;
          transition: background-color 0.2s ease-out;
  -webkit-tap-highlight-color: transparent;
}

.app-bar button img {
  width: 60px;
  height: 60px;
}

.app-bar button:hover {
  background-color: rgba(255, 255, 255, 0.1);
}

.app-bar button:focus {
  background-color: rgba(255, 255, 255, 0.2);
  outline: 0;
}

.app-bar button:active {
  background-color: rgba(255, 255, 255, 0.4);
}

button.menu img {
  height:24px;
  width: 24px;
}

.promote-layer {
  /*
  This may promote the layer to a composited
  layer.

  Replace with will-change when available

  #perfmatters
  */
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

.base, p, ul, ol {
  font-size: 19px;
}

.navdrawer-container {
  z-index: 1;
  position: fixed;
  top: 0;
  bottom: 0;
  width: 250px;
  height: 100%;
  background-color: #3367D6;
  color: #fefefe;
  -webkit-transform: translate(-250px, 0);
          transform: translate(-250px, 0);
  overflow-y: auto;
}

.navdrawer-container.open {
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}

.app-bar, .navdrawer-container, main {
  -webkit-transition: -webkit-transform 0.3s ease-out;
          transition: transform 0.3s ease-out;
}

.navdrawer-container h4,
.navdrawer-container ul li a {
  height: auto;
  padding: 17px 20px;
  line-height: 1.4;
}

.navdrawer-container h4 {
  background-color: white;
  color: #3367D6;
}

.navdrawer-container ul {
  padding: 0;
  margin: 0;
  list-style-type: none;
}

.navdrawer-container ul li a {
  display: block;
  text-decoration: none;
  color: white;
  -webkit-transition: background-color 0.2s ease-out;
          transition: background-color 0.2s ease-out;
  white-space: nowrap;
}

.navdrawer-container ul li {
  border-bottom-style: solid;
  border-width: 1px;
  border-color: white;
  padding: 0;
}

.navdrawer-container ul li::before {
  content: none;
}

.navdrawer-container ul li a:hover {
  background-color: rgba(255, 255, 255, 0.2);
}

.navdrawer-container ul li a:focus {
  background-color: rgba(255, 255, 255, 0.3);
  outline: 0;
}

.navdrawer-container ul li a:active {
  background-color: rgba(255, 255, 255, 0.4);
}

main {
  margin: 0 auto;
  /* Height of the header */
  padding: 60px 16px 16px 16px;
  min-height: 100%;
}

/** Larger Screens - desktops and tablets **/
@media all and (min-width: 990px) {
  .app-bar {
    position: relative;
  }

  .app-bar.open,
  .app-bar.open ~ main {
    -webkit-transform: translate(0px, 0);
            transform: translate(0px, 0);
  }

  .app-bar-container {
    display: block;
    height: 130px;
    max-width: 864px;
    padding: 0 16px;
    box-sizing: border-box;
    background-color: #4285f4;
  }

  .app-bar .logo {
    float: left;
    margin: 0;
    padding: 0;
    line-height: 130px;
    font-size: 46px;
  }

  .app-bar-actions {
    float: right;
  }

  .app-bar::after {
    content: ' ';
    display: block;
    height: 0;
    overflow: hidden;
    clear: both;
  }

  button.menu {
    display: none;
  }

  nav {
    display: block;
    margin-top: 130px;
  }

  .navdrawer-container {
    position: relative;
    width: 100%;
    height: auto;
    margin-top: 130px;
    -webkit-transform: translate(0, 0);
            transform: translate(0, 0);
    -webkit-transition: none;
            transition: none;
    overflow-y: auto;
  }

  .navdrawer-container h4 {
    display: none;
  }

  .navdrawer-container ul {
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    max-width: 864px;
    margin: 0 auto;
    -webkit-flex-direction: row;
        -ms-flex-direction: row;
            flex-direction: row;
  }

  .navdrawer-container ul li {
    border: none;
  }

  main {
    max-width: 864px;
    padding-top: 0;
    min-height: initial;
  }

  body {
    overflow-y: scroll;
  }

  .navdrawer-container {
    position: relative;
    margin-top: 0;
  }
}
</style>
    <style>/**
*
* Main Stylesheet For Visual Style Guide
*
**/
/**
*
* Utils
*
**/
/*==========  VARIABLES  ==========*/
/*==========  FUNCTIONS  ==========*/
/*==========  MIXINS  ==========*/
/*! normalize.css v3.0.1 | MIT License | git.io/normalize */
/**
 * 1. Set default font family to sans-serif.
 * 2. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */
html {
  font-family: sans-serif;
  /* 1 */
  -ms-text-size-adjust: 100%;
  /* 2 */
  -webkit-text-size-adjust: 100%;
  /* 2 */
}

/**
 * Remove default margin.
 */
body {
  margin: 0;
}

/* HTML5 display definitions
   ========================================================================== */
/**
 * Correct `block` display not defined for any HTML5 element in IE 8/9.
 * Correct `block` display not defined for `details` or `summary` in IE 10/11 and Firefox.
 * Correct `block` display not defined for `main` in IE 11.
 */
article,
aside,
details,
figcaption,
figure,
footer,
header,
main,
nav,
section,
summary {
  display: block;
}

/**
 * 1. Correct `inline-block` display not defined in IE 8/9.
 * 2. Normalize vertical alignment of `progress` in Chrome, Firefox, and Opera.
 */
audio,
canvas,
progress,
video {
  display: inline-block;
  /* 1 */
  vertical-align: baseline;
  /* 2 */
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */
audio:not([controls]) {
  display: none;
  height: 0;
}

/**
 * Address `[hidden]` styling not present in IE 8/9/10.
 * Hide the `template` element in IE 8/9/11, Safari, and Firefox < 22.
 */
[hidden],
template {
  display: none;
}

/* Links
   ========================================================================== */
/**
 * Remove the gray background color from active links in IE 10.
 */
a {
  background: transparent;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */
a:active,
a:hover {
  outline: 0;
}

/* Text-level semantics
   ========================================================================== */
/**
 * Address styling not present in IE 8/9/10/11, Safari, and Chrome.
 */
abbr[title] {
  border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 4+, Safari, and Chrome.
 */
b,
strong {
  font-weight: bold;
}

/**
 * Address styling not present in Safari and Chrome.
 */
dfn {
  font-style: italic;
}

/**
 * Address styling not present in IE 8/9.
 */
mark {
  background: #ff0;
  color: #000;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */
sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}

sup {
  top: -0.5em;
}

sub {
  bottom: -0.25em;
}

/* Embedded content
   ========================================================================== */
/**
 * Remove border when inside `a` element in IE 8/9/10.
 */
img {
  border: 0;
}

/**
 * Correct overflow not hidden in IE 9/10/11.
 */
svg:not(:root) {
  overflow: hidden;
}

/* Grouping content
   ========================================================================== */
/**
 * Remove margin
 */
figure {
  margin: 0;
}

/**
 * Address differences between Firefox and other browsers.
 */
hr {
  box-sizing: content-box;
  height: 0;
}

/**
 * Contain overflow in all browsers.
 */
pre {
  overflow: auto;
}

/**
 * Address odd `em`-unit font size rendering in all browsers.
 */
code,
kbd,
pre,
samp {
  font-family: monospace, monospace;
  font-size: 1em;
}

/* Forms
   ========================================================================== */
/**
 * Known limitation: by default, Chrome and Safari on OS X allow very limited
 * styling of `select`, unless a `border` property is set.
 */
/**
 * 1. Correct color not being inherited.
 *    Known issue: affects color of disabled elements.
 * 2. Correct font properties not being inherited.
 * 3. Address margins set differently in Firefox 4+, Safari, and Chrome.
 */
button,
input,
optgroup,
select,
textarea {
  color: inherit;
  /* 1 */
  font: inherit;
  /* 2 */
  margin: 0;
  /* 3 */
}

/**
 * Address `overflow` set to `hidden` in IE 8/9/10/11.
 */
button {
  overflow: visible;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Firefox, IE 8/9/10/11, and Opera.
 * Correct `select` style inheritance in Firefox.
 */
button,
select {
  text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 */
button,
html input[type="button"],
input[type="reset"],
input[type="submit"] {
  -webkit-appearance: button;
  /* 2 */
  cursor: pointer;
  /* 3 */
}

/**
 * Re-set default cursor for disabled elements.
 */
button[disabled],
html input[disabled] {
  cursor: default;
}

/**
 * Remove inner padding and border in Firefox 4+.
 */
button::-moz-focus-inner,
input::-moz-focus-inner {
  border: 0;
  padding: 0;
}

/**
 * Address Firefox 4+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */
input {
  line-height: normal;
}

/**
 * It's recommended that you don't attempt to style these elements.
 * Firefox's implementation doesn't respect box-sizing, padding, or width.
 *
 * 1. Address box sizing set to `content-box` in IE 8/9/10.
 * 2. Remove excess padding in IE 8/9/10.
 */
input[type="checkbox"],
input[type="radio"] {
  box-sizing: border-box;
  /* 1 */
  padding: 0;
  /* 2 */
}

/**
 * Fix the cursor style for Chrome's increment/decrement buttons. For certain
 * `font-size` values of the `input`, it causes the cursor style of the
 * decrement button to change from `default` to `text`.
 */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  height: auto;
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari and Chrome
 *    (include `-moz` to future-proof).
 */
input[type="search"] {
  -webkit-appearance: textfield;
  /* 1 */
  /* 2 */
  box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari and Chrome on OS X.
 * Safari (but not Chrome) clips the cancel button when the search input has
 * padding (and `textfield` appearance).
 */
input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
  -webkit-appearance: none;
}

/**
 * 1. Correct `color` not being inherited in IE 8/9/10/11.
 * 2. Remove padding so people aren't caught out if they zero out fieldsets.
 */
legend {
  border: 0;
  /* 1 */
  padding: 0;
  /* 2 */
}

/**
 * Remove default vertical scrollbar in IE 8/9/10/11.
 */
textarea {
  overflow: auto;
}

/**
 * Don't inherit the `font-weight` (applied by a rule above).
 * NOTE: the default cannot safely be changed in Chrome and Safari on OS X.
 */
optgroup {
  font-weight: bold;
}

/* Tables
   ========================================================================== */
/**
 * Remove most spacing between table cells.
 */
table {
  border-collapse: collapse;
  border-spacing: 0;
}

td,
th {
  padding: 0;
}

/* Blockquote
   ========================================================================== */
blockquote {
  margin: 0;
}

/**
*
* Global
*
**/
*, *::before, *::after {
  box-sizing: border-box;
}

html, body, button {
  -webkit-font-smoothing: antialiased;
  font-smoothing: antialiased;
}

body {
  font-family: Helvetica, Arial, sans-serif;
  font-size: 16px;
  line-height: 1.6250em;
  /* 26px */
  font-weight: 300;
  color: #404040;
  position: relative;
}
body::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  width: 100%;
  z-index: 9;
  display: none;
  background-image: -webkit-linear-gradient(top, rgba(0, 0, 0, 0.15) 95%, rgba(0, 0, 0, 0.15) 100%);
  background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.15) 95%, rgba(0, 0, 0, 0.15) 100%);
  background-size: 100% 26px;
}
body.debug::after {
  display: block;
  pointer-events: none;
}

pre {
  background: #f0f0f0;
  padding: 13px;
}

.main-container {
  box-sizing: content-box;
  position: relative;
  padding-left: 5%;
  padding-right: 5%;
  margin-left: auto;
  margin-right: auto;
}
@media only screen and (min-width: 1620px) {
  .main-container {
    padding-left: 4.8%;
    padding-right: 4.8%;
    max-width: 688px;
  }
}
@media only screen and (min-width: 1800px) {
  .main-container {
    padding-left: 4.4%;
    padding-right: 4.4%;
    max-width: 864px;
  }
}

.container {
  box-sizing: content-box;
  position: relative;
  padding-left: 5%;
  padding-right: 5%;
  margin-left: auto;
  margin-right: auto;
}
@media only screen and (min-width: 1620px) {
  .container {
    padding-left: 4.8%;
    padding-right: 4.8%;
    max-width: 688px;
  }
}
@media only screen and (min-width: 800px) {
  .container {
    padding-left: 4.4%;
    padding-right: 4.4%;
    max-width: 864px;
  }
}

@media only screen and (min-width: 1620px) {
  .container-medium {
    box-sizing: content-box;
    position: relative;
    padding-left: 5%;
    padding-right: 5%;
    margin-left: auto;
    margin-right: auto;
  }
}
@media only screen and (min-width: 1620px) and (min-width: 1620px) {
  .container-medium {
    padding-left: 4.8%;
    padding-right: 4.8%;
    max-width: 688px;
  }
}
@media only screen and (min-width: 1620px) and (min-width: 800px) {
  .container-medium {
    padding-left: 4.4%;
    padding-right: 4.4%;
    max-width: 864px;
  }
}

@media only screen and (max-width: 619px) {
  .container-small {
    box-sizing: content-box;
    position: relative;
    padding-left: 5%;
    padding-right: 5%;
    margin-left: auto;
    margin-right: auto;
  }
}
@media only screen and (max-width: 619px) and (min-width: 1620px) {
  .container-small {
    padding-left: 4.8%;
    padding-right: 4.8%;
    max-width: 688px;
  }
}
@media only screen and (max-width: 619px) and (min-width: 800px) {
  .container-small {
    padding-left: 4.4%;
    padding-right: 4.4%;
    max-width: 864px;
  }
}

@media only screen and (min-width: 800px) {
  .content {
    margin-right: 25.9%;
  }
  .content pre {
    margin-right: -25.9%;
  }
}

@font-face {
  font-family: "icons";
  src: url(/bundles/components/component-sheet/images/icons/icons.eot);
  src: url(/bundles/components/component-sheet/images/icons/icons.eot?#iefix) format("embedded-opentype"), url(/bundles/components/component-sheet/images/icons/icons.woff2) format("woff2"), url(/bundles/components/component-sheet/images/icons/icons.woff) format("woff"), url(/bundles/components/component-sheet/images/icons/icons.ttf) format("truetype"), url(/bundles/components/component-sheet/images/icons/icons.svg?#icons) format("svg");
  font-weight: normal;
  font-style: normal;
}
.icon {
  font-family: "icons";
  display: inline-block;
  vertical-align: top;
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  speak: none;
  text-decoration: inherit;
  text-transform: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.icon-bullet::before, ul li::before, ul.list-links a::before, .list-anchor a::before {
  content: "\e001";
}

.icon-chevron-down::before {
  content: "\e002";
}

.icon-chevron-large::before {
  content: "\e003";
}

.icon-chevron-left::before, .article-nav-link--prev::before {
  content: "\e004";
}

.icon-chevron-right::before, .article-nav-link--next::before, ul.list-links.list-links--primary a::before {
  content: "\e005";
}

.icon-chevron-up::before {
  content: "\e006";
}

.icon-close::before {
  content: "\e007";
}

.icon-cog::before {
  content: "\e008";
}

.icon-diamond::before {
  content: "\e009";
}

.icon-exclamation::before {
  content: "\e00a";
}

.icon-google-dev::before {
  content: "\e00b";
}

.icon-hash::before {
  content: "\e00c";
}

.icon-introduction-to-media::before {
  content: "\e00d";
}

.icon-lessons::before {
  content: "\e00e";
}

.icon-menu::before {
  content: "\e00f";
}

.icon-minus::before {
  content: "\e010";
}

.icon-multi-device-layouts::before {
  content: "\e011";
}

.icon-performance::before {
  content: "\e012";
}

.icon-plus::before {
  content: "\e013";
}

.icon-question::before {
  content: "\e014";
}

.icon-slash::before {
  content: "\e015";
}

.icon-star::before {
  content: "\e016";
}

.icon-tick::before {
  content: "\e017";
}

.icon-user-input::before {
  content: "\e018";
}

/**
*
* Highlight
*
**/
.highlight-module {
  overflow: hidden;
  margin-top: 52px;
  margin-bottom: 26px;
  position: relative;
}
.highlight-module::after {
  background: #f0f0f0;
  content: "";
  height: 100%;
  position: absolute;
  top: 0;
  bottom: 0;
  z-index: 0;
  width: 100%;
  right: 0;
  left: 0;
}
.highlight-module ul,
.highlight-module ol {
  padding-left: 0;
}

.highlight-module__container {
  box-sizing: content-box;
  padding-left: 5%;
  padding-right: 5%;
  margin-left: auto;
  margin-right: auto;
  padding-bottom: 78px;
  z-index: 1;
  position: relative;
}
@media only screen and (min-width: 1620px) {
  .highlight-module__container {
    padding-left: 4.8%;
    padding-right: 4.8%;
    max-width: 688px;
  }
}
@media only screen and (min-width: 800px) {
  .highlight-module__container {
    padding-left: 4.4%;
    padding-right: 4.4%;
    max-width: 864px;
  }
}
.highlight-module__container::before {
  display: none;
}
@media only screen and (min-width: 1620px) {
  .highlight-module__container::before {
    display: block;
    position: absolute;
    top: 106px;
    right: 45px;
    font-family: "icons";
    font-size: 130px;
    line-height: 1px;
    text-align: center;
    height: 100%;
    width: 30.3%;
    color: #ffffff;
  }
}
.highlight-module--left .highlight-module__container::before {
  right: auto;
  left: 45px;
}
@media only screen and (min-width: 800px) {
  .highlight-module__container::before {
    top: 134px;
    width: 22.2%;
    font-size: 180px;
  }
  .highlight-module--large .highlight-module__container::before {
    font-size: 430px;
  }
}
@media only screen and (min-width: 1620px) {
  .highlight-module__container {
    padding-bottom: 52px;
  }
}
@media only screen and (min-width: 800px) {
  .highlight-module__container {
    min-height: 208px;
  }
}

.highlight-module__title {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 68px;
  font-weight: 300;
  line-height: 1.1471em;
  /* 78px */
  padding-top: 0.3824em;
  padding-bottom: 0;
  padding-top: 26px;
}
@media only screen and (min-width: 800px) {
  .highlight-module__title {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 110px;
    font-weight: 300;
    line-height: 1.19em;
    /* 130px */
    padding-top: 0.2364em;
    padding-bottom: 0;
  }
}
@media only screen and (min-width: 800px) {
  .highlight-module__title {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 42px;
    font-weight: 300;
    line-height: 1.2381em;
    /* 52px */
    padding-top: 0.6190em;
    padding-bottom: 0;
  }
}
@media only screen and (min-width: 800px) and (min-width: 800px) {
  .highlight-module__title {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 68px;
    font-weight: 300;
    line-height: 1.1471em;
    /* 78px */
    padding-top: 0.3824em;
    padding-bottom: 0;
  }
}

.highlight-module__cta {
  display: block;
}

/*==========  LEARNING  ==========*/
.highlight-module--learning {
  color: #ffffff;
}
.highlight-module--learning::after {
  background-color: #da2e75;
}
.highlight-module--learning a {
  color: #ffffff;
  text-decoration: underline;
}

/*==========  REMEMBER  ==========*/
.highlight-module--remember {
  color: #ffffff;
}
.highlight-module--remember::after {
  background-color: #09829a;
}
.highlight-module--remember a {
  color: #ffffff;
  text-decoration: underline;
}

/*==========  CODE  ==========*/
.highlight-module--code {
  overflow: visible;
  margin-bottom: 52px;
}
.highlight-module--code pre {
  margin: 0;
  padding-top: 26px;
  font-size: 14px;
  line-height: 26px;
  padding-bottom: 0;
  padding-left: 0;
  padding-right: 0;
}
.highlight-module--code pre span {
  margin: 0;
  padding: 0;
  display: inline-block;
}
.highlight-module--code code {
  margin: 0;
  padding: 0;
  word-spacing: -2px;
  display: block;
}
.highlight-module--code .highlight-module__container {
  padding-bottom: 0;
}
.highlight-module--code .highlight-module__cta {
  position: absolute;
  bottom: -26px;
}

/*==========  LEFT  ==========*/
@media only screen and (min-width: 800px) {
  .highlight-module--left::after {
    width: 80%;
    right: 20%;
  }
}

/*==========  RIGHT  ==========*/
@media only screen and (min-width: 800px) {
  .highlight-module--right::after {
    width: 80%;
    left: 20%;
  }
}
@media only screen and (min-width: 800px) {
  .highlight-module--right.highlight-module--code::after {
    width: 100%;
    left: 0;
  }
}

/*==========  INLINE  ==========*/
.highlight-module--inline {
  color: #404040;
  overflow: visible;
  margin: 26px 0 0;
}
.highlight-module--inline .highlight-module__container {
  padding-bottom: 0;
}
.highlight-module--inline .highlight-module__container::before {
  display: none;
}
.highlight-module--inline .highlight-module__content {
  border-color: #e0e0e0;
  border-style: solid;
  border-width: 1px;
  border-left-width: 0;
  border-right-width: 0;
  margin-bottom: -2px;
  padding: 0 0 26px;
}
.highlight-module--inline .highlight-module__title {
  font-size: 20px;
  font-weight: 300;
  line-height: 1.3000em;
  /* 26px */
  padding-top: 1.3000em;
  padding-bottom: 0;
}
@media only screen and (min-width: 800px) {
  .highlight-module--inline .highlight-module__title {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 26px;
    font-weight: 300;
    line-height: 1.0000em;
    /* 26px */
    padding-top: 1.0000em;
    padding-bottom: 0;
  }
}
.highlight-module--inline.highlight-module--remember .highlight-module__title, .highlight-module--inline.highlight-module--remember li::before {
  color: #09829a;
}
.highlight-module--inline.highlight-module--learning .highlight-module__title, .highlight-module--inline.highlight-module--learning li::before {
  color: #da2e75;
}
.highlight-module--inline::after {
  display: none !important;
}

/*==========  COLORS  ==========*/
div.highlight > pre > code, code .highlight {
  background: transparent;
}

div.highlight > pre > code .c, code .highlight .c {
  color: #999988;
  font-style: italic;
}

/* Comment */
div.highlight > pre > code .err, code .highlight .err {
  color: #a61717;
  background-color: #e3d2d2;
}

/* Error */
/* Keyword */
/* Operator */
div.highlight > pre > code .cm, code .highlight .cm {
  color: #999988;
  font-style: italic;
}

/* Comment.Multiline */
div.highlight > pre > code .cp, code .highlight .cp {
  color: #737373;
}

/* Comment.Preproc */
div.highlight > pre > code .c1, code .highlight .c1 {
  color: #999988;
  font-style: italic;
}

/* Comment.Single */
div.highlight > pre > code .cs, code .highlight .cs {
  color: #737373;
  font-style: italic;
}

/* Comment.Special */
div.highlight > pre > code .gs, code .highlight .gd {
  color: #000000;
  background-color: #ffdddd;
}

/* Generic.Deleted */
div.highlight > pre > code .gd .x, code .highlight .gd .x {
  color: #000000;
  background-color: #ffaaaa;
}

/* Generic.Deleted.Specific */
div.highlight > pre > code .ge, code .highlight .ge {
  font-style: italic;
}

/* Generic.Emph */
div.highlight > pre > code .gr, code .highlight .gr {
  color: #aa0000;
}

/* Generic.Error */
div.highlight > pre > code .gh, code .highlight .gh {
  color: #737373;
}

/* Generic.Heading */
div.highlight > pre > code .gi, code .highlight .gi {
  color: #000000;
  background-color: #ddffdd;
}

/* Generic.Inserted */
div.highlight > pre > code .gi .x, code .highlight .gi .x {
  color: #000000;
  background-color: #aaffaa;
}

/* Generic.Inserted.Specific */
div.highlight > pre > code .go, code .highlight .go {
  color: #888888;
}

/* Generic.Output */
div.highlight > pre > code .gp, code .highlight .gp {
  color: #555555;
}

/* Generic.Prompt */
/* Generic.Strong */
div.highlight > pre > code .gu, code .highlight .gu {
  color: #aaaaaa;
}

/* Generic.Subheading */
div.highlight > pre > code .gt, code .highlight .gt {
  color: #aa0000;
}

/* Generic.Traceback */
/* Keyword.Constant */
/* Keyword.Declaration */
/* Keyword.Pseudo */
/* Keyword.Reserved */
div.highlight > pre > code .kt, code .highlight .kt {
  color: #445588;
}

/* Keyword.Type */
div.highlight > pre > code .m, code .highlight .m {
  color: #009999;
}

/* Literal.Number */
div.highlight > pre > code .s, code .highlight .s {
  color: #da2e75;
}

/* Literal.String */
div.highlight > pre > code .na, code .highlight .na {
  color: teal;
}

/* Name.Attribute */
div.highlight > pre > code .nb, code .highlight .nb {
  color: #0086b3;
}

/* Name.Builtin */
div.highlight > pre > code .nc, code .highlight .nc {
  color: #445588;
}

/* Name.Class */
div.highlight > pre > code .no, code .highlight .no {
  color: teal;
}

/* Name.Constant */
div.highlight > pre > code .ni, code .highlight .ni {
  color: purple;
}

/* Name.Entity */
div.highlight > pre > code .ne, code .highlight .ne {
  color: #990000;
}

/* Name.Exception */
div.highlight > pre > code .nf, code .highlight .nf {
  color: #990000;
}

/* Name.Function */
div.highlight > pre > code .nn, code .highlight .nn {
  color: #555555;
}

/* Name.Namespace */
div.highlight > pre > code .nt, code .highlight .nt {
  color: #09829a;
}

/* Name.Tag */
div.highlight > pre > code .nv, code .highlight .nv {
  color: teal;
}

/* Name.Variable */
/* Operator.Word */
div.highlight > pre > code .w, code .highlight .w {
  color: #bbbbbb;
}

/* Text.Whitespace */
div.highlight > pre > code .mf, code .highlight .mf {
  color: #009999;
}

/* Literal.Number.Float */
div.highlight > pre > code .mh, code .highlight .mh {
  color: #009999;
}

/* Literal.Number.Hex */
div.highlight > pre > code .mi, code .highlight .mi {
  color: #009999;
}

/* Literal.Number.Integer */
div.highlight > pre > code .mo, code .highlight .mo {
  color: #009999;
}

/* Literal.Number.Oct */
div.highlight > pre > code .sb, code .highlight .sb {
  color: #da2e75;
}

/* Literal.String.Backtick */
div.highlight > pre > code .sc, code .highlight .sc {
  color: #da2e75;
}

/* Literal.String.Char */
div.highlight > pre > code .sd, code .highlight .sd {
  color: #da2e75;
}

/* Literal.String.Doc */
div.highlight > pre > code .s2, code .highlight .s2 {
  color: #da2e75;
}

/* Literal.String.Double */
div.highlight > pre > code .se, code .highlight .se {
  color: #da2e75;
}

/* Literal.String.Escape */
div.highlight > pre > code .sh, code .highlight .sh {
  color: #da2e75;
}

/* Literal.String.Heredoc */
div.highlight > pre > code .si, code .highlight .si {
  color: #da2e75;
}

/* Literal.String.Interpol */
div.highlight > pre > code .sx, code .highlight .sx {
  color: #da2e75;
}

/* Literal.String.Other */
div.highlight > pre > code .sr, code .highlight .sr {
  color: #009926;
}

/* Literal.String.Regex */
div.highlight > pre > code .s1, code .highlight .s1 {
  color: #da2e75;
}

/* Literal.String.Single */
div.highlight > pre > code .ss, code .highlight .ss {
  color: #990073;
}

/* Literal.String.Symbol */
div.highlight > pre > code .bp, code .highlight .bp {
  color: #737373;
}

/* Name.Builtin.Pseudo */
div.highlight > pre > code .vc, code .highlight .vc {
  color: teal;
}

/* Name.Variable.Class */
div.highlight > pre > code .vg, code .highlight .vg {
  color: teal;
}

/* Name.Variable.Global */
div.highlight > pre > code .vi, code .highlight .vi {
  color: teal;
}

/* Name.Variable.Instance */
div.highlight > pre > code .il, code .highlight .il {
  color: #009999;
}

/* Literal.Number.Integer.Long */
/**
*
* Editorial Header
*
**/
.editorial-header {
  overflow: hidden;
}
.editorial-header .breadcrumbs {
  color: #3372df;
}
.editorial-header .breadcrumbs a {
  color: #3372df;
}
@media only screen and (min-width: 1620px) {
  .editorial-header .container {
    position: relative;
  }
  .editorial-header .container::before {
    content: "\e003";
    font-family: "icons";
    font-size: 1000px;
    line-height: 0;
    display: block;
    position: absolute;
    top: 0;
    right: 100%;
    color: #f0f0f0;
    margin: 168px -35px 0 0;
  }
}

.editorial-header__excerpt {
  font-size: 20px;
  font-weight: 300;
  line-height: 1.3000em;
  /* 26px */
  padding-top: 1.3000em;
  padding-bottom: 0;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
}

.editorial-header .tag {
  padding-top: 52px;
}

.editorial-header__subtitle {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 42px;
  font-weight: 300;
  line-height: 1.2381em;
  /* 52px */
  padding-top: 0.6190em;
  padding-bottom: 0;
  padding-top: 0;
  color: #3372df;
}
@media only screen and (min-width: 800px) {
  .editorial-header__subtitle {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 68px;
    font-weight: 300;
    line-height: 1.1471em;
    /* 78px */
    padding-top: 0.3824em;
    padding-bottom: 0;
  }
}
@media only screen and (min-width: 1620px) {
  .editorial-header__subtitle {
    padding-top: 0;
    padding-bottom: 26px;
  }
}

.editorial-header__toc {
  margin-top: 26px;
}
.editorial-header__toc ol {
  padding-top: 0;
}
@media only screen and (min-width: 1620px) {
  .editorial-header__toc ol {
    padding-top: 0;
  }
}

.editorial-header__toc-title {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  border-bottom: 1px solid #e0e0e0;
  margin-bottom: 13px;
  padding-bottom: 13px !important;
  color: #3372df;
}

/**
*
* Editorial Header
*
**/
.summary-header {
  background-color: #3372df;
  padding-bottom: 78px;
  color: #ffffff;
  margin-bottom: 26px;
  box-shadow: inset 0 2px 0 0 #fff;
}
.summary-header .breadcrumbs__link {
  color: #ffffff;
}

.summary-header__anchor-list {
  margin-top: 52px;
}

.summary-header__anchors-item a {
  color: #ffffff;
}

/**
*
* Related items
*
**/
.related-guides {
  margin-top: 78px;
  padding-bottom: 50px;
  border-top: 2px solid #e0e0e0;
  padding-top: 50px;
}

.related-guides__list .list-links {
  padding-top: 0;
}
.related-guides__list a {
  display: block;
}

.related-guides__title {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 26px;
  font-weight: 300;
  line-height: 1.0000em;
  /* 26px */
  padding-top: 1.0000em;
  padding-bottom: 0;
  padding-top: 0;
}
@media only screen and (min-width: 800px) {
  .related-guides__title {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 42px;
    font-weight: 300;
    line-height: 1.2381em;
    /* 52px */
    padding-top: 0.6190em;
    padding-bottom: 0;
  }
}
@media only screen and (min-width: 1620px) {
  .related-guides__title {
    padding-top: 0;
  }
}

.related-guides__main-link {
  text-transform: uppercase;
}
.related-guides__main-link::before {
  content: "#";
  display: inline-block;
  padding-right: 2px;
}

/**
*
* In this guide
*
**/
.in-this-guide {
  margin-top: -78px;
}

.in-this-guide__title {
  font-size: 20px;
  font-weight: 300;
  line-height: 1.3000em;
  /* 26px */
  padding-top: 1.3000em;
  padding-bottom: 0;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  margin-bottom: 26px;
}

/**
*
* Articles section
*
**/
.articles-section {
  background: #f0f0f0;
  text-align: center;
  padding: 26px 0 104px;
}

.articles-count {
  color: #3372df;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-weight: 400;
}

.article-section__icon {
  top: -26px;
}
@media only screen and (min-width: 1620px) {
  .article-section__icon {
    top: -39px;
  }
}

.guides-section {
  background: #f0f0f0;
  text-align: center;
  padding: 26px 0 104px;
}

/**
*
* Page header
*
**/
.page-header {
  text-align: center;
}
.page-header .breadcrumbs {
  text-align: left;
  color: #3372df;
}
.page-header .breadcrumbs a {
  color: #3372df;
}
.page-header h3 {
  color: #404040;
  padding-top: 52px;
}

.page-header__excerpt {
  position: relative;
  padding-top: 0;
}
.page-header__excerpt:last-child {
  padding-bottom: 78px;
}

/**
*
* Editorial Header
*
**/
.featured-section {
  background: #f0f0f0;
}

/**
*
* Editorial Header
*
**/
.featured-spotlight {
  background: #404040;
  color: #ffffff;
  overflow: hidden;
  padding-bottom: 77px;
  margin-top: 52px;
}
.featured-spotlight p {
  padding-bottom: 26px;
}
.featured-spotlight .cta--primary {
  color: #ffffff;
}
.featured-spotlight .cta--primary:hover {
  color: #ffffff;
}

.featured-spotlight__container {
  position: relative;
}

@media only screen and (max-width: 619px) {
  .featured-spotlight__img {
    padding-top: 58.4%;
    padding-bottom: 0;
    height: 0;
    overflow: hidden;
    position: relative;
    width: 100%;
  }
}
.featured-spotlight__img img {
  margin: 0 auto;
  display: block;
  width: 100%;
  position: absolute;
  left: 0;
  top: 0;
  margin: 0;
}
@media only screen and (min-width: 1620px) {
  .featured-spotlight__img img {
    width: auto;
    max-width: none;
    left: 109%;
  }
}
@media only screen and (min-width: 800px) {
  .featured-spotlight__img img {
    left: 107.4%;
  }
}

/**
*
* Quote
*
**/
.quote__content {
  position: relative;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 16px;
  line-height: 1.6250em;
  /* 26px */
  padding-top: 1.6250em;
  padding-bottom: 0;
  padding-top: 104px;
  padding-left: 26px;
}
@media only screen and (min-width: 800px) {
  .quote__content {
    font-size: 20px;
    font-weight: 300;
    line-height: 1.3000em;
    /* 26px */
    padding-top: 1.3000em;
    padding-bottom: 0;
  }
}
@media only screen and (min-width: 1620px) {
  .quote__content {
    padding-top: 52px;
    padding-left: 0;
  }
}
.quote__content p {
  border-top: 1px solid #e0e0e0;
  text-align: right;
  font-weight: 500;
  margin-top: 12px;
  padding-top: 13px;
}
.quote__content::before {
  content: open-quote;
  display: block;
  position: absolute;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-weight: 700;
  color: #f0f0f0;
  top: 90px;
  left: 26px;
  font-size: 260px;
}
@media only screen and (min-width: 1620px) {
  .quote__content::before {
    top: 225px;
    left: -210px;
    font-size: 540px;
  }
}

/**
*
* Article nav
*
**/
.article-nav {
  overflow: hidden;
  position: relative;
}
.article-nav::before {
  content: "";
  border-left: 2px solid #e0e0e0;
  height: 100%;
  position: absolute;
  top: 0;
  left: 50%;
}

.article-nav-link {
  padding: 26px 32px;
  float: left;
  width: 50%;
  position: relative;
}
.article-nav-link::before {
  position: absolute;
  top: 21px;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 20px;
  font-weight: 400;
}
@media only screen and (min-width: 1620px) {
  .article-nav-link::before {
    top: 25px;
    font-size: 26px;
    display: block;
    padding: 13px 10px;
    color: #ffffff;
    background: #3372df;
  }
}

.article-nav p {
  padding: 0;
  margin: 0;
}

.article-nav-link--prev {
  text-align: right;
}
.article-nav-link--prev::before {
  font-family: "icons";
  left: 32px;
}
@media only screen and (min-width: 1620px) {
  .article-nav-link--prev p {
    padding-left: 52px;
  }
}

.article-nav-link--next::before {
  font-family: "icons";
  right: 32px;
}
@media only screen and (min-width: 1620px) {
  .article-nav-link--next p {
    padding-right: 52px;
  }
}

.article-nav-count {
  font-size: 20px;
  font-weight: 300;
  line-height: 1.3000em;
  /* 26px */
  padding-top: 1.3000em;
  padding-bottom: 0;
  font-weight: 700;
}
@media only screen and (min-width: 800px) {
  .article-nav-count {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 26px;
    font-weight: 300;
    line-height: 1.0000em;
    /* 26px */
    padding-top: 1.0000em;
    padding-bottom: 0;
  }
}
@media only screen and (min-width: 1620px) {
  .article-nav-count {
    font-weight: 400;
  }
}

/**
*
* Text module
*
**/
@media only screen and (min-width: 1620px) {
  .did-you-know ol {
    padding-top: 0 !important;
  }
}
.did-you-know .cta--primary {
  margin-top: 26px;
  font-weight: 500;
}
.did-you-know > .g--half {
  position: relative;
  padding-left: 0;
}
@media only screen and (min-width: 1620px) {
  .did-you-know > .g--half {
    padding-left: 32px;
  }
}

.did-you-know__symbol {
  padding-bottom: 312px;
}
@media only screen and (min-width: 1620px) {
  .did-you-know__symbol {
    padding-bottom: 26px;
  }
}
.did-you-know__symbol::after {
  content: "\e014";
  color: #3372df;
  font-family: "icons";
  font-size: 300px;
  top: 150px;
  left: 30%;
  position: relative;
  display: block;
  width: 0;
}
@media only screen and (min-width: 1620px) {
  .did-you-know__symbol::after {
    position: absolute;
    font-size: 400px;
    top: 200px;
    left: 110%;
  }
}
@media only screen and (min-width: 800px) {
  .did-you-know__symbol::after {
    position: absolute;
    font-size: 400px;
    top: 200px;
    left: 124%;
  }
}

/**
*
* Table of contents
*
**/
.toc__title {
  font-size: 16px;
  line-height: 1.6250em;
  /* 26px */
  padding-top: 1.6250em;
  padding-bottom: 0;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  padding-bottom: 13px;
  margin-bottom: 12px;
  border-bottom: 1px solid #e0e0e0;
}
@media only screen and (min-width: 800px) {
  .toc__title {
    font-size: 20px;
    font-weight: 300;
    line-height: 1.3000em;
    /* 26px */
    padding-top: 1.3000em;
    padding-bottom: 0;
  }
}
@media only screen and (min-width: 1620px) {
  .toc__title {
    padding-bottom: 13px;
    margin-bottom: 13px;
  }
}

.toc__list {
  padding-top: 0;
  border-bottom: 1px solid #e0e0e0;
  padding-bottom: 12px;
  margin-bottom: 13px;
}
.toc__list a {
  display: block;
}

.toc__sublist {
  padding-top: 0;
}

/**
*
* Next Lessons
*
**/
.next-lessons {
  background: #404040;
  padding: 26px 26px 52px;
  margin-top: 26px;
  color: #ffffff;
  position: relative;
}
@media only screen and (min-width: 1620px) {
  .next-lessons h3 i {
    display: none;
  }
}
.next-lessons::before, .next-lessons::after {
  color: rgba(255, 255, 255, 0.5);
  position: absolute;
  display: none;
}
@media only screen and (min-width: 1620px) {
  .next-lessons::before, .next-lessons::after {
    display: inline-block;
  }
}
@media only screen and (min-width: 1620px) {
  .next-lessons::before {
    content: attr(data-current-lesson);
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 16px;
    font-weight: 400;
    line-height: 1;
    background: #404040;
    display: inline-block;
    padding: 5px 7px;
    right: 127px;
    top: 143px;
    z-index: 1;
    color: rgba(255, 255, 255, 0.5);
  }
}
@media only screen and (min-width: 800px) {
  .next-lessons::before {
    font-size: 20px;
    padding-left: 15px;
    padding-right: 15px;
    top: 126px;
    right: 230px;
  }
}
@media only screen and (min-width: 1620px) {
  .next-lessons::after {
    content: "\e00e";
    font-family: "icons";
    font-size: 150px;
    right: 40px;
    top: 185px;
  }
}
@media only screen and (min-width: 800px) {
  .next-lessons::after {
    font-size: 210px;
    right: 120px;
  }
}

/**
*
* Grid
*
**/
@media only screen and (min-width: 1620px) and (max-width: 799px) {
  .g-medium--1 {
    float: left;
    margin-right: 4.5%;
    width: 30.3%;
  }

  .g-medium--push-1 {
    margin-left: 34.8%;
  }

  .g-medium--pull-1 {
    margin-right: 34.8%;
  }

  .g-medium--2 {
    float: left;
    margin-right: 4.5%;
    width: 65.1%;
  }

  .g-medium--push-2 {
    margin-left: 69.6%;
  }

  .g-medium--pull-2 {
    margin-right: 69.6%;
  }

  .g-medium--3 {
    float: left;
    margin-right: 4.5%;
    width: 99.9%;
    margin-right: 0;
  }

  .g-medium--full {
    float: left;
    margin-right: 4.5%;
    margin-right: 0;
    width: 100%;
  }

  .g--third {
    float: left;
    margin-right: 4.5%;
    width: 30.3%;
  }

  .g--half,
  .g-medium--half {
    float: left;
    margin-right: 4.5%;
    width: 47.75%;
  }

  .g-medium--last {
    margin-right: 0;
  }

  .g-medium--last + .g-medium--half {
    clear: left;
  }

  .g--pull-half {
    margin-right: 52.25%;
  }
}
@media only screen and (min-width: 800px) {
  .g-wide--1 {
    float: left;
    margin-right: 3.7%;
    width: 22.2%;
  }

  .g-wide--push-1 {
    margin-left: 25.9%;
  }

  .g-wide--pull-1 {
    margin-right: 25.9%;
  }

  .g-wide--2 {
    float: left;
    margin-right: 3.7%;
    width: 48.1%;
  }

  .g-wide--push-2 {
    margin-left: 51.8%;
  }

  .g-wide--pull-2 {
    margin-right: 51.8%;
  }

  .g-wide--3 {
    float: left;
    margin-right: 3.7%;
    width: 74%;
  }

  .g-wide--push-3 {
    margin-left: 77.7%;
  }

  .g-wide--pull-3 {
    margin-right: 77.7%;
  }

  .g-wide--4 {
    float: left;
    margin-right: 3.7%;
    width: 99.9%;
    margin-right: 0;
  }

  .g-wide--last {
    margin-right: 0;
  }

  .g-wide--full {
    float: left;
    margin-right: 3.7%;
    margin-right: 0;
    width: 100%;
  }

  .g--third {
    float: left;
    margin-right: 3.7%;
    width: 30.8%;
  }

  .g--half,
  .g-wide--half {
    float: left;
    margin-right: 3.7%;
    width: 48.15%;
  }

  .g--pull-half {
    margin-right: 51.85%;
  }
}
.g--last {
  margin-right: 0;
}

.g--centered {
  float: none;
  margin-left: auto;
  margin-right: auto;
}

.grid-overlay {
  display: none;
  pointer-events: none;
}
.debug .grid-overlay {
  box-sizing: content-box;
  position: relative;
  padding-left: 5%;
  padding-right: 5%;
  margin-left: auto;
  margin-right: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  height: 100%;
  display: block;
}
@media only screen and (min-width: 1620px) {
  .debug .grid-overlay {
    padding-left: 4.8%;
    padding-right: 4.8%;
    max-width: 688px;
  }
}
@media only screen and (min-width: 800px) {
  .debug .grid-overlay {
    padding-left: 4.4%;
    padding-right: 4.4%;
    max-width: 864px;
  }
}
.debug .grid-overlay [class*="g-"] {
  height: 100%;
  background-color: rgba(89, 89, 89, 0.2);
}
@media only screen and (min-width: 1620px) and (max-width: 799px) {
  .debug .grid-overlay .g-wide--last {
    display: none;
  }
}
@media only screen and (max-width: 619px) {
  .debug .grid-overlay {
    display: none;
  }
}

/**
*
* Typography
*
**/
h1, h2, h3, h4, h5, p {
  margin: 0;
}

.small,
small {
  font-size: 13px;
  line-height: 2.0000em;
  /* 26px */
  padding-top: 2.0000em;
  padding-bottom: 0;
}

.base,
p,
ul,
ol {
  font-size: 16px;
  line-height: 1.6250em;
  /* 26px */
  padding-top: 1.6250em;
  padding-bottom: 0;
}

.medium,
h4 {
  font-size: 16px;
  line-height: 1.6250em;
  /* 26px */
  padding-top: 1.6250em;
  padding-bottom: 0;
}
@media only screen and (min-width: 1800px) {
  .medium,
  h4 {
    font-size: 20px;
    font-weight: 300;
    line-height: 1.3000em;
    /* 26px */
    padding-top: 1.3000em;
    padding-bottom: 0;
  }
}

.large,
h3 {
  font-size: 20px;
  font-weight: 300;
  line-height: 1.3000em;
  /* 26px */
  padding-top: 1.3000em;
  padding-bottom: 0;
}
@media only screen and (min-width: 1800px) {
  .large,
  h3 {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 26px;
    font-weight: 300;
    line-height: 1.0000em;
    /* 26px */
    padding-top: 1.0000em;
    padding-bottom: 0;
  }
}

.xlarge,
h2 {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 26px;
  font-weight: 300;
  line-height: 1.0000em;
  /* 26px */
  padding-top: 1.0000em;
  padding-bottom: 0;
}
@media only screen and (min-width: 1800px) {
  .xlarge,
  h2 {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 42px;
    font-weight: 300;
    line-height: 1.2381em;
    /* 52px */
    padding-top: 0.6190em;
    padding-bottom: 0;
  }
}

.xxlarge,
h1 {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 42px;
  font-weight: 300;
  line-height: 1.2381em;
  /* 52px */
  padding-top: 0.6190em;
  padding-bottom: 0;
}
@media only screen and (min-width: 1800px) {
  .xxlarge,
  h1 {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 68px;
    font-weight: 300;
    line-height: 1.1471em;
    /* 78px */
    padding-top: 0.3824em;
    padding-bottom: 0;
  }
}

.huge {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 68px;
  font-weight: 300;
  line-height: 1.1471em;
  /* 78px */
  padding-top: 0.3824em;
  padding-bottom: 0;
}
@media only screen and (min-width: 2800px) {
  .huge {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 110px;
    font-weight: 300;
    line-height: 1.19em;
    /* 130px */
    padding-top: 0.2364em;
    padding-bottom: 0;
  }
}

li > p {
  padding-top: 0;
}

/**
*
* Button
*
**/
.button, .button--primary, .button--secondary, .button--secondary-variation {
  display: inline-block;
  padding: 12px 32px;
  margin-bottom: 13px;
  margin-top: 13px;
  min-height: 26px;
  text-align: center;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-weight: 600;
  text-decoration: none;
  outline: 0;
  -webkit-transition: none;
          transition: none;
}
.button:hover, .button--primary:hover, .button--secondary:hover, .button--secondary-variation:hover {
  background: #4d4d4d;
  color: #ffffff;
  border: 1px solid #4d4d4d;
  text-decoration: none;
}

.button--primary {
  background: #4285f4;
  color: white;
  border: 1px solid #1266f1;
}

.button--secondary {
  background: white;
  color: #3372df;
  border: 1px solid #e6e6e6;
}

.button--secondary-variation {
  background: white;
  color: #3372df;
  border: 1px solid #e6e6e6;
  border-color: transparent;
}

/**
*
* List
*
**/
ul,
ol {
  list-style: none;
  margin: 0;
}
@media only screen and (max-width: 619px) {
  ul,
  ol {
    padding-left: 0;
  }
}

ul li {
  position: relative;
  padding-left: 16px;
}
ul li::before {
  font-family: "icons";
  font-size: 13px;
  display: block;
  font-weight: 400;
  position: absolute;
  top: 0;
  left: 0;
  line-height: 26px;
}
ul li::before {
  font-size: 4px;
}

ol {
  counter-reset: list;
}
ol > li {
  position: relative;
  padding-left: 32px;
}
ol > li::before {
  counter-increment: list;
  content: "0" counter(list);
  color: inherit;
  font-weight: 400;
  display: inline-block;
  position: absolute;
  left: 0;
}
ol > li:nth-child(10n) ~ li::before, ol > li:nth-child(10n)::before {
  content: counter(list);
}

ul ol,
ol ul {
  padding-top: 0;
}

/*==========  LIST LINKS  ==========*/
ul.list-links li::before {
  display: none;
}
ul.list-links a {
  font-weight: 400;
}
ul.list-links a::before {
  font-family: "icons";
  font-size: 13px;
  display: block;
  font-weight: 400;
  position: absolute;
  top: 0;
  left: 0;
  line-height: 26px;
}
ul.list-links a::before {
  font-size: 4px;
}
ul.list-links.list-links--primary a {
  font-weight: 400;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  line-height: 1;
  text-decoration: none;
}
ul.list-links.list-links--primary a::before {
  font-family: "icons";
  font-size: 13px;
  display: block;
  font-weight: 400;
  position: absolute;
  top: 0;
  left: 0;
  line-height: 26px;
}

ol.list-links li::before {
  display: none;
}
ol.list-links li a {
  display: inline-block;
  font-weight: 300;
}
ol.list-links li a::before {
  counter-increment: list;
  content: "0" counter(list);
  color: inherit;
  font-weight: 400;
  display: inline-block;
  position: absolute;
  left: 0;
}
ol.list-links li:nth-child(10n) ~ li a::before, ol.list-links li:nth-child(10n) a::before {
  content: counter(list);
}
ol.list-links.list-links--secondary a::before {
  display: none;
}

.list-links--secondary {
  font-size: 16px;
  line-height: 1.6250em;
  /* 26px */
  padding-top: 1.6250em;
  padding-bottom: 0;
  padding-left: 0;
}
.list-links--secondary li {
  padding-left: 0;
}

/*==========  ANCHOR LIST  ==========*/
.list-anchor {
  padding-left: 0;
}
.list-anchor li {
  font-size: 16px;
  line-height: 1.6250em;
  /* 26px */
  padding-top: 1.6250em;
  padding-bottom: 0;
  padding-top: 0;
  padding-left: 0;
}
.list-anchor li::before {
  display: none;
}
.list-anchor a {
  line-height: 1;
  display: inline-block;
  padding-left: 16px;
}
.list-anchor a::before {
  font-family: "icons";
  font-size: 13px;
  display: block;
  font-weight: 400;
  position: absolute;
  top: 0;
  left: 0;
  line-height: 26px;
}
.list-anchor a::before {
  font-size: 4px;
}

/*==========  SMALL LIST  ==========*/
@media only screen and (min-width: 1620px) {
  .list-small li {
    font-size: 13px;
    line-height: 2.0000em;
    /* 26px */
    padding-top: 2.0000em;
    padding-bottom: 0;
    padding-top: 0;
  }
}

/*==========  CENTERED LIST  ==========*/
.list-centered {
  text-align: center;
  padding-left: 0;
}

/*==========  FEATURED LIST  ==========*/
.featured-list {
  padding-top: 78px;
  padding-bottom: 78px;
}

.featured-list__item {
  background: #ffffff;
  padding-left: 0;
  padding-top: 26px;
  padding-bottom: 26px;
  margin-top: 26px;
}
@media only screen and (min-width: 1620px) {
  .featured-list__item {
    min-height: 338px;
    padding: 52px 32px;
  }
}
.featured-list__item:first-child {
  margin-top: 0;
}
.featured-list__item p {
  margin-bottom: 26px;
}

.featured-list__img-wrapper {
  display: none;
  position: relative;
  padding-top: 26px;
  margin: 0 -5%;
}
@media only screen and (min-width: 1620px) {
  .featured-list__img-wrapper {
    display: block;
    padding-top: 0;
    margin: 0;
  }
}

@media only screen and (min-width: 1620px) {
  .featured-list__img {
    padding-top: 60.8%;
    padding-bottom: 0;
    height: 0;
    overflow: hidden;
    position: absolute;
    width: 100%;
  }
}
.featured-list__img img {
  display: block;
  margin: 0 auto;
  max-width: 100%;
}
@media only screen and (min-width: 1620px) {
  .featured-list__img img {
    margin: 0;
    position: absolute;
    top: 0;
    height: 100%;
    width: 100%;
    left: 0;
  }
}

/*==========  RELATED GUIDES LIST  ==========*/
.related-guides-list {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  padding-top: 0;
  padding-left: 0;
}
@media only screen and (min-width: 1620px) {
  .related-guides-list {
    padding-top: 26px;
  }
}
@media only screen and (min-width: 800px) {
  .related-guides-list {
    padding-top: 0;
  }
}
.related-guides-list p {
  padding-top: 0;
}
.related-guides-list .tag {
  padding-top: 0;
}
.related-guides-list li {
  padding-top: 26px;
  padding-bottom: 25px;
  border-bottom: 1px solid #e0e0e0;
}
.related-guides-list li:last-child {
  border-color: transparent;
}
@media only screen and (min-width: 1620px) {
  .related-guides-list li {
    padding-top: 0;
    padding-bottom: 0;
    border-color: transparent;
  }
}

/*==========  LIST RESET  ==========*/
.list--reset {
  padding-left: 0;
}
.list--reset li {
  padding-left: 0;
}
.list--reset.list-links a::before, .list--reset li::before {
  display: none !important;
}

/*==========  LESSONS  ==========*/
.list-lessons {
  padding-left: 0;
}
.list-lessons a {
  color: #ffffff;
}
.list-lessons .current,
.list-lessons .current a {
  text-decoration: none;
  cursor: default;
}
.list-lessons .current .icon {
  font-size: 13px;
  display: inline-block;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 100%;
  width: 26px;
  line-height: 26px;
  text-align: center;
  margin-left: 7px;
}

/*==========  GUIDES INTO - used on homepage  ==========*/
.list-guides-intro {
  margin-bottom: 52px;
}
@media only screen and (max-width: 619px) {
  .list-guides-intro {
    padding-top: 52px;
  }
}
.list-guides-intro li {
  border-bottom: 1px solid #e0e0e0;
  padding-bottom: 51px;
  margin-bottom: 52px;
}
@media only screen and (min-width: 1620px) {
  .list-guides-intro li {
    border-color: transparent;
    padding-bottom: 0;
  }
}
.list-guides-intro li:last-child {
  border-bottom: transparent;
  margin-bottom: 0;
}

/**
*
* Link
*
**/
a {
  color: #3372df;
}

a:hover {
  text-decoration: none;
}

.cta--primary {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  color: #3372df;
  font-weight: 400;
  display: inline-block;
  line-height: 1;
  text-decoration: none;
}
.cta--primary:hover {
  color: #404040;
}
.cta--primary::before {
  display: inline-block;
  padding-right: 10px;
  font-family: "icons";
  line-height: 25px;
  font-size: 13px;
  content: "\e005";
}

.cta--secondary {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  color: #3372df;
  font-weight: 400;
  display: inline-block;
  line-height: 1;
}
.cta--secondary:hover {
  color: #404040;
}

/**
*
* Table
*
**/
table {
  margin-top: 26px;
  width: 100%;
}
table thead {
  background: #3372df;
  color: #ffffff;
}
table th {
  text-align: center;
  display: none;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 16px;
  line-height: 1.6250em;
  /* 26px */
  padding-top: 1.6250em;
  padding-bottom: 0;
}
@media only screen and (min-width: 800px) {
  table th {
    font-size: 20px;
    font-weight: 300;
    line-height: 1.3000em;
    /* 26px */
    padding-top: 1.3000em;
    padding-bottom: 0;
  }
}
@media only screen and (min-width: 1620px) {
  table tr {
    border-bottom: 1px solid #ffffff;
  }
}
table tbody {
  background: #f0f0f0;
}
table td {
  display: block;
  padding-top: 13px;
  padding-bottom: 13px;
}
table td::before {
  content: attr(data-th) " :";
  display: inline-block;
  color: #ffffff;
  background: #3372df;
  border-right: 2px solid #ffffff;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  width: 100px;
  max-height: 100%;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 16px;
  font-weight: 400;
  padding-left: 13px;
  padding-top: 13px;
}
@media only screen and (min-width: 1620px) {
  table td::before {
    display: none;
  }
}
table th,
table td {
  position: relative;
  padding-left: 140px;
}
@media only screen and (min-width: 1620px) {
  table th,
  table td {
    display: table-cell;
  }
}
@media only screen and (min-width: 1620px) {
  table th {
    padding: 26px;
    padding-top: 13px;
    padding-bottom: 12px;
  }
}
@media only screen and (min-width: 1620px) {
  table td {
    padding: 26px;
    padding-bottom: 25px;
  }
}

td:last-child::after {
  content: "";
  display: block;
  background: #ffffff;
  height: 1px;
  left: 0;
  position: absolute;
  bottom: 0;
  width: 100%;
}
@media only screen and (min-width: 1620px) {
  td:last-child::after {
    display: none;
  }
}

.table-2 col {
  width: 344px;
}
@media only screen and (min-width: 800px) {
  .table-2 col {
    width: 432px;
  }
}
@media only screen and (min-width: 1620px) {
  .table-2 th:first-child,
  .table-2 td:first-child {
    border-right: 2px solid #ffffff;
  }
}

.table-3 col {
  width: 229.3333333333px;
}
@media only screen and (min-width: 800px) {
  .table-3 col {
    width: 288px;
  }
}
@media only screen and (min-width: 1620px) {
  .table-3 th:nth-child(2),
  .table-3 td:nth-child(2) {
    border-left: 2px solid #ffffff;
    border-right: 2px solid #ffffff;
  }
}

.table-4 col {
  width: 172px;
}
@media only screen and (min-width: 800px) {
  .table-4 col {
    width: 216px;
  }
}
@media only screen and (min-width: 1620px) {
  .table-4 th:nth-child(2), .table-4 th:nth-child(3),
  .table-4 td:nth-child(2),
  .table-4 td:nth-child(3) {
    border-left: 2px solid #ffffff;
    border-right: 2px solid #ffffff;
  }
}

/**
*
* Media - imgs/videos
*
**/
img,
video,
object {
  max-width: 100%;
}

.content img {
  margin-top: 26px;
  margin-bottom: 26px;
}

/**
*
* Breadcrumb
*
**/
.breadcrumbs {
  display: none;
  position: relative;
  z-index: 1;
}
@media only screen and (min-width: 1620px) {
  .breadcrumbs {
    display: block;
  }
}

.breadcrumbs p {
  font-size: 13px;
  line-height: 2.0000em;
  /* 26px */
  padding-top: 2.0000em;
  padding-bottom: 0;
  padding-top: 26px;
}

.breadcrumbs__link {
  font-size: 13px;
  line-height: 2.0000em;
  /* 26px */
  padding-top: 2.0000em;
  padding-bottom: 0;
  color: black;
  font-weight: 400;
  padding-top: 0;
}
@media only screen and (min-width: 1620px) {
  .breadcrumbs__link {
    padding-top: 0;
  }
}

/**
*
* subsection__title
*
**/
.subsection-title {
  color: #404040;
  margin-top: 52px;
}

.subsection-number {
  font-size: 16px;
  line-height: 1.6250em;
  /* 26px */
  padding-top: 1.6250em;
  padding-bottom: 0;
  padding-top: 0;
  display: block;
}

/**
*
* Articles list
*
**/
.articles-list {
  padding-left: 0;
}

.articles-list__item {
  padding-bottom: 52px;
  padding-left: 0;
}
.articles-list__item:last-child {
  padding-bottom: 53px;
}
.articles-list__item::before {
  content: "";
  display: block;
  width: 40%;
  height: 1px;
  box-shadow: inset 0 1px 0 0 #e0e0e0;
  margin-right: 0;
  margin-left: 30%;
}
.articles-list__item h3 a:hover {
  text-decoration: none;
}
.articles-list__item p {
  margin-top: 26px;
  margin-bottom: 26px;
}
.articles-list__item:first-child {
  padding-top: 0;
}
@media only screen and (min-width: 1620px) {
  .articles-list__item:first-child {
    padding-top: 24px;
  }
}
.articles-list__item:first-child::before {
  display: none;
}

/**
*
* Guides List
*
**/
.guides-list {
  overflow: hidden;
}
@media only screen and (min-width: 1620px) {
  .guides-list {
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-justify-content: space-between;
        -ms-flex-pack: justify;
            justify-content: space-between;
    -webkit-flex-wrap: wrap;
        -ms-flex-wrap: wrap;
            flex-wrap: wrap;
    padding-top: 52px;
  }
}

.guides-list__item {
  padding: 0;
  background: #ffffff;
  margin-top: 26px;
  margin-bottom: 0;
}
@media only screen and (min-width: 1620px) {
  .guides-list__item {
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-flex-direction: column;
        -ms-flex-direction: column;
            flex-direction: column;
    -webkit-flex-wrap: wrap;
        -ms-flex-wrap: wrap;
            flex-wrap: wrap;
  }
}
.guides-list__item h3 {
  margin: 0 32px;
}
.guides-list__item p {
  margin: 26px 32px 0;
}
@media only screen and (min-width: 1620px) {
  .guides-list__item .primary-content {
    -webkit-flex: 1;
        -ms-flex: 1;
            flex: 1;
  }
}
.guides-list__item .secondary-content {
  position: relative;
  margin-top: 51px;
  border-top: 1px solid #e0e0e0;
}
@media only screen and (min-width: 1620px) {
  .guides-list__item .secondary-content {
    width: 100%;
  }
}
.guides-list__item .secondary-content .icon-circle {
  position: absolute;
  top: -28px;
  left: 50%;
  margin-left: -21px;
  border: 2px solid #ffffff;
}
.guides-list__item .secondary-content .icon-circle i {
  font-size: 23px;
}
.guides-list__item ol {
  margin: 26px 0 0;
  padding: 52px 0 52px;
  margin-top: 0;
}
.guides-list__item::before {
  display: none;
}

/**
*
* Icon Circle
*
**/
.icon-circle,
.icon-circle--large {
  height: 0;
  width: 0;
  background: #737373;
  display: block;
  position: relative;
  border-radius: 100%;
  font-size: 0;
  padding: 22px;
  margin: 4px auto;
}
.icon-circle i,
.icon-circle span,
.icon-circle--large i,
.icon-circle--large span {
  position: absolute;
  line-height: 0px;
  top: 50%;
  width: 100%;
  left: 0;
  text-align: center;
  color: #ffffff;
  font-size: 26px;
}
.icon-circle span,
.icon-circle--large span {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 26px;
  font-weight: 700;
}
@media only screen and (min-width: 1620px) {
  .icon-circle span,
  .icon-circle--large span {
    font-size: 42px;
  }
}

.icon-circle--large {
  margin-top: 0;
  margin-bottom: 0;
  padding: 26px;
  position: relative;
}
.icon-circle--large i {
  font-size: 26px;
}
@media only screen and (min-width: 1620px) {
  .icon-circle--large i {
    font-size: 42px;
  }
}
@media only screen and (min-width: 1620px) {
  .icon-circle--large {
    padding: 37px;
    border: 2px solid #ffffff;
  }
  a .icon-circle--large {
    padding: 38px;
    box-shadow: inset 0px 0px 0px 1px rgba(255, 255, 255, 0.42);
    border: 1px solid;
    -webkit-transition: all 100ms linear;
            transition: all 100ms linear;
    -webkit-transform: translateZ(0);
            transform: translateZ(0);
  }
  .no-touch a:hover .icon-circle--large {
    box-shadow: inset 0px 0px 0px 1px #ffffff;
    -webkit-transform: scale(1.1);
            transform: scale(1.1);
  }
}

.icon-circle--nav {
  height: 0;
  width: 0;
  background: #737373;
  display: block;
  position: relative;
  border-radius: 100%;
  font-size: 0;
  padding: 13px;
  margin: 0 auto;
}
@media only screen and (min-width: 1620px) {
  .icon-circle--nav {
    padding: 22px;
    margin-top: 4px;
    margin-bottom: 4px;
  }
}
.icon-circle--nav i {
  position: absolute;
  line-height: 1px;
  top: 50%;
  width: 100%;
  left: 0;
  text-align: center;
  color: #ffffff;
  font-size: 16px;
}
@media only screen and (min-width: 1620px) {
  .icon-circle--nav i {
    font-size: 26px;
  }
}

/**
*
* Themed styles
*
**/
.theme--multi-device-layouts .themed {
  color: #297ea9;
}
.theme--introduction-to-media .themed {
  color: #cf423a;
}
.theme--user-input .themed {
  color: #2c8566;
}
.theme--performance .themed {
  color: #7b5294;
}

.theme--multi-device-layouts .themed--background, .theme--multi-device-layouts .themed--background.next-lessons::before {
  background-color: #297ea9;
}
.theme--introduction-to-media .themed--background, .theme--introduction-to-media .themed--background.next-lessons::before {
  background-color: #cf423a;
}
.theme--user-input .themed--background, .theme--user-input .themed--background.next-lessons::before {
  background-color: #2c8566;
}
.theme--performance .themed--background, .theme--performance .themed--background.next-lessons::before {
  background-color: #7b5294;
}

.theme--multi-device-layouts .themed--hover:hover {
  color: #297ea9;
}
.theme--introduction-to-media .themed--hover:hover {
  color: #cf423a;
}
.theme--user-input .themed--hover:hover {
  color: #2c8566;
}
.theme--performance .themed--hover:hover {
  color: #7b5294;
}

.theme--multi-device-layouts .themed--hover-secondary:hover {
  color: #89c4e2;
}
.theme--introduction-to-media .themed--hover-secondary:hover {
  color: #edb8b5;
}
.theme--user-input .themed--hover-secondary:hover {
  color: #78d2b3;
}
.theme--performance .themed--hover-secondary:hover {
  color: #c4add2;
}

.article--multi-device-layouts .article-container h1, .article--multi-device-layouts
.article-container h2 {
  color: #297ea9;
}
.article--introduction-to-media .article-container h1, .article--introduction-to-media
.article-container h2 {
  color: #cf423a;
}
.article--user-input .article-container h1, .article--user-input
.article-container h2 {
  color: #2c8566;
}
.article--performance .article-container h1, .article--performance
.article-container h2 {
  color: #7b5294;
}

.nav-theme--multi-device-layouts .themed--hover:hover {
  color: #297ea9;
}
.nav-theme--introduction-to-media .themed--hover:hover {
  color: #cf423a;
}
.nav-theme--user-input .themed--hover:hover {
  color: #2c8566;
}
.nav-theme--performance .themed--hover:hover {
  color: #7b5294;
}

.nav-theme--multi-device-layouts .themed {
  color: #297ea9;
}
.nav-theme--introduction-to-media .themed {
  color: #cf423a;
}
.nav-theme--user-input .themed {
  color: #2c8566;
}
.nav-theme--performance .themed {
  color: #7b5294;
}

.nav-theme--multi-device-layouts .themed--background {
  background-color: #297ea9;
}
.nav-theme--introduction-to-media .themed--background {
  background-color: #cf423a;
}
.nav-theme--user-input .themed--background {
  background-color: #2c8566;
}
.nav-theme--performance .themed--background {
  background-color: #7b5294;
}

/**
*
* Styleguide
*
**/
.page--styleguide .styleguide__module-title {
  margin-bottom: 26px;
}
.page--styleguide section {
  margin-bottom: 52px;
  border-bottom: 1px solid #ccc;
  padding-bottom: 77px;
}
.page--styleguide .styleguide__color-list {
  text-align: center;
}
.page--styleguide .styleguide__color-list li {
  border-bottom: 52px solid;
  margin-bottom: 26px;
  position: relative;
}
.page--styleguide .styleguide__breadcrumb .breadcrumbs {
  display: block;
}
.page--styleguide .styleguide__lists ul,
.page--styleguide .styleguide__lists ol {
  margin-bottom: 26px;
}
.page--styleguide .styleguide__inverted-block {
  background: #e8e8e8;
  padding: 0 13px;
}
.page--styleguide .styleguide__theme-block {
  background: #297ea9;
  padding: 0 13px;
}

.demo {
  margin-bottom: 26px;
  margin-top: 26px;
}

.demo [class*="g-"] {
  background-color: #eeeeee;
  position: relative;
  margin-bottom: 26px;
  min-height: 156px;
}
.demo [class*="g-"]::before, .demo [class*="g-"]::after {
  font-size: 13px;
  line-height: 2.0000em;
  /* 26px */
  padding-top: 2.0000em;
  padding-bottom: 0;
  display: block;
  margin: 0 10px;
}
.demo [class*="g-"]::before {
  content: "HTML classes: ";
  font-weight: 700;
}
.demo [class*="g-"]::after {
  content: attr(class);
  word-spacing: 15px;
}

/**
*
* Resources page
*
**/
.page--resources .article-section__icon, .page--resources .articles-count, .page--resources .guides-list__item .secondary-content {
  display: none;
}
.page--resources .primary-content {
  padding-top: 26px;
  padding-bottom: 52px;
}
.page--resources .primary-content p {
  margin-top: 0;
}

/**
*
* Helper
*
**/
.clear::before, .clear::after {
  content: "";
  display: table;
}
.clear::after {
  clear: both;
}

/*==========  COLORS  ==========*/
.color--blue {
  color: #3372df;
}

.color--red {
  color: #cb4437;
}

.color--green {
  color: #0f9d58;
}

.color--yellow {
  color: #f4b400;
}

.color--blue-secondary {
  color: #b7cdf4;
}

.color--red-secondary {
  color: #ebb6b0;
}

.color--green-secondary {
  color: #56efa5;
}

.color--yellow-secondary {
  color: #ffd45b;
}

.color--gray-background {
  color: #f0f0f0;
}

.color--gray-keyline {
  color: #e0e0e0;
}

.color--gray {
  color: #737373;
}

.color--gray-dark {
  color: #404040;
}

.color--text {
  color: #404040;
}

.color--highlight {
  color: #3372df;
}

.color--warning {
  color: #ffd45b;
}

.color--danger {
  color: #cb4437;
}

.color--muted {
  color: #737373;
}

.color--remember {
  color: #09829a;
}

.color--learning {
  color: #da2e75;
}

.color--layouts {
  color: #297ea9;
}

.color--user {
  color: #2c8566;
}

.color--media {
  color: #cf423a;
}

.color--performance {
  color: #7b5294;
}

.color--layouts-secondary {
  color: #89c4e2;
}

.color--user-secondary {
  color: #78d2b3;
}

.color--media-secondary {
  color: #edb8b5;
}

.color--performance-secondary {
  color: #c4add2;
}

/*==========  TEXT DIVIDER  ==========*/
.text-divider {
  position: relative;
  margin-bottom: 26px;
}
.text-divider::after {
  content: "";
  display: block;
  position: absolute;
  width: 40%;
  height: 1px;
  box-shadow: 0 1px 0 0 #e0e0e0;
  left: 30%;
  bottom: -13px;
}
.text-divider.xlarge {
  margin-bottom: 52px;
}
.text-divider.xlarge::after {
  bottom: -26px;
}
.text-divider.xxlarge {
  margin-bottom: 78px;
}
.text-divider.xxlarge::after {
  bottom: -39px;
}
.text-divider.huge {
  margin-bottom: 78px;
}
.text-divider.huge::after {
  bottom: -39px;
}

/*==========  GENERIC  ==========*/
.centered {
  text-align: center;
}

/*==========  TAG  ==========*/
.tag {
  font-size: 13px;
  line-height: 2.0000em;
  /* 26px */
  padding-top: 2.0000em;
  padding-bottom: 0;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  text-transform: uppercase;
  font-weight: 700;
  display: inline-block;
  text-decoration: none;
}
.tag:hover {
  color: #404040;
}
.tag::before {
  content: "# ";
  display: inline-block;
}
</style>
    <style>:host {
  display: block;
  width: 100%;
  position: relative;
  background-color: #fff;
}

:host table {
  width: 320;
  display: block;
  max-width: 100% !important;
  max-height: 400px;
  cursor: pointer;
  overflow: scroll;
}

:host table td.large {
  word-wrap: normal;
  word-break: normal;
  padding-left: 120px;
  padding-top: .6em;
}
:host table td a {
  word-wrap: normal;
  word-break: break-all;
}

:host #cursor {
  background: #000;
  position: absolute;
  cursor: none;
  pointer-events: none;
}
</style>
    <table id="table">
      <thead id="thead">
      </thead>
      <tbody id="tbody">
      </tbody>
    </table>
    <shadow></shadow>
  </template>
    <script>
require(['jquery'], function($) {
      Polymer("ceci-component-sheet", {
        onCellTap: function(heading, value) {
          this.broadcast("sendvalue", value);
          this.broadcast("sendheading", heading);
        },
        ready: function() {
          this.super();

          var that = this;
          var key = "1nNDHnDvMPUZM7IAiHTNM3XLh2NRrWVDIDenkXe7i2C0";
          Tabletop.init( { key: key,
                           callback: function(data, tabletop) { 
                            var model_names = tabletop.model_names;
                            var cells = [];
                           var headings = [];
                            $.each( data[0], function( key, val ) {
                              if (key != 'rowNumber') {
                                cells.push("<th>" + key + "</th>");
                                headings.push(key);
                              }
                            });
                            $("<tr/>", {id:"header", html: cells.join("")}).appendTo($(that.$.thead));
                            var items = [];
                            var cells = [];
                            $.each( data, function( key, val ) {
                              cells = [];
                              $.each(val, function(key, cell) {
                              if (key != 'rowNumber') {
//                                if (key == 'email') {
//                                  cell = "<a Xhref='mailto:" + cell + "'>"+cell+"</a>";
//                                } else if (key == 'phone') {
//                                  cell = "<a Xhref='tel:" + cell + "'>"+cell+"</a>";
//                                }
                                cells.push("<td class='large' data-th='"+key+"'>" + cell + "</td>");
                              }
                            });
                            var bits = $("<tr/>", {html: cells.join("")});
                            bits.appendTo($(that.$.tbody));
                          });
                            $(that.$.tbody).on('click', 'td', function(evt) {
                              console.log(evt.target);
                              that.onCellTap(evt.target.getAttribute('data-th'), evt.target.textContent);
                            });
//                          console.log("body", $(that.$.tbody));
//                          var links = that.$.tbody.querySelectorAll('a');
//                          console.log("LINKS", links);
//                          Array.prototype.forEach.call(links, function(link) {
//                            link.on('click', function(evt) {
//                              console.log(evt);
//                            });
//                          });
                            console.log(data) 
                           },
                           simpleSheet: true } )
          
//          $.getJSON("http://localhost:4000/data", function(payload) {
//            var items = [];
//            var cells = [];
//            var title = payload.title;
//            var data = payload.data;
//            $.each( data[0], function( key, val ) {
//              cells.push("<th>" + val + "</th>");
//            });
//            $("<tr/>", {id:"header", html: cells.join("")}).appendTo($(that.$.thead));
//            $.each( data.slice(1), function( key, val ) {
//              cells = [];
//              $.each(val, function(key, cell) {
//                if (data[0][key] == 'Email') {
//                  cell = "<a Xhref='mailto:" + cell + "'>"+cell+"</a>";
//                } else if (data[0][key] == 'Phone') {
//                  cell = "<a Xhref='tel:" + cell + "'>"+cell+"</a>";
//                }
//                cells.push("<td class='large' data-th='"+data[0][key]+"'>" + cell + "</td>");
//              });
//              var bits = $("<tr/>", {html: cells.join("")});
//              bits.appendTo($(that.$.tbody));
//            });
//            console.log("body", $(that.$.tbody));
//            var links = that.$.tbody.querySelectorAll('a');
//            console.log("LINKS", links);
//            Array.prototype.forEach.call(links, function(link) {
//              link.on('click', function(evt) {
//                console.log(evt);
//              });
//            });
//          });
          this.super();
        }
      });
});
    </script>
</polymer-element>
<polymer-element name="ceci-sequencer" attributes="playbeats" extends="ceci-element" assetpath="/bundles/components/component-sequencer/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
  padding: 20px 10px 16px 10px;
  background: #555;
  text-align: center;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

:host .output-channel {
  padding: 5px 10px;
  background: #999;
  margin: 0 3px;
  display: block;
  border: solid 2px #555;
}

:host .beats {
  display: inline-block;
}

:host .next-up {
  background: white;
  border: solid 2px white;
  font-weight: bold;
}

:host #channels {
  display: inline-block;
  position: relative;
}



:host .channelrow {
  overflow: auto;
  margin-bottom: 4px;
}

:host .channelrow:last-child {
  margin-bottom: 0;
}

:host .channelrow .beat,
:host .channelrow .label
{
  display:block;
  float: left;
}

:host .channelrow .label:after {
  content: "1";
}

:host .channelrow .beat {
  background: #DDD;
  margin: 0;
  height: 40px;
  width: 68px;
  opacity: .2;
  margin: 0 4px 0px 0;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  position: relative;
}

:host .overlay {
  position: absolute;
  width: 100%;
  height: 100%;
  background: white;
  opacity: 0;
}

:host .channelrow .beat:last-child {
  margin-right: 0px;
}

:host .channelrow .beat:hover {
  opacity: .8;
}

:host [data-beat="0"] .beat:first-child,
:host [data-beat="1"] .beat:nth-child(2),
:host [data-beat="2"] .beat:nth-child(3),
:host [data-beat="3"] .beat:nth-child(4)
{
  opacity: .25;
}

:host [data-beat="0"] .beat.on:first-child,
:host [data-beat="1"] .beat.on:nth-child(2),
:host [data-beat="2"] .beat.on:nth-child(3),
:host [data-beat="3"] .beat.on:nth-child(4)
{
  opacity: 1;
}


:host .indicator.top {
  top: -8px;
}

:host .indicator {
  position: absolute;
  width: 68px;
  height: 5px;
  background: white;
  opacity: .4;
  -webkit-transform: scaleX(.2);
  -webkit-transform-origin: center;
  -moz-transform: scaleX(.2);
  -moz-transform-origin: center;
}

:host .indicator.bottom {
  bottom: -8px;
}

:host [data-beat="0"] .indicator { left: 0px; }
:host [data-beat="1"] .indicator { left: 72px; }
:host [data-beat="2"] .indicator { left: 144px; }
:host [data-beat="3"] .indicator { left: 216px; }

:host .channelrow .beat.on {
  opacity: 1;
}

[data-color="a"] .beat {
  background: #de0310;
}
[data-color="b"] .beat {
  background: #e82f0a;
}
[data-color="c"] .beat {
  background: #ef5106;
}
[data-color="d"] .beat {
  background: #f87303;
}
[data-color="e"] .beat {
  background: #f89200;
}
[data-color="f"] .beat {
  background: #cca108;
}
[data-color="g"] .beat {
  background: #a0af0e;
}
[data-color="h"] .beat {
  background: #78bc13;
}
[data-color="i"] .beat {
  background: #56bb2d;
}
[data-color="j"] .beat {
  background: #3dac5d;
}
[data-color="k"] .beat {
  background: #259c8b;
}
[data-color="l"] .beat {
  background: #0d8bb8;
}
[data-color="m"] .beat {
  background: #1373d2;
}
[data-color="n"] .beat {
  background: #3951d2;
}
[data-color="o"] .beat {
  background: #5f30d2;
}
[data-color="p"] .beat {
  background: #8a0bd;
}
</style>
    <div id="channels" data-beat="{{currentBeat}}">
      <div class="indicator top"></div>
      <div class="indicator bottom"></div>
      <template repeat="{{item, i in activebroadcasts}}">
        <div data-color="{{item.channelcolor}}" data-channel="{{item.channelname}}" class="channelrow">
          <div on-click="{{beattap}}" data-beat="0" class="beat"></div>
          <div on-click="{{beattap}}" data-beat="1" class="beat"></div>
          <div on-click="{{beattap}}" data-beat="2" class="beat"></div>
          <div on-click="{{beattap}}" data-beat="3" class="beat"></div>
        </div>
      </template>
    </div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;name&quot;: &quot;Sequencer&quot;,
      &quot;description&quot;: &quot;Sends messages signals to other bricks according to a pattern.&quot;,
      &quot;broadcasts&quot;: {
        &quot;A&quot;: {
          &quot;label&quot;: &quot;Beat A&quot;,
          &quot;description&quot;: &quot;The first broadcast in the rotation.&quot;,
          &quot;default&quot;: &quot;green&quot;
        },
        &quot;B&quot;: {
          &quot;label&quot;: &quot;Beat B&quot;,
          &quot;description&quot;: &quot;The second broadcast in the rotation.&quot;,
          &quot;default&quot;: &quot;yellow&quot;
        },
        &quot;C&quot;: {
          &quot;label&quot;: &quot;Beat C&quot;,
          &quot;description&quot;: &quot;The third broadcast in the rotation.&quot;
        },
        &quot;D&quot;: {
          &quot;label&quot;: &quot;Beat D&quot;,
          &quot;description&quot;: &quot;The fourth broadcast in the rotation.&quot;
        },
        &quot;E&quot;: {
          &quot;label&quot;: &quot;Beat E&quot;,
          &quot;description&quot;: &quot;The fifth broadcast in the rotation.&quot;
        }
      },
      &quot;listeners&quot;: {
        &quot;input&quot;: {
          &quot;description&quot;: &quot;Plays the next beat in the sequence.&quot;,
          &quot;label&quot;: &quot;Play Beat&quot;,
          &quot;default&quot;: true
        }
      },
      &quot;attributes&quot;: {}
    }
  </ceci-definition>
  <script>
    Polymer('ceci-sequencer', {
      beattap: function(e){
        var self = this;
        var beatEl = e.target;

        if (beatEl.classList.contains("on")){
          beatEl.classList.remove("on");
        }
        else{
          beatEl.classList.add("on");
        }

        self.playbeats = [[],[],[],[]];

        Array.prototype.forEach.call(this.shadowRoot.querySelectorAll(".channelrow"), function(chan) {
          var channel = chan.getAttribute("data-channel");
          var beat = 0;
          Array.prototype.forEach.call(chan.querySelectorAll(".beat"), function(beatEl) {
            if(beatEl.classList.contains("on")) {
              self.playbeats[beat].push(channel);
            }
            beat++;
          });
        });
        this.setAttribute("playbeats",JSON.stringify(this.playbeats));
      },
      currentBeat: -1,
      ready: function() {
        this.super();
        this.lastBroadcast = null;
        var self = this;
        this.playbeats = JSON.parse(this.getAttribute("playbeats")) || [["A"],["B"],["A"],["B"]];
      },
      colorSquares : function(){
        if (this.activebroadcasts.length > 0){
          for(var i = 0; i < this.playbeats.length; i++){
            var beatCount = i + 1;
            var beats = this.playbeats[i];
            for(var j = 0; j < beats.length; j++) {
              var channel = beats[j];

              this.shadowRoot.querySelector(".channelrow[data-channel=" + channel +"] .beat:nth-child(" + beatCount + ")").classList.add("on");
            }
          }
        }
      },
      attached : function(){
        this.super();

        this.addEventListener("CeciChannelUpdated", function(){
          this.updateChannels();
        });

        this.async(function(){
          this.colorSquares()
        });

        this.updateChannels();
      },
      updateChannels: function(){
        var self = this;
        this.activebroadcasts = [];

        Array.prototype.forEach.call(this.querySelectorAll("ceci-broadcast"), function(broadcast) {
          var item = {};
          item.channelcolor = broadcast.getAttribute("on");
          item.channelname = broadcast.getAttribute("from");

          self.activebroadcasts.push(item);
        });

        this.async(function(){
          this.colorSquares();
        });
      },
      input: function(value) {
        this.currentBeat += 1;

        if(this.currentBeat > 3) {
          this.currentBeat = 0;
        }
        var playChannels = this.playbeats[this.currentBeat];
        for(var i = 0; i < playChannels.length; i++){
          this.broadcast(playChannels[i], "tick");
        }
      }
    });
  </script>
</polymer-element>
<polymer-element name="ceci-random" extends="ceci-element" attributes="allowsame min max value" min="0" max="9" allowsame="false" assetpath="/bundles/components/component-random-number/">
  <ceci-definition>
    {
      &quot;name&quot;: &quot;Random Number Generator&quot;,
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Generates a random number for other bricks to use.&quot;,
      &quot;broadcasts&quot;: {
        &quot;send&quot;: {
          &quot;label&quot;: &quot;Random number&quot;,
          &quot;description&quot;: &quot;Sends the random number if explicitly asked to.&quot;,
          &quot;default&quot; : &quot;true&quot;
        }
      },
      &quot;listeners&quot;: {
        &quot;generate&quot;: {
          &quot;description&quot;: &quot;Generate a random number between min and max&quot;,
          &quot;label&quot;: &quot;Generate&quot;,
          &quot;default&quot; : &quot;true&quot;
        }
      },
      &quot;attributes&quot;: {
        &quot;min&quot;: {
          &quot;label&quot;: &quot;Min&quot;,
          &quot;editable&quot;: &quot;number&quot;
        },
        &quot;max&quot;: {
          &quot;label&quot;: &quot;Max&quot;,
          &quot;editable&quot;: &quot;number&quot;
        },
        &quot;allowsame&quot;: {
          &quot;description&quot;: &quot;Allow same number twice&quot;,
          &quot;label&quot;: &quot;Allow same number twice&quot;,
          &quot;editable&quot;: &quot;boolean&quot;
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host .counter {
  text-align: center;
  font-size: 14px;
  padding: 8px 0px;
  background: #DDD;
  color: #666;
}

:host .counter .count-wrapper {
  display: inline-block;
  background: white;
  padding: 5px 12px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  border: solid 1px #CCC;
  border-width: 1px 1px 2px 1px;
}
</style>
    <div class="counter">
        Random between {{min}} and {{max}} &#x2192;
      <div class="count-wrapper">
 {{value}}
      </div>
    </div>
    <shadow></shadow>
  </template>
  <tags>starter,math</tags>
    <script>
      Polymer("ceci-random", {
        ready: function() {
          this.value = Number(this.value) || 0;
          this.super();
        },
        value: 0,
        valueChanged: function() {
          this.broadcast("changed", this.value);
        },
        generate: function() {
          var max = Number(this.max);
          var min = Number(this.min);
          var random = Math.floor(Math.random() * (max - min + 1)) + min;

          if(this.allowsame == "false") {
            while(this.value == random){
              random = Math.floor(Math.random() * (max - min + 1)) + min;
            }
          }
          this.value = random;
          this.send();
        },
        send: function() {
          this.broadcast("send", this.value);
        }
      });
    </script>
</polymer-element>
<polymer-element name="ceci-popcorn-component" extends="ceci-element" make="https://mozteach.makes.org/popcorn/1boj" attributes="make starttime" starttime="0" assetpath="/bundles/components/component-popcorn/">
  <ceci-definition>
    {
      &quot;name&quot;: &quot;Popcorn Maker Player&quot;,
      &quot;tags&quot;: &quot;media,popcorn&quot;,
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Displays and controls a popcorn.webmaker.org make&quot;,
      &quot;broadcasts&quot;: {
        &quot;loaded&quot;: {
          &quot;label&quot;: &quot;Loaded&quot;,
          &quot;description&quot;: &quot;Popcorn make is ready to play&quot;
        },
        &quot;finished&quot;: {
          &quot;label&quot;: &quot;Finished&quot;,
          &quot;description&quot;: &quot;Popcorn make has finished&quot;
        },
        &quot;eventstart&quot;: {
          &quot;label&quot;: &quot;Track event start&quot;,
          &quot;description&quot;: &quot;Track event has started&quot;
        },
        &quot;eventend&quot;: {
          &quot;label&quot;: &quot;Track event end&quot;,
          &quot;description&quot;: &quot;Track event has ended&quot;
        },
        &quot;error&quot;: {
          &quot;label&quot;: &quot;Error&quot;,
          &quot;description&quot;: &quot;Popcorn make has an error&quot;
        },
        &quot;play&quot;: {
          &quot;label&quot;: &quot;Play&quot;,
          &quot;description&quot;: &quot;Popcorn make is playing&quot;
        },
        &quot;pause&quot;: {
          &quot;label&quot;: &quot;Pause&quot;,
          &quot;description&quot;: &quot;Popcorn make is now paused&quot;
        },
        &quot;timeupdate&quot;: {
          &quot;label&quot;: &quot;Time Update&quot;,
          &quot;description&quot;: &quot;Popcorn make&apos;s current time has changed&quot;
        }
      },
      &quot;listeners&quot;: {
        &quot;play&quot;: {
          &quot;description&quot;: &quot;Play the make&quot;,
          &quot;label&quot;: &quot;Play make&quot;
        },
        &quot;pause&quot;: {
          &quot;description&quot;: &quot;Pause the make&quot;,
          &quot;label&quot;: &quot;Pause make&quot;
        },
        &quot;rewind&quot;: {
          &quot;description&quot;: &quot;Rewind the make back to the start&quot;,
          &quot;label&quot;: &quot;Rewind make&quot;
        }
      },
      &quot;attributes&quot;: {
        &quot;make&quot;: {
          &quot;description&quot;: &quot;url to popcorn.webmaker.org make&quot;,
          &quot;label&quot;: &quot;Make&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;starttime&quot;: {
          &quot;description&quot;: &quot;initial time of the popcorn make&quot;,
          &quot;label&quot;: &quot;Start Time&quot;,
          &quot;editable&quot;: &quot;number&quot;
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host iframe {
  border: none;
}

</style>
    <iframe id="make-iframe"></iframe>
    
    <shadow></shadow>
  </template>
    <script>
      Polymer("ceci-popcorn-component", {
        ready: function() {
          this.super();
        },
        makeChanged: function() {
          var iframe = this.$["make-iframe"],
              self = this;
          window.addEventListener( "message", function( e ) {
            if ( e.data.type === "loadedmetadata" ) {
              if ( self.make ) {
                self.$["make-iframe"].contentWindow.postMessage({
                  type: 'currentTime',
                  currentTime: parseInt(self.starttime, 10)
                }, self.make);
              }
              self.broadcast("loaded");
            } else if ( e.data.type === "play" ) {
              self.broadcast("play", e.data.currentTime);
            } else if ( e.data.type === "pause" ) {
              self.broadcast("pause", e.data.currentTime);
            } else if ( e.data.type === "trackend" ) {
              self.broadcast("eventend", e.data.plugin);
            } else if ( e.data.type === "trackstart" ) {
              self.broadcast("eventstart", e.data.plugin);
            } else if ( e.data.type === "ended" ) {
              self.broadcast("finished");
            } else if ( e.data.type === "timeupdate" ) {
              self.broadcast("timeupdate", e.data.currentTime);
            }
          }, false );
          if (this.make.slice( -1 ) !== "_") {
            this.make = this.make + "_";
          }
          iframe.src = this.make;
        },
        play: function() {
          this.$["make-iframe"].contentWindow.postMessage({type: "play"}, this.make);
        },
        pause: function() {
          this.$["make-iframe"].contentWindow.postMessage({type: "pause"}, this.make);
        },
        rewind: function() {
          this.$["make-iframe"].contentWindow.postMessage({
            type: 'currentTime',
            currentTime: 0
          }, this.make);
        }
      });
    </script>
</polymer-element>
<polymer-element name="ceci-paypal" attributes="amount account currency" extends="ceci-element" currency="BRL" amount="5" account="donate@mozilla.org" button="false" assetpath="/bundles/components/component-paypal/">
  <ceci-definition>
    {
      &quot;name&quot;: &quot;PayPal&quot;,
      &quot;description&quot;: &quot;Donates to the cause of your choice through PayPal.&quot;,
      &quot;tags&quot;: [&quot;paypal&quot;, &quot;donate&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;broadcasts&quot;: {
        &quot;donate&quot;: {
          &quot;label&quot;: &quot;Donate&quot;,
          &quot;description&quot;: &quot;Occurs when donation process begins.&quot;
        }
      },
      &quot;listeners&quot;: {
        &quot;submit&quot;: {
          &quot;description&quot;: &quot;Submits a donation once settings have been chosen.&quot;,
          &quot;label&quot;: &quot;Submit&quot;,
          &quot;default&quot;: &quot;orange&quot;
        }
      },
      &quot;attributes&quot;: {
        &quot;amount&quot;: {
          &quot;label&quot;: &quot;Amount&quot;,
          &quot;description&quot;: &quot;Amount of money to donate.&quot;,
          &quot;editable&quot;: &quot;number&quot;,
          &quot;listener&quot;: true,
          &quot;max&quot;: 3,
          &quot;min&quot;: 50
        },
        &quot;account&quot;: {
          &quot;label&quot;: &quot;Account&quot;,
          &quot;description&quot;: &quot;PayPal account which will receive payment.&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;currency&quot;: {
          &quot;label&quot;: &quot;Currency&quot;,
          &quot;description&quot;: &quot;Currency code for donation amount.&quot;,
          &quot;editable&quot;: &quot;text&quot;
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host img {
  width: 100%;
}

:host h3 {
  text-align: center;
}

:host #account {
  text-align: center;
}</style>
    <h3><span id="donationAmount">Donation Amount:</span> <span>{{amount}}</span> <span>{{currency}}</span></h3>
    <p id="account">{{account}}</p>
    <form id="form" method="post" action="https://www.paypal.com/cgi-bin/webscr">
      <input type="hidden" name="amount" id="pp_amount" value="{{amount}}">
      <input type="hidden" name="business" id="pp_business" value="{{account}}">
      <input type="hidden" name="currency_code" id="pp_currency_code" value="{{currency}}">
      <input type="hidden" name="item_name" id="fundrasingCampaignName" value="Donation from AppMaker App">
      <input type="hidden" name="no_shipping" value="1">
      <input type="hidden" name="rm" value="1">
      <input type="hidden" name="cmd" value="_donations"> <!-- TODO - could switch between donation and payments -->
      <input type="hidden" name="return" value=""> <!-- Return url is the current app url with query param to tell success -->
    </form>
    <img src="/bundles/components/component-paypal/thumbnail.png">
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-paypal', {
      ready: function () {
        this.super();
        this.$.donationAmount.textContent = this.gettext(this.localName + "/donationAmount") || this.$.donationAmount.textContent;
      },
      submit: function (value) {
        this.$.form.submit();
        this.broadcast('donate');
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-pad-grid" extends="ceci-element" attributes="backgroundcolor textcolor numrows numcols labels palettenumber" backgroundcolor="#000000" textcolor="#ffffff" numrows="5" numcols="3" palettenumber="1" labels="cucumber,tomato,eggplant,,up,,left,,right,,down," assetpath="/bundles/components/component-pad-grid/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
  padding: 10px;
  text-align: center;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

:host .output-channel {
  padding: 5px 10px;
  background: #999;
  margin: 0 3px;
  display: block;
  border: solid 2px #555;
}

:host .beats {
  display: inline-block;
}

:host .next-up {
  background: white;
  border: solid 2px white;
  font-weight: bold;
}

:host #channels {
  display: inline-block;
  position: relative;
}



:host .channel {
  overflow: auto;
  margin-bottom: 4px;
}

:host .channel:last-child {
  margin-bottom: 0;
}

:host .channel .beat,
:host .channel .label
{
  display:block;
  float: left;
}

:host .channel .label:after {
  content: "1";
}

:host .channel .beat {
  background: #DDD;
  margin: 0;
  height: 40px;
  width: 68px;
  opacity: .2;
  margin: 0 4px 0px 0;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  position: relative;
}

:host .overlay {
  position: absolute;
  width: 100%;
  height: 100%;
  background: white;
  opacity: 0;
}

:host .channel .beat:last-child {
  margin-right: 0px;
}

:host .channel .beat:hover {
  opacity: .8;
}

:host [data-beat="0"] .beat:first-child,
:host [data-beat="1"] .beat:nth-child(2),
:host [data-beat="2"] .beat:nth-child(3),
:host [data-beat="3"] .beat:nth-child(4)
{
  opacity: .25;
}

:host [data-beat="0"] .beat.on:first-child,
:host [data-beat="1"] .beat.on:nth-child(2),
:host [data-beat="2"] .beat.on:nth-child(3),
:host [data-beat="3"] .beat.on:nth-child(4)
{
  opacity: 1;
}


:host .indicator.top {
  top: -8px;
}

:host .indicator {
  position: absolute;
  width: 68px;
  height: 5px;
  background: white;
  opacity: .4;
  -webkit-transform: scaleX(.2);
  -webkit-transform-origin: center;
  -moz-transform: scaleX(.2);
  -moz-transform-origin: center;
}

:host .indicator.bottom {
  bottom: -8px;
}

:host [data-beat="0"] .indicator { left: 0px; }
:host [data-beat="1"] .indicator { left: 72px; }
:host [data-beat="2"] .indicator { left: 144px; }
:host [data-beat="3"] .indicator { left: 216px; }

:host .channel .beat.on {
  opacity: 1;
}

[data-color*="yellow"] .beat {
  background: rgba(229,210,0,1);
}

[data-color*="blue"] .beat {
  background: rgba(53,140,206,1);
}

[data-color*="red"] .beat {
  background: rgba(232,30,20,1);
}

[data-color*="pink"] .beat {
  background: rgba(255,84,167,1);
}

[data-color*="purple"] .beat {
  background: rgba(159,39,207,1);
}

[data-color*="green"] .beat {
  background: rgba(113,184,6,1);
}

[data-color*="orange"] .beat {
  background: rgba(255,123,0,1);
}

:host .box {
  user-select: none;
  -moz-user-select: none;
  -webkit-user-select: none;
  cursor: pointer;
  display: block;
}
:host .row {
  display: block;
  width: 100%;
  padding-bottom: .5em;
}
  
:host .push {
  position: relative;
  text-align: center;
  vertical-align: baseline;
  font-size: 18px;
  display: inline-block;
  border-radius: 5px;
  min-height: 4em;
  margin-right: 4%;
}

:host .push:last-child {
  margin-right: 0;
}
:host .label {
  display: inline;
  position: absolute;
  top: 50%;
  height: 1.2em;
  margin-top: -.6em;
  left: 0;
  right: 0;
  text-align: center;
}



.animation-target {
  -webkit-animation: animation 1000ms linear both;
  animation: animation 1000ms linear both;
}

/* Generated with Bounce.js. Edit at http://bouncejs.com/#{s:[{T:%22c%22,e:%22s%22,d:1000,D:0,f:{x:1,y:1},t:{x:2,y:2},s:1,b:4}]} */

@-webkit-keyframes animation { 
  0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  1.666667% { -webkit-transform: matrix3d(1.18318, 0, 0, 0, 0, 1.18318, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.18318, 0, 0, 0, 0, 1.18318, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  3.333333% { -webkit-transform: matrix3d(1.31571, 0, 0, 0, 0, 1.31571, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.31571, 0, 0, 0, 0, 1.31571, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  5% { -webkit-transform: matrix3d(1.40196, 0, 0, 0, 0, 1.40196, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.40196, 0, 0, 0, 0, 1.40196, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  6.666667% { -webkit-transform: matrix3d(1.44775, 0, 0, 0, 0, 1.44775, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.44775, 0, 0, 0, 0, 1.44775, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  8.333333% { -webkit-transform: matrix3d(1.4597, 0, 0, 0, 0, 1.4597, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.4597, 0, 0, 0, 0, 1.4597, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  10% { -webkit-transform: matrix3d(1.44478, 0, 0, 0, 0, 1.44478, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.44478, 0, 0, 0, 0, 1.44478, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  11.666667% { -webkit-transform: matrix3d(1.40977, 0, 0, 0, 0, 1.40977, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.40977, 0, 0, 0, 0, 1.40977, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  13.333333% { -webkit-transform: matrix3d(1.36102, 0, 0, 0, 0, 1.36102, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.36102, 0, 0, 0, 0, 1.36102, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  15% { -webkit-transform: matrix3d(1.30417, 0, 0, 0, 0, 1.30417, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.30417, 0, 0, 0, 0, 1.30417, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  16.666667% { -webkit-transform: matrix3d(1.24402, 0, 0, 0, 0, 1.24402, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.24402, 0, 0, 0, 0, 1.24402, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  18.333333% { -webkit-transform: matrix3d(1.18448, 0, 0, 0, 0, 1.18448, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.18448, 0, 0, 0, 0, 1.18448, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  20% { -webkit-transform: matrix3d(1.12856, 0, 0, 0, 0, 1.12856, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.12856, 0, 0, 0, 0, 1.12856, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  21.666667% { -webkit-transform: matrix3d(1.07837, 0, 0, 0, 0, 1.07837, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.07837, 0, 0, 0, 0, 1.07837, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  23.333333% { -webkit-transform: matrix3d(1.0353, 0, 0, 0, 0, 1.0353, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.0353, 0, 0, 0, 0, 1.0353, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  25% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  26.666667% { -webkit-transform: matrix3d(0.9726, 0, 0, 0, 0, 0.9726, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.9726, 0, 0, 0, 0, 0.9726, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  28.333333% { -webkit-transform: matrix3d(0.95278, 0, 0, 0, 0, 0.95278, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.95278, 0, 0, 0, 0, 0.95278, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  30% { -webkit-transform: matrix3d(0.93988, 0, 0, 0, 0, 0.93988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93988, 0, 0, 0, 0, 0.93988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  31.666667% { -webkit-transform: matrix3d(0.93303, 0, 0, 0, 0, 0.93303, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93303, 0, 0, 0, 0, 0.93303, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  33.333333% { -webkit-transform: matrix3d(0.93124, 0, 0, 0, 0, 0.93124, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93124, 0, 0, 0, 0, 0.93124, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  35% { -webkit-transform: matrix3d(0.93348, 0, 0, 0, 0, 0.93348, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93348, 0, 0, 0, 0, 0.93348, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  36.666667% { -webkit-transform: matrix3d(0.93871, 0, 0, 0, 0, 0.93871, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93871, 0, 0, 0, 0, 0.93871, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  38.333333% { -webkit-transform: matrix3d(0.946, 0, 0, 0, 0, 0.946, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.946, 0, 0, 0, 0, 0.946, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  40% { -webkit-transform: matrix3d(0.95451, 0, 0, 0, 0, 0.95451, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.95451, 0, 0, 0, 0, 0.95451, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  41.666667% { -webkit-transform: matrix3d(0.9635, 0, 0, 0, 0, 0.9635, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.9635, 0, 0, 0, 0, 0.9635, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  43.333333% { -webkit-transform: matrix3d(0.97241, 0, 0, 0, 0, 0.97241, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.97241, 0, 0, 0, 0, 0.97241, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  45% { -webkit-transform: matrix3d(0.98077, 0, 0, 0, 0, 0.98077, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.98077, 0, 0, 0, 0, 0.98077, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  46.666667% { -webkit-transform: matrix3d(0.98828, 0, 0, 0, 0, 0.98828, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.98828, 0, 0, 0, 0, 0.98828, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  48.333333% { -webkit-transform: matrix3d(0.99472, 0, 0, 0, 0, 0.99472, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99472, 0, 0, 0, 0, 0.99472, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  50% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  51.666667% { -webkit-transform: matrix3d(1.0041, 0, 0, 0, 0, 1.0041, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.0041, 0, 0, 0, 0, 1.0041, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  53.333333% { -webkit-transform: matrix3d(1.00706, 0, 0, 0, 0, 1.00706, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00706, 0, 0, 0, 0, 1.00706, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  55% { -webkit-transform: matrix3d(1.00899, 0, 0, 0, 0, 1.00899, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00899, 0, 0, 0, 0, 1.00899, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  56.666667% { -webkit-transform: matrix3d(1.01002, 0, 0, 0, 0, 1.01002, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.01002, 0, 0, 0, 0, 1.01002, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  58.333333% { -webkit-transform: matrix3d(1.01028, 0, 0, 0, 0, 1.01028, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.01028, 0, 0, 0, 0, 1.01028, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  60% { -webkit-transform: matrix3d(1.00995, 0, 0, 0, 0, 1.00995, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00995, 0, 0, 0, 0, 1.00995, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  61.666667% { -webkit-transform: matrix3d(1.00917, 0, 0, 0, 0, 1.00917, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00917, 0, 0, 0, 0, 1.00917, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  63.333333% { -webkit-transform: matrix3d(1.00808, 0, 0, 0, 0, 1.00808, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00808, 0, 0, 0, 0, 1.00808, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  65% { -webkit-transform: matrix3d(1.0068, 0, 0, 0, 0, 1.0068, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.0068, 0, 0, 0, 0, 1.0068, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  66.666667% { -webkit-transform: matrix3d(1.00546, 0, 0, 0, 0, 1.00546, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00546, 0, 0, 0, 0, 1.00546, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  68.333333% { -webkit-transform: matrix3d(1.00413, 0, 0, 0, 0, 1.00413, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00413, 0, 0, 0, 0, 1.00413, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  70% { -webkit-transform: matrix3d(1.00288, 0, 0, 0, 0, 1.00288, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00288, 0, 0, 0, 0, 1.00288, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  71.666667% { -webkit-transform: matrix3d(1.00175, 0, 0, 0, 0, 1.00175, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00175, 0, 0, 0, 0, 1.00175, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  73.333333% { -webkit-transform: matrix3d(1.00079, 0, 0, 0, 0, 1.00079, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00079, 0, 0, 0, 0, 1.00079, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  75% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  76.666667% { -webkit-transform: matrix3d(0.99939, 0, 0, 0, 0, 0.99939, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99939, 0, 0, 0, 0, 0.99939, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  78.333333% { -webkit-transform: matrix3d(0.99894, 0, 0, 0, 0, 0.99894, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99894, 0, 0, 0, 0, 0.99894, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  80% { -webkit-transform: matrix3d(0.99866, 0, 0, 0, 0, 0.99866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99866, 0, 0, 0, 0, 0.99866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  81.666667% { -webkit-transform: matrix3d(0.9985, 0, 0, 0, 0, 0.9985, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.9985, 0, 0, 0, 0, 0.9985, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  83.333333% { -webkit-transform: matrix3d(0.99846, 0, 0, 0, 0, 0.99846, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99846, 0, 0, 0, 0, 0.99846, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  85% { -webkit-transform: matrix3d(0.99851, 0, 0, 0, 0, 0.99851, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99851, 0, 0, 0, 0, 0.99851, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  86.666667% { -webkit-transform: matrix3d(0.99863, 0, 0, 0, 0, 0.99863, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99863, 0, 0, 0, 0, 0.99863, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  88.333333% { -webkit-transform: matrix3d(0.99879, 0, 0, 0, 0, 0.99879, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99879, 0, 0, 0, 0, 0.99879, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  90% { -webkit-transform: matrix3d(0.99898, 0, 0, 0, 0, 0.99898, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99898, 0, 0, 0, 0, 0.99898, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  91.666667% { -webkit-transform: matrix3d(0.99918, 0, 0, 0, 0, 0.99918, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99918, 0, 0, 0, 0, 0.99918, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  93.333333% { -webkit-transform: matrix3d(0.99938, 0, 0, 0, 0, 0.99938, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99938, 0, 0, 0, 0, 0.99938, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  95% { -webkit-transform: matrix3d(0.99957, 0, 0, 0, 0, 0.99957, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99957, 0, 0, 0, 0, 0.99957, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  96.666667% { -webkit-transform: matrix3d(0.99974, 0, 0, 0, 0, 0.99974, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99974, 0, 0, 0, 0, 0.99974, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  98.333333% { -webkit-transform: matrix3d(0.99988, 0, 0, 0, 0, 0.99988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99988, 0, 0, 0, 0, 0.99988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 
}

@keyframes animation { 
  0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  1.666667% { -webkit-transform: matrix3d(1.18318, 0, 0, 0, 0, 1.18318, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.18318, 0, 0, 0, 0, 1.18318, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  3.333333% { -webkit-transform: matrix3d(1.31571, 0, 0, 0, 0, 1.31571, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.31571, 0, 0, 0, 0, 1.31571, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  5% { -webkit-transform: matrix3d(1.40196, 0, 0, 0, 0, 1.40196, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.40196, 0, 0, 0, 0, 1.40196, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  6.666667% { -webkit-transform: matrix3d(1.44775, 0, 0, 0, 0, 1.44775, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.44775, 0, 0, 0, 0, 1.44775, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  8.333333% { -webkit-transform: matrix3d(1.4597, 0, 0, 0, 0, 1.4597, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.4597, 0, 0, 0, 0, 1.4597, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  10% { -webkit-transform: matrix3d(1.44478, 0, 0, 0, 0, 1.44478, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.44478, 0, 0, 0, 0, 1.44478, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  11.666667% { -webkit-transform: matrix3d(1.40977, 0, 0, 0, 0, 1.40977, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.40977, 0, 0, 0, 0, 1.40977, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  13.333333% { -webkit-transform: matrix3d(1.36102, 0, 0, 0, 0, 1.36102, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.36102, 0, 0, 0, 0, 1.36102, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  15% { -webkit-transform: matrix3d(1.30417, 0, 0, 0, 0, 1.30417, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.30417, 0, 0, 0, 0, 1.30417, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  16.666667% { -webkit-transform: matrix3d(1.24402, 0, 0, 0, 0, 1.24402, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.24402, 0, 0, 0, 0, 1.24402, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  18.333333% { -webkit-transform: matrix3d(1.18448, 0, 0, 0, 0, 1.18448, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.18448, 0, 0, 0, 0, 1.18448, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  20% { -webkit-transform: matrix3d(1.12856, 0, 0, 0, 0, 1.12856, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.12856, 0, 0, 0, 0, 1.12856, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  21.666667% { -webkit-transform: matrix3d(1.07837, 0, 0, 0, 0, 1.07837, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.07837, 0, 0, 0, 0, 1.07837, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  23.333333% { -webkit-transform: matrix3d(1.0353, 0, 0, 0, 0, 1.0353, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.0353, 0, 0, 0, 0, 1.0353, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  25% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  26.666667% { -webkit-transform: matrix3d(0.9726, 0, 0, 0, 0, 0.9726, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.9726, 0, 0, 0, 0, 0.9726, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  28.333333% { -webkit-transform: matrix3d(0.95278, 0, 0, 0, 0, 0.95278, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.95278, 0, 0, 0, 0, 0.95278, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  30% { -webkit-transform: matrix3d(0.93988, 0, 0, 0, 0, 0.93988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93988, 0, 0, 0, 0, 0.93988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  31.666667% { -webkit-transform: matrix3d(0.93303, 0, 0, 0, 0, 0.93303, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93303, 0, 0, 0, 0, 0.93303, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  33.333333% { -webkit-transform: matrix3d(0.93124, 0, 0, 0, 0, 0.93124, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93124, 0, 0, 0, 0, 0.93124, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  35% { -webkit-transform: matrix3d(0.93348, 0, 0, 0, 0, 0.93348, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93348, 0, 0, 0, 0, 0.93348, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  36.666667% { -webkit-transform: matrix3d(0.93871, 0, 0, 0, 0, 0.93871, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93871, 0, 0, 0, 0, 0.93871, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  38.333333% { -webkit-transform: matrix3d(0.946, 0, 0, 0, 0, 0.946, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.946, 0, 0, 0, 0, 0.946, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  40% { -webkit-transform: matrix3d(0.95451, 0, 0, 0, 0, 0.95451, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.95451, 0, 0, 0, 0, 0.95451, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  41.666667% { -webkit-transform: matrix3d(0.9635, 0, 0, 0, 0, 0.9635, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.9635, 0, 0, 0, 0, 0.9635, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  43.333333% { -webkit-transform: matrix3d(0.97241, 0, 0, 0, 0, 0.97241, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.97241, 0, 0, 0, 0, 0.97241, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  45% { -webkit-transform: matrix3d(0.98077, 0, 0, 0, 0, 0.98077, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.98077, 0, 0, 0, 0, 0.98077, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  46.666667% { -webkit-transform: matrix3d(0.98828, 0, 0, 0, 0, 0.98828, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.98828, 0, 0, 0, 0, 0.98828, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  48.333333% { -webkit-transform: matrix3d(0.99472, 0, 0, 0, 0, 0.99472, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99472, 0, 0, 0, 0, 0.99472, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  50% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  51.666667% { -webkit-transform: matrix3d(1.0041, 0, 0, 0, 0, 1.0041, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.0041, 0, 0, 0, 0, 1.0041, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  53.333333% { -webkit-transform: matrix3d(1.00706, 0, 0, 0, 0, 1.00706, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00706, 0, 0, 0, 0, 1.00706, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  55% { -webkit-transform: matrix3d(1.00899, 0, 0, 0, 0, 1.00899, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00899, 0, 0, 0, 0, 1.00899, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  56.666667% { -webkit-transform: matrix3d(1.01002, 0, 0, 0, 0, 1.01002, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.01002, 0, 0, 0, 0, 1.01002, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  58.333333% { -webkit-transform: matrix3d(1.01028, 0, 0, 0, 0, 1.01028, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.01028, 0, 0, 0, 0, 1.01028, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  60% { -webkit-transform: matrix3d(1.00995, 0, 0, 0, 0, 1.00995, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00995, 0, 0, 0, 0, 1.00995, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  61.666667% { -webkit-transform: matrix3d(1.00917, 0, 0, 0, 0, 1.00917, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00917, 0, 0, 0, 0, 1.00917, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  63.333333% { -webkit-transform: matrix3d(1.00808, 0, 0, 0, 0, 1.00808, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00808, 0, 0, 0, 0, 1.00808, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  65% { -webkit-transform: matrix3d(1.0068, 0, 0, 0, 0, 1.0068, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.0068, 0, 0, 0, 0, 1.0068, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  66.666667% { -webkit-transform: matrix3d(1.00546, 0, 0, 0, 0, 1.00546, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00546, 0, 0, 0, 0, 1.00546, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  68.333333% { -webkit-transform: matrix3d(1.00413, 0, 0, 0, 0, 1.00413, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00413, 0, 0, 0, 0, 1.00413, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  70% { -webkit-transform: matrix3d(1.00288, 0, 0, 0, 0, 1.00288, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00288, 0, 0, 0, 0, 1.00288, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  71.666667% { -webkit-transform: matrix3d(1.00175, 0, 0, 0, 0, 1.00175, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00175, 0, 0, 0, 0, 1.00175, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  73.333333% { -webkit-transform: matrix3d(1.00079, 0, 0, 0, 0, 1.00079, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00079, 0, 0, 0, 0, 1.00079, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  75% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  76.666667% { -webkit-transform: matrix3d(0.99939, 0, 0, 0, 0, 0.99939, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99939, 0, 0, 0, 0, 0.99939, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  78.333333% { -webkit-transform: matrix3d(0.99894, 0, 0, 0, 0, 0.99894, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99894, 0, 0, 0, 0, 0.99894, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  80% { -webkit-transform: matrix3d(0.99866, 0, 0, 0, 0, 0.99866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99866, 0, 0, 0, 0, 0.99866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  81.666667% { -webkit-transform: matrix3d(0.9985, 0, 0, 0, 0, 0.9985, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.9985, 0, 0, 0, 0, 0.9985, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  83.333333% { -webkit-transform: matrix3d(0.99846, 0, 0, 0, 0, 0.99846, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99846, 0, 0, 0, 0, 0.99846, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  85% { -webkit-transform: matrix3d(0.99851, 0, 0, 0, 0, 0.99851, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99851, 0, 0, 0, 0, 0.99851, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  86.666667% { -webkit-transform: matrix3d(0.99863, 0, 0, 0, 0, 0.99863, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99863, 0, 0, 0, 0, 0.99863, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  88.333333% { -webkit-transform: matrix3d(0.99879, 0, 0, 0, 0, 0.99879, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99879, 0, 0, 0, 0, 0.99879, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  90% { -webkit-transform: matrix3d(0.99898, 0, 0, 0, 0, 0.99898, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99898, 0, 0, 0, 0, 0.99898, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  91.666667% { -webkit-transform: matrix3d(0.99918, 0, 0, 0, 0, 0.99918, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99918, 0, 0, 0, 0, 0.99918, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  93.333333% { -webkit-transform: matrix3d(0.99938, 0, 0, 0, 0, 0.99938, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99938, 0, 0, 0, 0, 0.99938, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  95% { -webkit-transform: matrix3d(0.99957, 0, 0, 0, 0, 0.99957, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99957, 0, 0, 0, 0, 0.99957, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  96.666667% { -webkit-transform: matrix3d(0.99974, 0, 0, 0, 0, 0.99974, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99974, 0, 0, 0, 0, 0.99974, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  98.333333% { -webkit-transform: matrix3d(0.99988, 0, 0, 0, 0, 0.99988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99988, 0, 0, 0, 0, 0.99988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 
}

</style>
    <div id="box" class="box">
     <div class="row">
       <div class="push"></div>
       <div class="push"></div>
       <div class="push"></div>
       <div class="push"></div>
     </div>
    </div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;music&quot;, &quot;touch&quot;, &quot;button&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;name&quot;: &quot;Button Grid&quot;,
      &quot;description&quot;: &quot;Displays a grid of buttons, each capable of its own action.&quot;,
      &quot;broadcasts&quot;: {
        &quot;taplabel&quot;: {
          &quot;label&quot;: &quot;Tapped label&quot;,
          &quot;description&quot;: &quot;The label of the key tapped&quot;,
          &quot;default&quot;: &quot;green&quot;
        },
        &quot;tapnumber&quot;: {
          &quot;label&quot;: &quot;Tapped number&quot;,
          &quot;description&quot;: &quot;The number of the key tapped (starts at 1)&quot;,
          &quot;default&quot;: &quot;blue&quot;
        },
        &quot;tap1&quot;: {
          &quot;label&quot;: &quot;Button 1 tapped&quot;,
          &quot;description&quot;: &quot;The first button was tapped&quot;,
          &quot;default&quot;: &quot;&quot;
        },
        &quot;tap2&quot;: {
          &quot;label&quot;: &quot;Button 2 tapped&quot;,
          &quot;description&quot;: &quot;The first button was tapped&quot;,
          &quot;default&quot;: &quot;&quot;
        },
        &quot;tap3&quot;: {
          &quot;label&quot;: &quot;Button 3 tapped&quot;,
          &quot;description&quot;: &quot;The first button was tapped&quot;,
          &quot;default&quot;: &quot;&quot;
        },
        &quot;tap4&quot;: {
          &quot;label&quot;: &quot;Button 4 tapped&quot;,
          &quot;description&quot;: &quot;The first button was tapped&quot;,
          &quot;default&quot;: &quot;&quot;
        },
        &quot;tap5&quot;: {
          &quot;label&quot;: &quot;Button 5 tapped&quot;,
          &quot;description&quot;: &quot;The first button was tapped&quot;,
          &quot;default&quot;: &quot;&quot;
        },
        &quot;tap6&quot;: {
          &quot;label&quot;: &quot;Button 6 tapped&quot;,
          &quot;description&quot;: &quot;The first button was tapped&quot;,
          &quot;default&quot;: &quot;&quot;
        },
        &quot;tap7&quot;: {
          &quot;label&quot;: &quot;Button 7 tapped&quot;,
          &quot;description&quot;: &quot;The first button was tapped&quot;,
          &quot;default&quot;: &quot;&quot;
        },
        &quot;tap8&quot;: {
          &quot;label&quot;: &quot;Button 8 tapped&quot;,
          &quot;description&quot;: &quot;The first button was tapped&quot;,
          &quot;default&quot;: &quot;&quot;
        },
        &quot;tap9&quot;: {
          &quot;label&quot;: &quot;Button 9 tapped&quot;,
          &quot;description&quot;: &quot;The first button was tapped&quot;,
          &quot;default&quot;: &quot;&quot;
        }
      },
      &quot;listeners&quot;: {
      },
      &quot;attributes&quot;: {
        &quot;backgroundcolor&quot;: {
          &quot;label&quot;: &quot;Background Color&quot;,
          &quot;editable&quot;: &quot;color&quot;
        },
        &quot;textcolor&quot;: {
          &quot;label&quot;: &quot;Text Color&quot;,
          &quot;editable&quot;: &quot;color&quot;
        },
        &quot;labels&quot;: {
          &quot;label&quot;: &quot;Comma separated labels&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;numcols&quot;: {
          &quot;label&quot;: &quot;Number of columns&quot;,
          &quot;editable&quot;: &quot;number&quot;
        },
        &quot;numrows&quot;: {
          &quot;label&quot;: &quot;Number of rows&quot;,
          &quot;editable&quot;: &quot;number&quot;
        },
        &quot;palettenumber&quot;: {
          &quot;label&quot;: &quot;Which palette? 1-6&quot;,
          &quot;editable&quot;: &quot;number&quot;
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-pad-grid', {
      nextBroadcast : "",
      ready: function() {
        this.super();
        this.colors = [
          ["#578A71",
"#CA53D5",
"#D7552D",
"#95DF44",
"#692A3F",
"#CFA83B",
"#CD98BF",
"#68DB90",
"#C69D85",
"#7C70D0",
"#5D9335",
"#C54692",
"#CE5062",
"#719CC2",
"#C7D383",
"#884928",
"#525926",
"#534273",
"#9BD8CE",
"#3D3D3C"] ,
          ["#89FB21",
"#CD94FD",
"#F4701F",
"#3FD5B7",
"#32170D",
"#196F17",
"#D32458",
"#E3B21E",
"#6B3887",
"#B9C2F2",
"#D7FE76",
"#E48475",
"#283A46",
"#4A7AC5",
"#F174A2",
"#65470F",
"#57C4DE",
"#32D089",
"#A4FEF9",
"#2D2706"],
          ["#FEEBB5",
"#E299BE",
"#8EBCC8",
"#EE9C74",
"#ADD171",
"#8AD4AA",
"#DECFF4",
"#FEFAF1",
"#D0A399",
"#E8C972",
"#FBFE88",
"#C7FCF2",
"#EDFDAA",
"#9CBA8B",
"#CEFED8",
"#BFDBF0",
"#89E3CD",
"#8FC1BA",
"#F7C479",
"#ACC674"],
          ["#C8C3B3",
"#1A1B13",
"#8A6B58",
"#E6DA9B",
"#6E8476",
"#DEF2F1",
"#E7B68C",
"#D1EABA",
"#A38E67",
"#9D9B9A",
"#393A31",
"#9FBFA9",
"#F6FDE4",
"#89906D",
"#F0F6CA",
"#A07763",
"#B7C1B7",
"#343432",
"#DCB586",
"#8E7055"],
          ["#AB41BC",
"#BAA5F1",
"#755288",
"#8F5CF1",
"#F998ED",
"#F258F4",
"#BD91FF",
"#9155AA",
"#BF80C1",
"#E780FF",
"#7752C8",
"#766AB8",
"#9D3896",
"#CF69FD",
"#9A4F95",
"#A994EF",
"#B16FA5",
"#8F36B6",
"#9054E0",
"#6A5DAB"],
          ["#FFFFFF"],
          ["#FF3333", "#FFFFFF"],
          ["#BC4212",
"#D3A18A",
"#FE266A",
"#9B4047",
"#F54F4F",
"#896759",
"#C18058",
"#D45162",
"#F16941",
"#F79D92",
"#AD4436",
"#915C3D",
"#F90D4E",
"#CE1B3A",
"#AC2D4D",
"#F76856",
"#E29A6F",
"#EB5461",
"#F26E32",
"#CE450C"]
        ];
        var self = this;
        this.labelsList = this.getAttribute("labels").split(',');
      },
      attached : function(){
        this.super();
        var that = this;
      },
      updateChannels: function(){
        var that = this;
        this.activebroadcasts = [];
        Array.prototype.forEach.call(this.querySelectorAll("ceci-broadcast"), function(broadcast) {
          var item = {};
          item.channelcolor = broadcast.getAttribute("on");
          item.channelname = broadcast.getAttribute("from");
          that.activebroadcasts.push(item);
        });
      },
      input: function(value) {
        this.currentBeat = this.currentBeat + 1;
        if(this.currentBeat > 3) {
          this.currentBeat = 0;
        }
        var playChannels = this.playbeats[parseInt(this.currentBeat)];
        for(var i = 0; i < playChannels.length; i++){
          this.broadcast(playChannels[i],"tick");
        }
      },
      generateCells: function() {
        this.$.box.innerHTML = '';
        var that = this;
        var row;
        var cell;
        var counter = 0;
        for (var i=0; i < this.numrows; i++) {
          row = document.createElement("div");
          row.setAttribute('class', 'row');
          for (var j=0; j < this.numcols; j++) {
            cell = document.createElement("div");
            cell.setAttribute('class', 'push');
            cell.style.width =((100.0-this.numcols*4)/this.numcols).toString() + "%";
            label = document.createElement('div');
            label.setAttribute('class', 'label');
            var labelText = this.labelsList[counter] || "";
            cell.setAttribute('number', counter+1);
            cell.setAttribute('label', labelText);
            label.textContent = labelText
            cell.appendChild(label);
            cell.addEventListener("click", function(e) {
              var square= e.currentTarget;
              var label = square.getAttribute('label');
              if (label) {
                that.broadcast("taplabel", label);
              }
              var tapnumber = square.getAttribute('number');
              that.broadcast("tapnumber", tapnumber);
              if (Number(tapnumber) < 10) {
                if (label == '') label = "tap"
                that.broadcast('tap' + tapnumber, label);
              }

              // next two lines are sadly needed: http://css-tricks.com/restart-css-animation/
              square.classList.remove("animation-target");
              square.offsetWidth = square.offsetWidth;
              square.classList.add("animation-target");
            });
            var palette = this.colors[(this.palettenumber-1) % this.colors.length];
            cell.style.backgroundColor = palette[counter % palette.length];
            row.appendChild(cell);
            counter ++;
          }
          this.$.box.appendChild(row);
        }
      },
      palettenumberChanged: function (oldValue, newValue) {
        this.palettenumber = Number(newValue);
        this.generateCells();
      },
      labelsChanged: function (oldValue, newValue) {
        this.labelsList = newValue.split(',');
        this.generateCells();
      },
      numcolsChanged: function (oldValue, newValue) {
        if (newValue < 1) {
          this.numcols = "1"; // XXX not sure how to force the settings pane to refuse a value.
          return;
        }
        this.generateCells();
      },
      numrowsChanged: function (oldValue, newValue) {
        if (newValue < 1) {
          this.numrows = "1"; // XXX not sure how to force the settings pane to refuse a value.
          return;
        }
        this.generateCells();
      },
      backgroundcolorChanged: function (oldValue, newValue) {
        this.style.backgroundColor = newValue;
      },
      textcolorChanged: function (oldValue, newValue) {
        this.style.color = newValue;
      }
    });
  </script>
</polymer-element>
<polymer-element name="ceci-microphone-button" attributes="textcolor record done" extends="ceci-element" record="Record" done="Done" textcolor="#ffffff" assetpath="/bundles/components/component-microphone-button/">
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;microphone&quot;, &quot;button&quot;, &quot;audio&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Records an audio clip.&quot;,
      &quot;name&quot;: &quot;Microphone&quot;,
      &quot;broadcasts&quot;: {
        &quot;clip&quot;: {
          &quot;label&quot;: &quot;clip&quot;,
          &quot;description&quot;: &quot;An audio clip from your microphone.&quot;,
          &quot;default&quot;: true
        }
      },
      &quot;listeners&quot;: {
        &quot;start&quot;: {
          &quot;description&quot;: &quot;Start a microphone recording.&quot;,
          &quot;label&quot;: &quot;start&quot;
        },
        &quot;stop&quot;: {
          &quot;description&quot;: &quot;Stop a microphone recording.&quot;,
          &quot;label&quot;: &quot;stop&quot;
        }
      },
      &quot;attributes&quot;: {}
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  padding: 10px 0;
  text-align: center;
  background: #EEE;
}

:host .buttonwrapper {
  display: inline-block;
}

:host .button {
  font-family: "FiraSans", sans-serif;
  cursor: pointer;
  position: relative;
  text-decoration: none;
  outline: none;
  background-color: #4DB227;
  text-align: center;
  border-radius: 0.2rem;
  font-weight: 600;
  font-size: 1.8rem;
  border: none;
  width: 80px;
  height: 42px;
  margin: 0 5px;
  position: relative;
  display: block;
  width: 100px;
  background: #CCC;

  border: solid 2px #BBB;
  border-top: solid 2px #CCC;
  border-bottom: solid 4px #AAA;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
  background-image:  -webkit-linear-gradient(top, #EEE,#DDD);
  background-image:  -moz-linear-gradient(top, #EEE,#DDD);
  background-image:  linear-gradient(top, #EEE,#DDD);
}

:host .button:active {
  border-bottom: solid 2px #AAA;
  margin-top: 2px;
}

:host .icon {
  width: 20px;
  height: 20px;
}

:host #startButton .iconwrapper {
  position: absolute;
  top: calc(50% - 12px);
  left: calc(50% - 12px);
  padding: 2px;
  background-image: -moz-linear-gradient(top, #AAA,#FFF);
  background-image: -webkit-linear-gradient(top, #AAA,#FFF);
  background-image:  linear-gradient(top, #AAA,#FFF);
  -webkit-border-radius: 22px;
  -moz-border-radius: 22px;
  border-radius: 22px;
}

:host #stopButton .iconwrapper {
  position: absolute;
  top: calc(50% - 10px);
  left: calc(50% - 10px);
  -webkit-border-radius: 22px;
  -moz-border-radius: 22px;
  border-radius: 22px;
}

:host #startButton .icon {
  background: #a13333;
  -webkit-border-radius: 20px;*/
  -moz-border-radius: 20px;
  border-radius: 20px;
  height: 20px;
  width: 20px;
}

:host #stopButton .icon {
  background: #555;
}

:host #startButton.recording  {
  border-bottom: solid 2px #AAA;
  margin-top: 2px;
}

:host #startButton.recording .icon {
  background: #eb1919;
}

</style>
    <div class="buttonwrapper">
      <div class="button" id="startButton">
        <div class="iconwrapper">
          <div class="icon"></div>
        </div>
      </div>
    </div>
    <div class="buttonwrapper">
      <div class="button" id="stopButton">
        <div class="iconwrapper">
          <div class="icon"></div>
        </div>
      </div>
    </div>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-microphone-button', {
      ready: function () {
        this.super();
        navigator.getMedia = ( navigator.getUserMedia ||
                               navigator.webkitGetUserMedia ||
                               navigator.mozGetUserMedia ||
                               navigator.msGetUserMedia );
      },
      attached: function() {
        this.super();
        if (navigator.getMedia) {

          this.recording = false;
          this.startButton = this.shadowRoot.querySelector("#startButton");
          this.stopButton = this.shadowRoot.querySelector("#stopButton");
          this.bg = this.shadowRoot.querySelector(".button");
          this.bg.style.background = this.buttoncolor;

          // either run native webaudio or use webrtc fallback
          if(window.MediaRecorder) { this.setupWebAudioAPI(); }
          else { this.setupRecordRTC(); }
        }
      },
      /**
       * Native WebAudio API support
       */
      setupWebAudioAPI: function() {
        var that = this;
        var audioCtx = new AudioContext();

        var onbind = function(stream) {
          var mediaRecorder = new MediaRecorder(stream);
          that.startButton.onclick = function() {
            mediaRecorder.start();
            that.startButton.classList.add("recording");
          };
          that.stopButton.onclick = function() {
            mediaRecorder.stop();
            that.bg.style.background = that.buttoncolor;
            that.startButton.classList.remove("recording");
          };
          var processData = function(e) {
            var audioURL = window.URL.createObjectURL(e.data);
            that.broadcast('clip', audioURL);
            mediaRecorder = new MediaRecorder(stream);
            mediaRecorder.ondataavailable = processData;
          };
          mediaRecorder.ondataavailable = processData;
        };

        var onerror = function(err) {
          console.error('An error occurred while trying to bind to the recording device: ' + err);
        };

        navigator.getMedia ({audio: true}, onbind, onerror);
      },
      /**
       * WebRTC fallback due to lack of native WebAudio API support
       */
      setupRecordRTC: function() {
        var that = this;
        var recordRTC;

        function loadupRecordingFunctionality() {

          var onbind = function(stream) {
            recordRTC = RecordRTC(stream);

            that.startButton.onclick = function() {
              recordRTC.startRecording();
              that.startButton.classList.add("recording");
              that.recording = true;
            };

            that.stopButton.onclick = function() {
              if (!that.recording) return;
              recordRTC.stopRecording(function(audioURL) {
                that.recording = false;
                that.broadcast('clip', audioURL);
                that.bg.style.background = that.buttoncolor;
                that.startButton.classList.remove("recording");
              });
            };
          };

          var onerror = function(err) {
            console.error('An error occurred while trying to bind to the recording device: ' + err);
          };

          navigator.getMedia ({audio: true}, onbind, onerror);
        }

        // Try to bind the recorder, or load the recorder script
        // if the browser hasn't done this yet.
        if(!window.RecordRTC) {
          var script = document.createElement("script");
          script.onload = loadupRecordingFunctionality;
          script.src = "/bundles/resources/RecordRTC.js";
          document.head.appendChild(script);
        } else { loadupRecordingFunctionality(); }
      }
    });
  </script>
</polymer-element><!--TODO-->
<!--1. stop event-->
<!--2. Does this evaluate true / false  this.getAttribute('autostart')-->
<!--3. support tap / touch event? touchend-->
<!--4. cancel-->

<polymer-element name="ceci-metronome" attributes="changeby beatsperminute autostart" beatsperminute="60" autostart="false" extends="ceci-element" changeby="10" assetpath="/bundles/components/component-metronome/">
  <template>
    <style>:host {
  display: block;
  position: relative;
  padding: 10px 0;
  -webkit-user-select: none;
  -moz-user-select: none;
}

:host .metronome-wrapper {
  margin: 0 auto;
  position: relative;
}

:host .speed-control {
  height: 50px;
  width: 50px;
  background: #63a6cc;
  position: absolute;
  border-radius: 30px;
  -webkit-border-radius: 30px;
  top: 10px;
  cursor: pointer;
  opacity: .8;
}

:host .speed-control .icon {
  position: absolute;
  font-size: 40px;
  color: white;
  font-weight: bold;
  width: 100%;
  text-align: center;
  text-shadow: 0px -1px 0px rgba(0,0,0,.25);
}

:host .speed-control:hover {
  opacity: 1;
}

:host .speed-control.up {
  right: 40px;
}

:host .down .icon {
  top: -4px;
}

:host .speed-control.down {
  left: 40px;
}

:host .metronome-body {
  background: #85560b;
  border-top: solid 2px #85560b;
  background: -webkit-linear-gradient(top, #a87018,#85560b);
  background: -moz-linear-gradient(top, #a87018,#85560b);
  width: 40px;
  margin: 0 auto;
  padding: 8px 0 12px 0;
  -webkit-border-radius: 15px 15px 5px 5px;
  border-radius: 15px 15px 5px 5px;
  position: relative;
  cursor: pointer;
}

:host  .metronome-hole {
  background: white;
  height: 50px;
  width: 10px;
  margin: 0 auto;
  border-radius: 3px 3px 10px  10px;
  border-top: solid 2px #85560b;
  border-left: solid 1px #85560b;
  border-right: solid 1px #85560b;
}

:host  .metronome-shadow {
  background: #DDD;
  width: 50px;
  height: 20px;
  margin: 0 auto;
  -webkit-border-radius: 12px;
  -webkit-transform: scaleY(.5);
  border-radius: 12px;
  transform: scaleY(.5);
  border-radius: 12px;
  position: absolute;
  left: calc(50% - 25px);
  top: 62px;
}

:host .metronome-arrow {
  background: black;
  height: 45px;
  width: 6px;
  border: solid 2px white;
  -webkit-transform-origin: center 45px;
  -webkit-border-radius: 0 0 5px 5px;
  transform-origin: center 45px;
  border-radius: 0 0 5px 5px;
  position: absolute;
  top: 10px;
  left: 15px;
}

:host .metronome-animation {
  -webkit-animation-name: metronome;
  -webkit-animation-timing-function: linear;
  -webkit-animation-iteration-count: infinite;
  animation-name: metronome;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
}

@-webkit-keyframes metronome {
  0% {-webkit-transform: rotate(0deg); }
  25% {-webkit-transform: rotate(-30deg); }
  50% {-webkit-transform: rotate(0deg); }
  75% {-webkit-transform: rotate(30deg); }
  100% {-webkit-transform: rotate(0deg); }
}

@keyframes metronome {
  0% {transform: rotate(0deg); }
  25% {transform: rotate(-30deg); }
  50% {transform: rotate(0deg); }
  75% {transform: rotate(30deg); }
  100% {transform: rotate(0deg); }
}
</style>
    <div class="metronome-wrapper">
      <div class="metronome-shadow"></div>
      <div class="metronome-body" on-click="{{click}}">
        <div class="metronome-hole"></div>
        <div class="metronome-arrow"></div>
      </div>
      <div class="speed-control up" on-click="{{faster}}">
        <span class="icon">+</span>
      </div>
      <div class="speed-control down" on-click="{{slower}}">
        <span class="icon">-</span>
      </div>
    </div>
    <shadow></shadow>
    <script type="text/json" id="ceci-definition"></script>
  </template>
  <ceci-definition>
    {
      &quot;description&quot;: &quot;Counts and sends out a beat at regular intervals.&quot;,
      &quot;tags&quot;: [&quot;fun&quot;,&quot;animated&quot;,&quot;starter&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;name&quot;: &quot;Metronome&quot;,
      &quot;broadcasts&quot;: {
        &quot;tick&quot;: {
          &quot;label&quot;: &quot;Tick&quot;,
          &quot;description&quot;: &quot;A tick of the metronome measured in Beats Per Minute(BPM)&quot;,
          &quot;default&quot;: true
        }
      },
      &quot;listeners&quot;: {
        &quot;stop&quot;: {
          &quot;description&quot;: &quot;Stops metronome ticking.&quot;,
          &quot;label&quot;: &quot;Stop ticking&quot;
        },
        &quot;start&quot;: {
          &quot;description&quot;: &quot;Starts metronome ticking.&quot;,
          &quot;label&quot;: &quot;Start ticking&quot;
        }
      },
      &quot;attributes&quot;: {
        &quot;beatsperminute&quot;: {
          &quot;label&quot;: &quot;Beats Per Minute (BPM)&quot;,
          &quot;description&quot;: &quot;Metronome ticks measured in beats per minute&quot;,
          &quot;editable&quot;: &quot;number&quot;,
          &quot;min&quot; : 0.1,
          &quot;listener&quot;: true
        },
        &quot;changeby&quot; : {
          &quot;label&quot;: &quot;Button Increment&quot;,
          &quot;description&quot;: &quot;How much the + and - buttons change the speed by.&quot;,
          &quot;editable&quot;: &quot;number&quot;,
          &quot;min&quot; : 1,
          &quot;listener&quot;: true
        },
        &quot;autostart&quot;: {
          &quot;label&quot;: &quot;Autostart&quot;,
          &quot;description&quot;: &quot;Boolean value that controls if the metronome starts auto-playing when the component loads&quot;,
          &quot;editable&quot;: &quot;boolean&quot;,
          &quot;listener&quot;: true
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-metronome', {
      ready: function () {
        this.super();
        this._count = 0;
        this._playing = false;
        this.timeout = null;
      },
      detached: function () {
        clearTimeout(this.timeout);
        this.timeout = null;
        this.super();
      },
      attached: function () {
        if (this._playing) {
          this._setTimeout();
        }
        this.super();
      },
      setArrowSpeed: function (v) {
        var animDuration = v * 2;
        var metronomeArrow = this.shadowRoot.querySelector('.metronome-arrow');
        metronomeArrow.classList.remove("metronome-animation");
        if (v > 0 && this._playing) {
          //force a reflow
          metronomeArrow.offsetWidth = metronomeArrow.offsetWidth;

          metronomeArrow.classList.add("metronome-animation");
          metronomeArrow.style.webkitAnimationDuration = animDuration + "s";
          metronomeArrow.style.animationDuration = animDuration + "s";
        }
      },
      autostartChanged : function(){
        if(this.autostart == "true") {
          if (!this._playing) {
            this.start();
          }
        } else {
          this.stop();
        }
      },
      click: function() {
        if(this._playing){
          this.stop();
        } else {
          this.start();
        }
      },
      faster : function(){
        this.beatsperminute = parseInt(this.beatsperminute,10) + parseInt(this.changeby,10);
      },
      slower : function(){
        this.beatsperminute = parseInt(this.beatsperminute,10) - parseInt(this.changeby,10);
      },
      beatsperminuteChanged: function (oldValue, newValue) {
        if (newValue <= 0) {
          this.beatsperminute = 0.1;
        }
        this._clearTimeout();
        this.setArrowSpeed((60 / this.beatsperminute));
        if (this._playing) {
          this._setTimeout();
        }
      },
      start: function (oldValue, newValue) {
        this._playing = true;
        this.setArrowSpeed((60 / this.beatsperminute));
        this.tick();
      },
      stop: function () {
        this._playing = false;
        this.setArrowSpeed(0);
        this._clearTimeout(this.timeout);
      },
      _setTimeout: function () {
        this.timeout = setTimeout(function () {
          this.timeout = null;
          this._count++;
          this.broadcast('tick', this._count);
          this.tick();
        }.bind(this), (60 / this.beatsperminute) * 1000);
      },
      _clearTimeout: function () {
        clearTimeout(this.timeout);
        this.timeout = null;
      },
      tick: function () {
        if (!this._playing || this.timeout) {
          return;
        }
        this._setTimeout();
      }
    });
  </script>
</polymer-element>
<script src="/bundles/resources/popcorn.min.js"></script>
<polymer-element name="ceci-media" attributes="url autoplay starttime volume" extends="ceci-element" assetpath="/bundles/components/component-media/">
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;media&quot;, &quot;audio&quot;, &quot;video&quot;, &quot;youtube&quot;, &quot;popcorn&quot;, &quot;soundcloud&quot;],
      &quot;name&quot;: &quot;Media Player&quot;,
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Plays HTML5 media using the PopcornJS library.&quot;,
      &quot;broadcasts&quot;: {
        &quot;tick&quot;: {
          &quot;label&quot;: &quot;Tick&quot;,
          &quot;description&quot;: &quot;Media time progressed.&quot;
        },
        &quot;ready&quot;: {
          &quot;label&quot;: &quot;Ready&quot;,
          &quot;description&quot;: &quot;Media is ready to play.&quot;
        },
        &quot;ended&quot;: {
          &quot;label&quot;: &quot;Ended&quot;,
          &quot;description&quot;: &quot;Media reached its end.&quot;
        },
        &quot;playing&quot;: {
          &quot;label&quot;: &quot;Playing&quot;,
          &quot;description&quot;: &quot;Media started to play.&quot;
        }
      },
      &quot;listeners&quot;: {
        &quot;play&quot;: {
          &quot;label&quot;: &quot;Start&quot;,
          &quot;description&quot;: &quot;Starts the selected media&quot;
        },
        &quot;pause&quot;: {
          &quot;label&quot;: &quot;Stop&quot;,
          &quot;description&quot;: &quot;Stops the selected media&quot;
        },
        &quot;rewind&quot;: {
          &quot;label&quot;: &quot;Rewind&quot;,
          &quot;description&quot;: &quot;Starts media from the beginning.&quot;
        }
      },
      &quot;attributes&quot;: {
        &quot;starttime&quot;: {
          &quot;label&quot;: &quot;Start Time&quot;,
          &quot;description&quot;: &quot;The desired starting point in the selected media.&quot;,
          &quot;editable&quot;: &quot;number&quot;,
          &quot;listener&quot;: true
        },
        &quot;url&quot;: {
          &quot;label&quot;: &quot;Media URL&quot;,
          &quot;description&quot;: &quot;Web URL for the desired media.&quot;,
          &quot;editable&quot;: &quot;text&quot;,
          &quot;listener&quot;: true
        },
        &quot;volume&quot;: {
          &quot;label&quot;: &quot;Volume&quot;,
          &quot;description&quot;: &quot;Volume of the playing media.&quot;,
          &quot;editable&quot;: &quot;number&quot;,
          &quot;max&quot;: 1,
          &quot;min&quot;: 0,
          &quot;listener&quot;: true
        },
        &quot;autoplay&quot;: {
          &quot;label&quot;: &quot;Play Automatically&quot;,
          &quot;description&quot;: &quot;Play the media as soon as its ready&quot;,
          &quot;editable&quot;: &quot;boolean&quot;
        }
      }
    }
  </ceci-definition>
  <template>
    <style>
      :host {
        display: block;
        min-height: 50px;
      }
      :host #mediaContainer {
        line-height: 0px;
      }
    </style>
    <div id="mediaContainer"></div>
    <shadow></shadow>
    <content></content>
  </template>
  <script>
    var popcornEvents = ['canplay', 'currentTime', 'ended', 'playing'];

    Polymer('ceci-media', {
      // some Beethoven
      url: 'https://www.youtube.com/watch?v=zucBfXpCA6s',
      starttime: 0,
      volume: 1,
      autoplay: 'false',
      ready: function () {
        this.super();

        // Make sure `this` scope never changes for these handlers...
        this.onPopcornCanplay = function () { this.broadcast('ready'); }.bind(this);
        this.onPopcornCurrentTime = function (e) { this.broadcast('tick', e.currentTime); }.bind(this);
        this.onPopcornEnded = function (e) { this.broadcast('ended'); }.bind(this);
        this.onPopcornPlaying = function (e) { this.broadcast('playing'); }.bind(this);

        if (this.url) {
          this.initPopcorn();
        }

      },
      urlChanged: function () {
        this.initPopcorn();
      },
      volumeChanged: function () {
        if (this._popcornPlayer) {
          this._popcornPlayer.volume = this.volume;
        }
      },
      play: function () {
        if (this._popcornPlayer) {
          this._popcornPlayer.play();
        }
      },
      pause: function () {
        if (this._popcornPlayer) {
          this._popcornPlayer.pause();
        }
      },
      rewind: function () {
        if (this._popcornPlayer) {
          this._popcornPlayer.currentTime(0);
        }
      },
      initPopcorn: function () {
        this.destroyPopcorn();
        this._popcornPlayer = Popcorn.smart(this.$.mediaContainer, this.url);
        popcornEvents.forEach(function (popcornEvent) {
          this._popcornPlayer.on(popcornEvent, this['onPopcorn' + popcornEvent.substr(0, 1).toUpperCase() + popcornEvent.substr(1)]);
        }.bind(this));
        this._popcornPlayer.volume = this.volume;
        if (this.autoplay === 'true') {
          this._popcornPlayer.play();
        }
      },
      destroyPopcorn: function () {
        if (this._popcornPlayer) {
          popcornEvents.forEach(function (popcornEvent) {
            this._popcornPlayer.off(popcornEvent, this['onPopcorn' + popcornEvent.substr(0, 1).toUpperCase() + popcornEvent.substr(1)]);
          }.bind(this));
          Popcorn.destroy(this._popcornPlayer);
          this.$.mediaContainer.innerHTML = '';
        }
      }
    });
  </script>
</polymer-element>
<polymer-element name="ceci-meatspaces-messages" attributes="server mode height" extends="ceci-element" assetpath="/bundles/components/component-meatspaces-messages/">
  <script>/*! Socket.IO.js build:0.9.16, development. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed */

var io = ('undefined' === typeof module ? {} : module.exports);
(function() {

/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, global) {

  /**
   * IO namespace.
   *
   * @namespace
   */

  var io = exports;

  /**
   * Socket.IO version
   *
   * @api public
   */

  io.version = '0.9.16';

  /**
   * Protocol implemented.
   *
   * @api public
   */

  io.protocol = 1;

  /**
   * Available transports, these will be populated with the available transports
   *
   * @api public
   */

  io.transports = [];

  /**
   * Keep track of jsonp callbacks.
   *
   * @api private
   */

  io.j = [];

  /**
   * Keep track of our io.Sockets
   *
   * @api private
   */
  io.sockets = {};


  /**
   * Manages connections to hosts.
   *
   * @param {String} uri
   * @Param {Boolean} force creation of new socket (defaults to false)
   * @api public
   */

  io.connect = function (host, details) {
    var uri = io.util.parseUri(host)
      , uuri
      , socket;

    if (global && global.location) {
      uri.protocol = uri.protocol || global.location.protocol.slice(0, -1);
      uri.host = uri.host || (global.document
        ? global.document.domain : global.location.hostname);
      uri.port = uri.port || global.location.port;
    }

    uuri = io.util.uniqueUri(uri);

    var options = {
        host: uri.host
      , secure: 'https' == uri.protocol
      , port: uri.port || ('https' == uri.protocol ? 443 : 80)
      , query: uri.query || ''
    };

    io.util.merge(options, details);

    if (options['force new connection'] || !io.sockets[uuri]) {
      socket = new io.Socket(options);
    }

    if (!options['force new connection'] && socket) {
      io.sockets[uuri] = socket;
    }

    socket = socket || io.sockets[uuri];

    // if path is different from '' or /
    return socket.of(uri.path.length > 1 ? uri.path : '');
  };

})('object' === typeof module ? module.exports : (this.io = {}), this);
/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, global) {

  /**
   * Utilities namespace.
   *
   * @namespace
   */

  var util = exports.util = {};

  /**
   * Parses an URI
   *
   * @author Steven Levithan <stevenlevithan.com> (MIT license)
   * @api public
   */

  var re = /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;

  var parts = ['source', 'protocol', 'authority', 'userInfo', 'user', 'password',
               'host', 'port', 'relative', 'path', 'directory', 'file', 'query',
               'anchor'];

  util.parseUri = function (str) {
    var m = re.exec(str || '')
      , uri = {}
      , i = 14;

    while (i--) {
      uri[parts[i]] = m[i] || '';
    }

    return uri;
  };

  /**
   * Produces a unique url that identifies a Socket.IO connection.
   *
   * @param {Object} uri
   * @api public
   */

  util.uniqueUri = function (uri) {
    var protocol = uri.protocol
      , host = uri.host
      , port = uri.port;

    if ('document' in global) {
      host = host || document.domain;
      port = port || (protocol == 'https'
        && document.location.protocol !== 'https:' ? 443 : document.location.port);
    } else {
      host = host || 'localhost';

      if (!port && protocol == 'https') {
        port = 443;
      }
    }

    return (protocol || 'http') + '://' + host + ':' + (port || 80);
  };

  /**
   * Mergest 2 query strings in to once unique query string
   *
   * @param {String} base
   * @param {String} addition
   * @api public
   */

  util.query = function (base, addition) {
    var query = util.chunkQuery(base || '')
      , components = [];

    util.merge(query, util.chunkQuery(addition || ''));
    for (var part in query) {
      if (query.hasOwnProperty(part)) {
        components.push(part + '=' + query[part]);
      }
    }

    return components.length ? '?' + components.join('&') : '';
  };

  /**
   * Transforms a querystring in to an object
   *
   * @param {String} qs
   * @api public
   */

  util.chunkQuery = function (qs) {
    var query = {}
      , params = qs.split('&')
      , i = 0
      , l = params.length
      , kv;

    for (; i < l; ++i) {
      kv = params[i].split('=');
      if (kv[0]) {
        query[kv[0]] = kv[1];
      }
    }

    return query;
  };

  /**
   * Executes the given function when the page is loaded.
   *
   *     io.util.load(function () { console.log('page loaded'); });
   *
   * @param {Function} fn
   * @api public
   */

  var pageLoaded = false;

  util.load = function (fn) {
    if ('document' in global && document.readyState === 'complete' || pageLoaded) {
      return fn();
    }

    util.on(global, 'load', fn, false);
  };

  /**
   * Adds an event.
   *
   * @api private
   */

  util.on = function (element, event, fn, capture) {
    if (element.attachEvent) {
      element.attachEvent('on' + event, fn);
    } else if (element.addEventListener) {
      element.addEventListener(event, fn, capture);
    }
  };

  /**
   * Generates the correct `XMLHttpRequest` for regular and cross domain requests.
   *
   * @param {Boolean} [xdomain] Create a request that can be used cross domain.
   * @returns {XMLHttpRequest|false} If we can create a XMLHttpRequest.
   * @api private
   */

  util.request = function (xdomain) {

    if (xdomain && 'undefined' != typeof XDomainRequest && !util.ua.hasCORS) {
      return new XDomainRequest();
    }

    if ('undefined' != typeof XMLHttpRequest && (!xdomain || util.ua.hasCORS)) {
      return new XMLHttpRequest();
    }

    if (!xdomain) {
      try {
        return new window[(['Active'].concat('Object').join('X'))]('Microsoft.XMLHTTP');
      } catch(e) { }
    }

    return null;
  };

  /**
   * XHR based transport constructor.
   *
   * @constructor
   * @api public
   */

  /**
   * Change the internal pageLoaded value.
   */

  if ('undefined' != typeof window) {
    util.load(function () {
      pageLoaded = true;
    });
  }

  /**
   * Defers a function to ensure a spinner is not displayed by the browser
   *
   * @param {Function} fn
   * @api public
   */

  util.defer = function (fn) {
    if (!util.ua.webkit || 'undefined' != typeof importScripts) {
      return fn();
    }

    util.load(function () {
      setTimeout(fn, 100);
    });
  };

  /**
   * Merges two objects.
   *
   * @api public
   */

  util.merge = function merge (target, additional, deep, lastseen) {
    var seen = lastseen || []
      , depth = typeof deep == 'undefined' ? 2 : deep
      , prop;

    for (prop in additional) {
      if (additional.hasOwnProperty(prop) && util.indexOf(seen, prop) < 0) {
        if (typeof target[prop] !== 'object' || !depth) {
          target[prop] = additional[prop];
          seen.push(additional[prop]);
        } else {
          util.merge(target[prop], additional[prop], depth - 1, seen);
        }
      }
    }

    return target;
  };

  /**
   * Merges prototypes from objects
   *
   * @api public
   */

  util.mixin = function (ctor, ctor2) {
    util.merge(ctor.prototype, ctor2.prototype);
  };

  /**
   * Shortcut for prototypical and static inheritance.
   *
   * @api private
   */

  util.inherit = function (ctor, ctor2) {
    function f() {};
    f.prototype = ctor2.prototype;
    ctor.prototype = new f;
  };

  /**
   * Checks if the given object is an Array.
   *
   *     io.util.isArray([]); // true
   *     io.util.isArray({}); // false
   *
   * @param Object obj
   * @api public
   */

  util.isArray = Array.isArray || function (obj) {
    return Object.prototype.toString.call(obj) === '[object Array]';
  };

  /**
   * Intersects values of two arrays into a third
   *
   * @api public
   */

  util.intersect = function (arr, arr2) {
    var ret = []
      , longest = arr.length > arr2.length ? arr : arr2
      , shortest = arr.length > arr2.length ? arr2 : arr;

    for (var i = 0, l = shortest.length; i < l; i++) {
      if (~util.indexOf(longest, shortest[i]))
        ret.push(shortest[i]);
    }

    return ret;
  };

  /**
   * Array indexOf compatibility.
   *
   * @see bit.ly/a5Dxa2
   * @api public
   */

  util.indexOf = function (arr, o, i) {

    for (var j = arr.length, i = i < 0 ? i + j < 0 ? 0 : i + j : i || 0;
         i < j && arr[i] !== o; i++) {}

    return j <= i ? -1 : i;
  };

  /**
   * Converts enumerables to array.
   *
   * @api public
   */

  util.toArray = function (enu) {
    var arr = [];

    for (var i = 0, l = enu.length; i < l; i++)
      arr.push(enu[i]);

    return arr;
  };

  /**
   * UA / engines detection namespace.
   *
   * @namespace
   */

  util.ua = {};

  /**
   * Whether the UA supports CORS for XHR.
   *
   * @api public
   */

  util.ua.hasCORS = 'undefined' != typeof XMLHttpRequest && (function () {
    try {
      var a = new XMLHttpRequest();
    } catch (e) {
      return false;
    }

    return a.withCredentials != undefined;
  })();

  /**
   * Detect webkit.
   *
   * @api public
   */

  util.ua.webkit = 'undefined' != typeof navigator
    && /webkit/i.test(navigator.userAgent);

   /**
   * Detect iPad/iPhone/iPod.
   *
   * @api public
   */

  util.ua.iDevice = 'undefined' != typeof navigator
      && /iPad|iPhone|iPod/i.test(navigator.userAgent);

})('undefined' != typeof io ? io : module.exports, this);
/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, io) {

  /**
   * Expose constructor.
   */

  exports.EventEmitter = EventEmitter;

  /**
   * Event emitter constructor.
   *
   * @api public.
   */

  function EventEmitter () {};

  /**
   * Adds a listener
   *
   * @api public
   */

  EventEmitter.prototype.on = function (name, fn) {
    if (!this.$events) {
      this.$events = {};
    }

    if (!this.$events[name]) {
      this.$events[name] = fn;
    } else if (io.util.isArray(this.$events[name])) {
      this.$events[name].push(fn);
    } else {
      this.$events[name] = [this.$events[name], fn];
    }

    return this;
  };

  EventEmitter.prototype.addListener = EventEmitter.prototype.on;

  /**
   * Adds a volatile listener.
   *
   * @api public
   */

  EventEmitter.prototype.once = function (name, fn) {
    var self = this;

    function on () {
      self.removeListener(name, on);
      fn.apply(this, arguments);
    };

    on.listener = fn;
    this.on(name, on);

    return this;
  };

  /**
   * Removes a listener.
   *
   * @api public
   */

  EventEmitter.prototype.removeListener = function (name, fn) {
    if (this.$events && this.$events[name]) {
      var list = this.$events[name];

      if (io.util.isArray(list)) {
        var pos = -1;

        for (var i = 0, l = list.length; i < l; i++) {
          if (list[i] === fn || (list[i].listener && list[i].listener === fn)) {
            pos = i;
            break;
          }
        }

        if (pos < 0) {
          return this;
        }

        list.splice(pos, 1);

        if (!list.length) {
          delete this.$events[name];
        }
      } else if (list === fn || (list.listener && list.listener === fn)) {
        delete this.$events[name];
      }
    }

    return this;
  };

  /**
   * Removes all listeners for an event.
   *
   * @api public
   */

  EventEmitter.prototype.removeAllListeners = function (name) {
    if (name === undefined) {
      this.$events = {};
      return this;
    }

    if (this.$events && this.$events[name]) {
      this.$events[name] = null;
    }

    return this;
  };

  /**
   * Gets all listeners for a certain event.
   *
   * @api publci
   */

  EventEmitter.prototype.listeners = function (name) {
    if (!this.$events) {
      this.$events = {};
    }

    if (!this.$events[name]) {
      this.$events[name] = [];
    }

    if (!io.util.isArray(this.$events[name])) {
      this.$events[name] = [this.$events[name]];
    }

    return this.$events[name];
  };

  /**
   * Emits an event.
   *
   * @api public
   */

  EventEmitter.prototype.emit = function (name) {
    if (!this.$events) {
      return false;
    }

    var handler = this.$events[name];

    if (!handler) {
      return false;
    }

    var args = Array.prototype.slice.call(arguments, 1);

    if ('function' == typeof handler) {
      handler.apply(this, args);
    } else if (io.util.isArray(handler)) {
      var listeners = handler.slice();

      for (var i = 0, l = listeners.length; i < l; i++) {
        listeners[i].apply(this, args);
      }
    } else {
      return false;
    }

    return true;
  };

})(
    'undefined' != typeof io ? io : module.exports
  , 'undefined' != typeof io ? io : module.parent.exports
);

/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

/**
 * Based on JSON2 (http://www.JSON.org/js.html).
 */

(function (exports, nativeJSON) {
  "use strict";

  // use native JSON if it's available
  if (nativeJSON && nativeJSON.parse){
    return exports.JSON = {
      parse: nativeJSON.parse
    , stringify: nativeJSON.stringify
    };
  }

  var JSON = exports.JSON = {};

  function f(n) {
      // Format integers to have at least two digits.
      return n < 10 ? '0' + n : n;
  }

  function date(d, key) {
    return isFinite(d.valueOf()) ?
        d.getUTCFullYear()     + '-' +
        f(d.getUTCMonth() + 1) + '-' +
        f(d.getUTCDate())      + 'T' +
        f(d.getUTCHours())     + ':' +
        f(d.getUTCMinutes())   + ':' +
        f(d.getUTCSeconds())   + 'Z' : null;
  };

  var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
      escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
      gap,
      indent,
      meta = {    // table of character substitutions
          '\b': '\\b',
          '\t': '\\t',
          '\n': '\\n',
          '\f': '\\f',
          '\r': '\\r',
          '"' : '\\"',
          '\\': '\\\\'
      },
      rep;


  function quote(string) {

// If the string contains no control characters, no quote characters, and no
// backslash characters, then we can safely slap some quotes around it.
// Otherwise we must also replace the offending characters with safe escape
// sequences.

      escapable.lastIndex = 0;
      return escapable.test(string) ? '"' + string.replace(escapable, function (a) {
          var c = meta[a];
          return typeof c === 'string' ? c :
              '\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
      }) + '"' : '"' + string + '"';
  }


  function str(key, holder) {

// Produce a string from holder[key].

      var i,          // The loop counter.
          k,          // The member key.
          v,          // The member value.
          length,
          mind = gap,
          partial,
          value = holder[key];

// If the value has a toJSON method, call it to obtain a replacement value.

      if (value instanceof Date) {
          value = date(key);
      }

// If we were called with a replacer function, then call the replacer to
// obtain a replacement value.

      if (typeof rep === 'function') {
          value = rep.call(holder, key, value);
      }

// What happens next depends on the value's type.

      switch (typeof value) {
      case 'string':
          return quote(value);

      case 'number':

// JSON numbers must be finite. Encode non-finite numbers as null.

          return isFinite(value) ? String(value) : 'null';

      case 'boolean':
      case 'null':

// If the value is a boolean or null, convert it to a string. Note:
// typeof null does not produce 'null'. The case is included here in
// the remote chance that this gets fixed someday.

          return String(value);

// If the type is 'object', we might be dealing with an object or an array or
// null.

      case 'object':

// Due to a specification blunder in ECMAScript, typeof null is 'object',
// so watch out for that case.

          if (!value) {
              return 'null';
          }

// Make an array to hold the partial results of stringifying this object value.

          gap += indent;
          partial = [];

// Is the value an array?

          if (Object.prototype.toString.apply(value) === '[object Array]') {

// The value is an array. Stringify every element. Use null as a placeholder
// for non-JSON values.

              length = value.length;
              for (i = 0; i < length; i += 1) {
                  partial[i] = str(i, value) || 'null';
              }

// Join all of the elements together, separated with commas, and wrap them in
// brackets.

              v = partial.length === 0 ? '[]' : gap ?
                  '[\n' + gap + partial.join(',\n' + gap) + '\n' + mind + ']' :
                  '[' + partial.join(',') + ']';
              gap = mind;
              return v;
          }

// If the replacer is an array, use it to select the members to be stringified.

          if (rep && typeof rep === 'object') {
              length = rep.length;
              for (i = 0; i < length; i += 1) {
                  if (typeof rep[i] === 'string') {
                      k = rep[i];
                      v = str(k, value);
                      if (v) {
                          partial.push(quote(k) + (gap ? ': ' : ':') + v);
                      }
                  }
              }
          } else {

// Otherwise, iterate through all of the keys in the object.

              for (k in value) {
                  if (Object.prototype.hasOwnProperty.call(value, k)) {
                      v = str(k, value);
                      if (v) {
                          partial.push(quote(k) + (gap ? ': ' : ':') + v);
                      }
                  }
              }
          }

// Join all of the member texts together, separated with commas,
// and wrap them in braces.

          v = partial.length === 0 ? '{}' : gap ?
              '{\n' + gap + partial.join(',\n' + gap) + '\n' + mind + '}' :
              '{' + partial.join(',') + '}';
          gap = mind;
          return v;
      }
  }

// If the JSON object does not yet have a stringify method, give it one.

  JSON.stringify = function (value, replacer, space) {

// The stringify method takes a value and an optional replacer, and an optional
// space parameter, and returns a JSON text. The replacer can be a function
// that can replace values, or an array of strings that will select the keys.
// A default replacer method can be provided. Use of the space parameter can
// produce text that is more easily readable.

      var i;
      gap = '';
      indent = '';

// If the space parameter is a number, make an indent string containing that
// many spaces.

      if (typeof space === 'number') {
          for (i = 0; i < space; i += 1) {
              indent += ' ';
          }

// If the space parameter is a string, it will be used as the indent string.

      } else if (typeof space === 'string') {
          indent = space;
      }

// If there is a replacer, it must be a function or an array.
// Otherwise, throw an error.

      rep = replacer;
      if (replacer && typeof replacer !== 'function' &&
              (typeof replacer !== 'object' ||
              typeof replacer.length !== 'number')) {
          throw new Error('JSON.stringify');
      }

// Make a fake root object containing our value under the key of ''.
// Return the result of stringifying the value.

      return str('', {'': value});
  };

// If the JSON object does not yet have a parse method, give it one.

  JSON.parse = function (text, reviver) {
  // The parse method takes a text and an optional reviver function, and returns
  // a JavaScript value if the text is a valid JSON text.

      var j;

      function walk(holder, key) {

  // The walk method is used to recursively walk the resulting structure so
  // that modifications can be made.

          var k, v, value = holder[key];
          if (value && typeof value === 'object') {
              for (k in value) {
                  if (Object.prototype.hasOwnProperty.call(value, k)) {
                      v = walk(value, k);
                      if (v !== undefined) {
                          value[k] = v;
                      } else {
                          delete value[k];
                      }
                  }
              }
          }
          return reviver.call(holder, key, value);
      }


  // Parsing happens in four stages. In the first stage, we replace certain
  // Unicode characters with escape sequences. JavaScript handles many characters
  // incorrectly, either silently deleting them, or treating them as line endings.

      text = String(text);
      cx.lastIndex = 0;
      if (cx.test(text)) {
          text = text.replace(cx, function (a) {
              return '\\u' +
                  ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
          });
      }

  // In the second stage, we run the text against regular expressions that look
  // for non-JSON patterns. We are especially concerned with '()' and 'new'
  // because they can cause invocation, and '=' because it can cause mutation.
  // But just to be safe, we want to reject all unexpected forms.

  // We split the second stage into 4 regexp operations in order to work around
  // crippling inefficiencies in IE's and Safari's regexp engines. First we
  // replace the JSON backslash pairs with '@' (a non-JSON character). Second, we
  // replace all simple value tokens with ']' characters. Third, we delete all
  // open brackets that follow a colon or comma or that begin the text. Finally,
  // we look to see that the remaining characters are only whitespace or ']' or
  // ',' or ':' or '{' or '}'. If that is so, then the text is safe for eval.

      if (/^[\],:{}\s]*$/
              .test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')
                  .replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']')
                  .replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) {

  // In the third stage we use the eval function to compile the text into a
  // JavaScript structure. The '{' operator is subject to a syntactic ambiguity
  // in JavaScript: it can begin a block or an object literal. We wrap the text
  // in parens to eliminate the ambiguity.

          j = eval('(' + text + ')');

  // In the optional fourth stage, we recursively walk the new structure, passing
  // each name/value pair to a reviver function for possible transformation.

          return typeof reviver === 'function' ?
              walk({'': j}, '') : j;
      }

  // If the text is not JSON parseable, then a SyntaxError is thrown.

      throw new SyntaxError('JSON.parse');
  };

})(
    'undefined' != typeof io ? io : module.exports
  , typeof JSON !== 'undefined' ? JSON : undefined
);

/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, io) {

  /**
   * Parser namespace.
   *
   * @namespace
   */

  var parser = exports.parser = {};

  /**
   * Packet types.
   */

  var packets = parser.packets = [
      'disconnect'
    , 'connect'
    , 'heartbeat'
    , 'message'
    , 'json'
    , 'event'
    , 'ack'
    , 'error'
    , 'noop'
  ];

  /**
   * Errors reasons.
   */

  var reasons = parser.reasons = [
      'transport not supported'
    , 'client not handshaken'
    , 'unauthorized'
  ];

  /**
   * Errors advice.
   */

  var advice = parser.advice = [
      'reconnect'
  ];

  /**
   * Shortcuts.
   */

  var JSON = io.JSON
    , indexOf = io.util.indexOf;

  /**
   * Encodes a packet.
   *
   * @api private
   */

  parser.encodePacket = function (packet) {
    var type = indexOf(packets, packet.type)
      , id = packet.id || ''
      , endpoint = packet.endpoint || ''
      , ack = packet.ack
      , data = null;

    switch (packet.type) {
      case 'error':
        var reason = packet.reason ? indexOf(reasons, packet.reason) : ''
          , adv = packet.advice ? indexOf(advice, packet.advice) : '';

        if (reason !== '' || adv !== '')
          data = reason + (adv !== '' ? ('+' + adv) : '');

        break;

      case 'message':
        if (packet.data !== '')
          data = packet.data;
        break;

      case 'event':
        var ev = { name: packet.name };

        if (packet.args && packet.args.length) {
          ev.args = packet.args;
        }

        data = JSON.stringify(ev);
        break;

      case 'json':
        data = JSON.stringify(packet.data);
        break;

      case 'connect':
        if (packet.qs)
          data = packet.qs;
        break;

      case 'ack':
        data = packet.ackId
          + (packet.args && packet.args.length
              ? '+' + JSON.stringify(packet.args) : '');
        break;
    }

    // construct packet with required fragments
    var encoded = [
        type
      , id + (ack == 'data' ? '+' : '')
      , endpoint
    ];

    // data fragment is optional
    if (data !== null && data !== undefined)
      encoded.push(data);

    return encoded.join(':');
  };

  /**
   * Encodes multiple messages (payload).
   *
   * @param {Array} messages
   * @api private
   */

  parser.encodePayload = function (packets) {
    var decoded = '';

    if (packets.length == 1)
      return packets[0];

    for (var i = 0, l = packets.length; i < l; i++) {
      var packet = packets[i];
      decoded += '\ufffd' + packet.length + '\ufffd' + packets[i];
    }

    return decoded;
  };

  /**
   * Decodes a packet
   *
   * @api private
   */

  var regexp = /([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;

  parser.decodePacket = function (data) {
    var pieces = data.match(regexp);

    if (!pieces) return {};

    var id = pieces[2] || ''
      , data = pieces[5] || ''
      , packet = {
            type: packets[pieces[1]]
          , endpoint: pieces[4] || ''
        };

    // whether we need to acknowledge the packet
    if (id) {
      packet.id = id;
      if (pieces[3])
        packet.ack = 'data';
      else
        packet.ack = true;
    }

    // handle different packet types
    switch (packet.type) {
      case 'error':
        var pieces = data.split('+');
        packet.reason = reasons[pieces[0]] || '';
        packet.advice = advice[pieces[1]] || '';
        break;

      case 'message':
        packet.data = data || '';
        break;

      case 'event':
        try {
          var opts = JSON.parse(data);
          packet.name = opts.name;
          packet.args = opts.args;
        } catch (e) { }

        packet.args = packet.args || [];
        break;

      case 'json':
        try {
          packet.data = JSON.parse(data);
        } catch (e) { }
        break;

      case 'connect':
        packet.qs = data || '';
        break;

      case 'ack':
        var pieces = data.match(/^([0-9]+)(\+)?(.*)/);
        if (pieces) {
          packet.ackId = pieces[1];
          packet.args = [];

          if (pieces[3]) {
            try {
              packet.args = pieces[3] ? JSON.parse(pieces[3]) : [];
            } catch (e) { }
          }
        }
        break;

      case 'disconnect':
      case 'heartbeat':
        break;
    };

    return packet;
  };

  /**
   * Decodes data payload. Detects multiple messages
   *
   * @return {Array} messages
   * @api public
   */

  parser.decodePayload = function (data) {
    // IE doesn't like data[i] for unicode chars, charAt works fine
    if (data.charAt(0) == '\ufffd') {
      var ret = [];

      for (var i = 1, length = ''; i < data.length; i++) {
        if (data.charAt(i) == '\ufffd') {
          ret.push(parser.decodePacket(data.substr(i + 1).substr(0, length)));
          i += Number(length) + 1;
          length = '';
        } else {
          length += data.charAt(i);
        }
      }

      return ret;
    } else {
      return [parser.decodePacket(data)];
    }
  };

})(
    'undefined' != typeof io ? io : module.exports
  , 'undefined' != typeof io ? io : module.parent.exports
);
/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, io) {

  /**
   * Expose constructor.
   */

  exports.Transport = Transport;

  /**
   * This is the transport template for all supported transport methods.
   *
   * @constructor
   * @api public
   */

  function Transport (socket, sessid) {
    this.socket = socket;
    this.sessid = sessid;
  };

  /**
   * Apply EventEmitter mixin.
   */

  io.util.mixin(Transport, io.EventEmitter);


  /**
   * Indicates whether heartbeats is enabled for this transport
   *
   * @api private
   */

  Transport.prototype.heartbeats = function () {
    return true;
  };

  /**
   * Handles the response from the server. When a new response is received
   * it will automatically update the timeout, decode the message and
   * forwards the response to the onMessage function for further processing.
   *
   * @param {String} data Response from the server.
   * @api private
   */

  Transport.prototype.onData = function (data) {
    this.clearCloseTimeout();

    // If the connection in currently open (or in a reopening state) reset the close
    // timeout since we have just received data. This check is necessary so
    // that we don't reset the timeout on an explicitly disconnected connection.
    if (this.socket.connected || this.socket.connecting || this.socket.reconnecting) {
      this.setCloseTimeout();
    }

    if (data !== '') {
      // todo: we should only do decodePayload for xhr transports
      var msgs = io.parser.decodePayload(data);

      if (msgs && msgs.length) {
        for (var i = 0, l = msgs.length; i < l; i++) {
          this.onPacket(msgs[i]);
        }
      }
    }

    return this;
  };

  /**
   * Handles packets.
   *
   * @api private
   */

  Transport.prototype.onPacket = function (packet) {
    this.socket.setHeartbeatTimeout();

    if (packet.type == 'heartbeat') {
      return this.onHeartbeat();
    }

    if (packet.type == 'connect' && packet.endpoint == '') {
      this.onConnect();
    }

    if (packet.type == 'error' && packet.advice == 'reconnect') {
      this.isOpen = false;
    }

    this.socket.onPacket(packet);

    return this;
  };

  /**
   * Sets close timeout
   *
   * @api private
   */

  Transport.prototype.setCloseTimeout = function () {
    if (!this.closeTimeout) {
      var self = this;

      this.closeTimeout = setTimeout(function () {
        self.onDisconnect();
      }, this.socket.closeTimeout);
    }
  };

  /**
   * Called when transport disconnects.
   *
   * @api private
   */

  Transport.prototype.onDisconnect = function () {
    if (this.isOpen) this.close();
    this.clearTimeouts();
    this.socket.onDisconnect();
    return this;
  };

  /**
   * Called when transport connects
   *
   * @api private
   */

  Transport.prototype.onConnect = function () {
    this.socket.onConnect();
    return this;
  };

  /**
   * Clears close timeout
   *
   * @api private
   */

  Transport.prototype.clearCloseTimeout = function () {
    if (this.closeTimeout) {
      clearTimeout(this.closeTimeout);
      this.closeTimeout = null;
    }
  };

  /**
   * Clear timeouts
   *
   * @api private
   */

  Transport.prototype.clearTimeouts = function () {
    this.clearCloseTimeout();

    if (this.reopenTimeout) {
      clearTimeout(this.reopenTimeout);
    }
  };

  /**
   * Sends a packet
   *
   * @param {Object} packet object.
   * @api private
   */

  Transport.prototype.packet = function (packet) {
    this.send(io.parser.encodePacket(packet));
  };

  /**
   * Send the received heartbeat message back to server. So the server
   * knows we are still connected.
   *
   * @param {String} heartbeat Heartbeat response from the server.
   * @api private
   */

  Transport.prototype.onHeartbeat = function (heartbeat) {
    this.packet({ type: 'heartbeat' });
  };

  /**
   * Called when the transport opens.
   *
   * @api private
   */

  Transport.prototype.onOpen = function () {
    this.isOpen = true;
    this.clearCloseTimeout();
    this.socket.onOpen();
  };

  /**
   * Notifies the base when the connection with the Socket.IO server
   * has been disconnected.
   *
   * @api private
   */

  Transport.prototype.onClose = function () {
    var self = this;

    /* FIXME: reopen delay causing a infinit loop
    this.reopenTimeout = setTimeout(function () {
      self.open();
    }, this.socket.options['reopen delay']);*/

    this.isOpen = false;
    this.socket.onClose();
    this.onDisconnect();
  };

  /**
   * Generates a connection url based on the Socket.IO URL Protocol.
   * See <https://github.com/learnboost/socket.io-node/> for more details.
   *
   * @returns {String} Connection url
   * @api private
   */

  Transport.prototype.prepareUrl = function () {
    var options = this.socket.options;

    return this.scheme() + '://'
      + options.host + ':' + options.port + '/'
      + options.resource + '/' + io.protocol
      + '/' + this.name + '/' + this.sessid;
  };

  /**
   * Checks if the transport is ready to start a connection.
   *
   * @param {Socket} socket The socket instance that needs a transport
   * @param {Function} fn The callback
   * @api private
   */

  Transport.prototype.ready = function (socket, fn) {
    fn.call(this);
  };
})(
    'undefined' != typeof io ? io : module.exports
  , 'undefined' != typeof io ? io : module.parent.exports
);
/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, io, global) {

  /**
   * Expose constructor.
   */

  exports.Socket = Socket;

  /**
   * Create a new `Socket.IO client` which can establish a persistent
   * connection with a Socket.IO enabled server.
   *
   * @api public
   */

  function Socket (options) {
    this.options = {
        port: 80
      , secure: false
      , document: 'document' in global ? document : false
      , resource: 'socket.io'
      , transports: io.transports
      , 'connect timeout': 10000
      , 'try multiple transports': true
      , 'reconnect': true
      , 'reconnection delay': 500
      , 'reconnection limit': Infinity
      , 'reopen delay': 3000
      , 'max reconnection attempts': 10
      , 'sync disconnect on unload': false
      , 'auto connect': true
      , 'flash policy port': 10843
      , 'manualFlush': false
    };

    io.util.merge(this.options, options);

    this.connected = false;
    this.open = false;
    this.connecting = false;
    this.reconnecting = false;
    this.namespaces = {};
    this.buffer = [];
    this.doBuffer = false;

    if (this.options['sync disconnect on unload'] &&
        (!this.isXDomain() || io.util.ua.hasCORS)) {
      var self = this;
      io.util.on(global, 'beforeunload', function () {
        self.disconnectSync();
      }, false);
    }

    if (this.options['auto connect']) {
      this.connect();
    }
};

  /**
   * Apply EventEmitter mixin.
   */

  io.util.mixin(Socket, io.EventEmitter);

  /**
   * Returns a namespace listener/emitter for this socket
   *
   * @api public
   */

  Socket.prototype.of = function (name) {
    if (!this.namespaces[name]) {
      this.namespaces[name] = new io.SocketNamespace(this, name);

      if (name !== '') {
        this.namespaces[name].packet({ type: 'connect' });
      }
    }

    return this.namespaces[name];
  };

  /**
   * Emits the given event to the Socket and all namespaces
   *
   * @api private
   */

  Socket.prototype.publish = function () {
    this.emit.apply(this, arguments);

    var nsp;

    for (var i in this.namespaces) {
      if (this.namespaces.hasOwnProperty(i)) {
        nsp = this.of(i);
        nsp.$emit.apply(nsp, arguments);
      }
    }
  };

  /**
   * Performs the handshake
   *
   * @api private
   */

  function empty () { };

  Socket.prototype.handshake = function (fn) {
    var self = this
      , options = this.options;

    function complete (data) {
      if (data instanceof Error) {
        self.connecting = false;
        self.onError(data.message);
      } else {
        fn.apply(null, data.split(':'));
      }
    };

    var url = [
          'http' + (options.secure ? 's' : '') + ':/'
        , options.host + ':' + options.port
        , options.resource
        , io.protocol
        , io.util.query(this.options.query, 't=' + +new Date)
      ].join('/');

    if (this.isXDomain() && !io.util.ua.hasCORS) {
      var insertAt = document.getElementsByTagName('script')[0]
        , script = document.createElement('script');

      script.src = url + '&jsonp=' + io.j.length;
      insertAt.parentNode.insertBefore(script, insertAt);

      io.j.push(function (data) {
        complete(data);
        script.parentNode.removeChild(script);
      });
    } else {
      var xhr = io.util.request();

      xhr.open('GET', url, true);
      if (this.isXDomain()) {
        xhr.withCredentials = true;
      }
      xhr.onreadystatechange = function () {
        if (xhr.readyState == 4) {
          xhr.onreadystatechange = empty;

          if (xhr.status == 200) {
            complete(xhr.responseText);
          } else if (xhr.status == 403) {
            self.onError(xhr.responseText);
          } else {
            self.connecting = false;
            !self.reconnecting && self.onError(xhr.responseText);
          }
        }
      };
      xhr.send(null);
    }
  };

  /**
   * Find an available transport based on the options supplied in the constructor.
   *
   * @api private
   */

  Socket.prototype.getTransport = function (override) {
    var transports = override || this.transports, match;

    for (var i = 0, transport; transport = transports[i]; i++) {
      if (io.Transport[transport]
        && io.Transport[transport].check(this)
        && (!this.isXDomain() || io.Transport[transport].xdomainCheck(this))) {
        return new io.Transport[transport](this, this.sessionid);
      }
    }

    return null;
  };

  /**
   * Connects to the server.
   *
   * @param {Function} [fn] Callback.
   * @returns {io.Socket}
   * @api public
   */

  Socket.prototype.connect = function (fn) {
    if (this.connecting) {
      return this;
    }

    var self = this;
    self.connecting = true;

    this.handshake(function (sid, heartbeat, close, transports) {
      self.sessionid = sid;
      self.closeTimeout = close * 1000;
      self.heartbeatTimeout = heartbeat * 1000;
      if(!self.transports)
          self.transports = self.origTransports = (transports ? io.util.intersect(
              transports.split(',')
            , self.options.transports
          ) : self.options.transports);

      self.setHeartbeatTimeout();

      function connect (transports){
        if (self.transport) self.transport.clearTimeouts();

        self.transport = self.getTransport(transports);
        if (!self.transport) return self.publish('connect_failed');

        // once the transport is ready
        self.transport.ready(self, function () {
          self.connecting = true;
          self.publish('connecting', self.transport.name);
          self.transport.open();

          if (self.options['connect timeout']) {
            self.connectTimeoutTimer = setTimeout(function () {
              if (!self.connected) {
                self.connecting = false;

                if (self.options['try multiple transports']) {
                  var remaining = self.transports;

                  while (remaining.length > 0 && remaining.splice(0,1)[0] !=
                         self.transport.name) {}

                    if (remaining.length){
                      connect(remaining);
                    } else {
                      self.publish('connect_failed');
                    }
                }
              }
            }, self.options['connect timeout']);
          }
        });
      }

      connect(self.transports);

      self.once('connect', function (){
        clearTimeout(self.connectTimeoutTimer);

        fn && typeof fn == 'function' && fn();
      });
    });

    return this;
  };

  /**
   * Clears and sets a new heartbeat timeout using the value given by the
   * server during the handshake.
   *
   * @api private
   */

  Socket.prototype.setHeartbeatTimeout = function () {
    clearTimeout(this.heartbeatTimeoutTimer);
    if(this.transport && !this.transport.heartbeats()) return;

    var self = this;
    this.heartbeatTimeoutTimer = setTimeout(function () {
      self.transport.onClose();
    }, this.heartbeatTimeout);
  };

  /**
   * Sends a message.
   *
   * @param {Object} data packet.
   * @returns {io.Socket}
   * @api public
   */

  Socket.prototype.packet = function (data) {
    if (this.connected && !this.doBuffer) {
      this.transport.packet(data);
    } else {
      this.buffer.push(data);
    }

    return this;
  };

  /**
   * Sets buffer state
   *
   * @api private
   */

  Socket.prototype.setBuffer = function (v) {
    this.doBuffer = v;

    if (!v && this.connected && this.buffer.length) {
      if (!this.options['manualFlush']) {
        this.flushBuffer();
      }
    }
  };

  /**
   * Flushes the buffer data over the wire.
   * To be invoked manually when 'manualFlush' is set to true.
   *
   * @api public
   */

  Socket.prototype.flushBuffer = function() {
    this.transport.payload(this.buffer);
    this.buffer = [];
  };


  /**
   * Disconnect the established connect.
   *
   * @returns {io.Socket}
   * @api public
   */

  Socket.prototype.disconnect = function () {
    if (this.connected || this.connecting) {
      if (this.open) {
        this.of('').packet({ type: 'disconnect' });
      }

      // handle disconnection immediately
      this.onDisconnect('booted');
    }

    return this;
  };

  /**
   * Disconnects the socket with a sync XHR.
   *
   * @api private
   */

  Socket.prototype.disconnectSync = function () {
    // ensure disconnection
    var xhr = io.util.request();
    var uri = [
        'http' + (this.options.secure ? 's' : '') + ':/'
      , this.options.host + ':' + this.options.port
      , this.options.resource
      , io.protocol
      , ''
      , this.sessionid
    ].join('/') + '/?disconnect=1';

    xhr.open('GET', uri, false);
    xhr.send(null);

    // handle disconnection immediately
    this.onDisconnect('booted');
  };

  /**
   * Check if we need to use cross domain enabled transports. Cross domain would
   * be a different port or different domain name.
   *
   * @returns {Boolean}
   * @api private
   */

  Socket.prototype.isXDomain = function () {

    var port = global.location.port ||
      ('https:' == global.location.protocol ? 443 : 80);

    return this.options.host !== global.location.hostname
      || this.options.port != port;
  };

  /**
   * Called upon handshake.
   *
   * @api private
   */

  Socket.prototype.onConnect = function () {
    if (!this.connected) {
      this.connected = true;
      this.connecting = false;
      if (!this.doBuffer) {
        // make sure to flush the buffer
        this.setBuffer(false);
      }
      this.emit('connect');
    }
  };

  /**
   * Called when the transport opens
   *
   * @api private
   */

  Socket.prototype.onOpen = function () {
    this.open = true;
  };

  /**
   * Called when the transport closes.
   *
   * @api private
   */

  Socket.prototype.onClose = function () {
    this.open = false;
    clearTimeout(this.heartbeatTimeoutTimer);
  };

  /**
   * Called when the transport first opens a connection
   *
   * @param text
   */

  Socket.prototype.onPacket = function (packet) {
    this.of(packet.endpoint).onPacket(packet);
  };

  /**
   * Handles an error.
   *
   * @api private
   */

  Socket.prototype.onError = function (err) {
    if (err && err.advice) {
      if (err.advice === 'reconnect' && (this.connected || this.connecting)) {
        this.disconnect();
        if (this.options.reconnect) {
          this.reconnect();
        }
      }
    }

    this.publish('error', err && err.reason ? err.reason : err);
  };

  /**
   * Called when the transport disconnects.
   *
   * @api private
   */

  Socket.prototype.onDisconnect = function (reason) {
    var wasConnected = this.connected
      , wasConnecting = this.connecting;

    this.connected = false;
    this.connecting = false;
    this.open = false;

    if (wasConnected || wasConnecting) {
      this.transport.close();
      this.transport.clearTimeouts();
      if (wasConnected) {
        this.publish('disconnect', reason);

        if ('booted' != reason && this.options.reconnect && !this.reconnecting) {
          this.reconnect();
        }
      }
    }
  };

  /**
   * Called upon reconnection.
   *
   * @api private
   */

  Socket.prototype.reconnect = function () {
    this.reconnecting = true;
    this.reconnectionAttempts = 0;
    this.reconnectionDelay = this.options['reconnection delay'];

    var self = this
      , maxAttempts = this.options['max reconnection attempts']
      , tryMultiple = this.options['try multiple transports']
      , limit = this.options['reconnection limit'];

    function reset () {
      if (self.connected) {
        for (var i in self.namespaces) {
          if (self.namespaces.hasOwnProperty(i) && '' !== i) {
              self.namespaces[i].packet({ type: 'connect' });
          }
        }
        self.publish('reconnect', self.transport.name, self.reconnectionAttempts);
      }

      clearTimeout(self.reconnectionTimer);

      self.removeListener('connect_failed', maybeReconnect);
      self.removeListener('connect', maybeReconnect);

      self.reconnecting = false;

      delete self.reconnectionAttempts;
      delete self.reconnectionDelay;
      delete self.reconnectionTimer;
      delete self.redoTransports;

      self.options['try multiple transports'] = tryMultiple;
    };

    function maybeReconnect () {
      if (!self.reconnecting) {
        return;
      }

      if (self.connected) {
        return reset();
      };

      if (self.connecting && self.reconnecting) {
        return self.reconnectionTimer = setTimeout(maybeReconnect, 1000);
      }

      if (self.reconnectionAttempts++ >= maxAttempts) {
        if (!self.redoTransports) {
          self.on('connect_failed', maybeReconnect);
          self.options['try multiple transports'] = true;
          self.transports = self.origTransports;
          self.transport = self.getTransport();
          self.redoTransports = true;
          self.connect();
        } else {
          self.publish('reconnect_failed');
          reset();
        }
      } else {
        if (self.reconnectionDelay < limit) {
          self.reconnectionDelay *= 2; // exponential back off
        }

        self.connect();
        self.publish('reconnecting', self.reconnectionDelay, self.reconnectionAttempts);
        self.reconnectionTimer = setTimeout(maybeReconnect, self.reconnectionDelay);
      }
    };

    this.options['try multiple transports'] = false;
    this.reconnectionTimer = setTimeout(maybeReconnect, this.reconnectionDelay);

    this.on('connect', maybeReconnect);
  };

})(
    'undefined' != typeof io ? io : module.exports
  , 'undefined' != typeof io ? io : module.parent.exports
  , this
);
/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, io) {

  /**
   * Expose constructor.
   */

  exports.SocketNamespace = SocketNamespace;

  /**
   * Socket namespace constructor.
   *
   * @constructor
   * @api public
   */

  function SocketNamespace (socket, name) {
    this.socket = socket;
    this.name = name || '';
    this.flags = {};
    this.json = new Flag(this, 'json');
    this.ackPackets = 0;
    this.acks = {};
  };

  /**
   * Apply EventEmitter mixin.
   */

  io.util.mixin(SocketNamespace, io.EventEmitter);

  /**
   * Copies emit since we override it
   *
   * @api private
   */

  SocketNamespace.prototype.$emit = io.EventEmitter.prototype.emit;

  /**
   * Creates a new namespace, by proxying the request to the socket. This
   * allows us to use the synax as we do on the server.
   *
   * @api public
   */

  SocketNamespace.prototype.of = function () {
    return this.socket.of.apply(this.socket, arguments);
  };

  /**
   * Sends a packet.
   *
   * @api private
   */

  SocketNamespace.prototype.packet = function (packet) {
    packet.endpoint = this.name;
    this.socket.packet(packet);
    this.flags = {};
    return this;
  };

  /**
   * Sends a message
   *
   * @api public
   */

  SocketNamespace.prototype.send = function (data, fn) {
    var packet = {
        type: this.flags.json ? 'json' : 'message'
      , data: data
    };

    if ('function' == typeof fn) {
      packet.id = ++this.ackPackets;
      packet.ack = true;
      this.acks[packet.id] = fn;
    }

    return this.packet(packet);
  };

  /**
   * Emits an event
   *
   * @api public
   */

  SocketNamespace.prototype.emit = function (name) {
    var args = Array.prototype.slice.call(arguments, 1)
      , lastArg = args[args.length - 1]
      , packet = {
            type: 'event'
          , name: name
        };

    if ('function' == typeof lastArg) {
      packet.id = ++this.ackPackets;
      packet.ack = 'data';
      this.acks[packet.id] = lastArg;
      args = args.slice(0, args.length - 1);
    }

    packet.args = args;

    return this.packet(packet);
  };

  /**
   * Disconnects the namespace
   *
   * @api private
   */

  SocketNamespace.prototype.disconnect = function () {
    if (this.name === '') {
      this.socket.disconnect();
    } else {
      this.packet({ type: 'disconnect' });
      this.$emit('disconnect');
    }

    return this;
  };

  /**
   * Handles a packet
   *
   * @api private
   */

  SocketNamespace.prototype.onPacket = function (packet) {
    var self = this;

    function ack () {
      self.packet({
          type: 'ack'
        , args: io.util.toArray(arguments)
        , ackId: packet.id
      });
    };

    switch (packet.type) {
      case 'connect':
        this.$emit('connect');
        break;

      case 'disconnect':
        if (this.name === '') {
          this.socket.onDisconnect(packet.reason || 'booted');
        } else {
          this.$emit('disconnect', packet.reason);
        }
        break;

      case 'message':
      case 'json':
        var params = ['message', packet.data];

        if (packet.ack == 'data') {
          params.push(ack);
        } else if (packet.ack) {
          this.packet({ type: 'ack', ackId: packet.id });
        }

        this.$emit.apply(this, params);
        break;

      case 'event':
        var params = [packet.name].concat(packet.args);

        if (packet.ack == 'data')
          params.push(ack);

        this.$emit.apply(this, params);
        break;

      case 'ack':
        if (this.acks[packet.ackId]) {
          this.acks[packet.ackId].apply(this, packet.args);
          delete this.acks[packet.ackId];
        }
        break;

      case 'error':
        if (packet.advice){
          this.socket.onError(packet);
        } else {
          if (packet.reason == 'unauthorized') {
            this.$emit('connect_failed', packet.reason);
          } else {
            this.$emit('error', packet.reason);
          }
        }
        break;
    }
  };

  /**
   * Flag interface.
   *
   * @api private
   */

  function Flag (nsp, name) {
    this.namespace = nsp;
    this.name = name;
  };

  /**
   * Send a message
   *
   * @api public
   */

  Flag.prototype.send = function () {
    this.namespace.flags[this.name] = true;
    this.namespace.send.apply(this.namespace, arguments);
  };

  /**
   * Emit an event
   *
   * @api public
   */

  Flag.prototype.emit = function () {
    this.namespace.flags[this.name] = true;
    this.namespace.emit.apply(this.namespace, arguments);
  };

})(
    'undefined' != typeof io ? io : module.exports
  , 'undefined' != typeof io ? io : module.parent.exports
);

/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, io, global) {

  /**
   * Expose constructor.
   */

  exports.websocket = WS;

  /**
   * The WebSocket transport uses the HTML5 WebSocket API to establish an
   * persistent connection with the Socket.IO server. This transport will also
   * be inherited by the FlashSocket fallback as it provides a API compatible
   * polyfill for the WebSockets.
   *
   * @constructor
   * @extends {io.Transport}
   * @api public
   */

  function WS (socket) {
    io.Transport.apply(this, arguments);
  };

  /**
   * Inherits from Transport.
   */

  io.util.inherit(WS, io.Transport);

  /**
   * Transport name
   *
   * @api public
   */

  WS.prototype.name = 'websocket';

  /**
   * Initializes a new `WebSocket` connection with the Socket.IO server. We attach
   * all the appropriate listeners to handle the responses from the server.
   *
   * @returns {Transport}
   * @api public
   */

  WS.prototype.open = function () {
    var query = io.util.query(this.socket.options.query)
      , self = this
      , Socket


    if (!Socket) {
      Socket = global.MozWebSocket || global.WebSocket;
    }

    this.websocket = new Socket(this.prepareUrl() + query);

    this.websocket.onopen = function () {
      self.onOpen();
      self.socket.setBuffer(false);
    };
    this.websocket.onmessage = function (ev) {
      self.onData(ev.data);
    };
    this.websocket.onclose = function () {
      self.onClose();
      self.socket.setBuffer(true);
    };
    this.websocket.onerror = function (e) {
      self.onError(e);
    };

    return this;
  };

  /**
   * Send a message to the Socket.IO server. The message will automatically be
   * encoded in the correct message format.
   *
   * @returns {Transport}
   * @api public
   */

  // Do to a bug in the current IDevices browser, we need to wrap the send in a
  // setTimeout, when they resume from sleeping the browser will crash if
  // we don't allow the browser time to detect the socket has been closed
  if (io.util.ua.iDevice) {
    WS.prototype.send = function (data) {
      var self = this;
      setTimeout(function() {
         self.websocket.send(data);
      },0);
      return this;
    };
  } else {
    WS.prototype.send = function (data) {
      this.websocket.send(data);
      return this;
    };
  }

  /**
   * Payload
   *
   * @api private
   */

  WS.prototype.payload = function (arr) {
    for (var i = 0, l = arr.length; i < l; i++) {
      this.packet(arr[i]);
    }
    return this;
  };

  /**
   * Disconnect the established `WebSocket` connection.
   *
   * @returns {Transport}
   * @api public
   */

  WS.prototype.close = function () {
    this.websocket.close();
    return this;
  };

  /**
   * Handle the errors that `WebSocket` might be giving when we
   * are attempting to connect or send messages.
   *
   * @param {Error} e The error.
   * @api private
   */

  WS.prototype.onError = function (e) {
    this.socket.onError(e);
  };

  /**
   * Returns the appropriate scheme for the URI generation.
   *
   * @api private
   */
  WS.prototype.scheme = function () {
    return this.socket.options.secure ? 'wss' : 'ws';
  };

  /**
   * Checks if the browser has support for native `WebSockets` and that
   * it's not the polyfill created for the FlashSocket transport.
   *
   * @return {Boolean}
   * @api public
   */

  WS.check = function () {
    return ('WebSocket' in global && !('__addTask' in WebSocket))
          || 'MozWebSocket' in global;
  };

  /**
   * Check if the `WebSocket` transport support cross domain communications.
   *
   * @returns {Boolean}
   * @api public
   */

  WS.xdomainCheck = function () {
    return true;
  };

  /**
   * Add the transport to your public io.transports array.
   *
   * @api private
   */

  io.transports.push('websocket');

})(
    'undefined' != typeof io ? io.Transport : module.exports
  , 'undefined' != typeof io ? io : module.parent.exports
  , this
);

/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, io, global) {

  /**
   * Expose constructor.
   *
   * @api public
   */

  exports.XHR = XHR;

  /**
   * XHR constructor
   *
   * @costructor
   * @api public
   */

  function XHR (socket) {
    if (!socket) return;

    io.Transport.apply(this, arguments);
    this.sendBuffer = [];
  };

  /**
   * Inherits from Transport.
   */

  io.util.inherit(XHR, io.Transport);

  /**
   * Establish a connection
   *
   * @returns {Transport}
   * @api public
   */

  XHR.prototype.open = function () {
    this.socket.setBuffer(false);
    this.onOpen();
    this.get();

    // we need to make sure the request succeeds since we have no indication
    // whether the request opened or not until it succeeded.
    this.setCloseTimeout();

    return this;
  };

  /**
   * Check if we need to send data to the Socket.IO server, if we have data in our
   * buffer we encode it and forward it to the `post` method.
   *
   * @api private
   */

  XHR.prototype.payload = function (payload) {
    var msgs = [];

    for (var i = 0, l = payload.length; i < l; i++) {
      msgs.push(io.parser.encodePacket(payload[i]));
    }

    this.send(io.parser.encodePayload(msgs));
  };

  /**
   * Send data to the Socket.IO server.
   *
   * @param data The message
   * @returns {Transport}
   * @api public
   */

  XHR.prototype.send = function (data) {
    this.post(data);
    return this;
  };

  /**
   * Posts a encoded message to the Socket.IO server.
   *
   * @param {String} data A encoded message.
   * @api private
   */

  function empty () { };

  XHR.prototype.post = function (data) {
    var self = this;
    this.socket.setBuffer(true);

    function stateChange () {
      if (this.readyState == 4) {
        this.onreadystatechange = empty;
        self.posting = false;

        if (this.status == 200){
          self.socket.setBuffer(false);
        } else {
          self.onClose();
        }
      }
    }

    function onload () {
      this.onload = empty;
      self.socket.setBuffer(false);
    };

    this.sendXHR = this.request('POST');

    if (global.XDomainRequest && this.sendXHR instanceof XDomainRequest) {
      this.sendXHR.onload = this.sendXHR.onerror = onload;
    } else {
      this.sendXHR.onreadystatechange = stateChange;
    }

    this.sendXHR.send(data);
  };

  /**
   * Disconnects the established `XHR` connection.
   *
   * @returns {Transport}
   * @api public
   */

  XHR.prototype.close = function () {
    this.onClose();
    return this;
  };

  /**
   * Generates a configured XHR request
   *
   * @param {String} url The url that needs to be requested.
   * @param {String} method The method the request should use.
   * @returns {XMLHttpRequest}
   * @api private
   */

  XHR.prototype.request = function (method) {
    var req = io.util.request(this.socket.isXDomain())
      , query = io.util.query(this.socket.options.query, 't=' + +new Date);

    req.open(method || 'GET', this.prepareUrl() + query, true);

    if (method == 'POST') {
      try {
        if (req.setRequestHeader) {
          req.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');
        } else {
          // XDomainRequest
          req.contentType = 'text/plain';
        }
      } catch (e) {}
    }

    return req;
  };

  /**
   * Returns the scheme to use for the transport URLs.
   *
   * @api private
   */

  XHR.prototype.scheme = function () {
    return this.socket.options.secure ? 'https' : 'http';
  };

  /**
   * Check if the XHR transports are supported
   *
   * @param {Boolean} xdomain Check if we support cross domain requests.
   * @returns {Boolean}
   * @api public
   */

  XHR.check = function (socket, xdomain) {
    try {
      var request = io.util.request(xdomain),
          usesXDomReq = (global.XDomainRequest && request instanceof XDomainRequest),
          socketProtocol = (socket && socket.options && socket.options.secure ? 'https:' : 'http:'),
          isXProtocol = (global.location && socketProtocol != global.location.protocol);
      if (request && !(usesXDomReq && isXProtocol)) {
        return true;
      }
    } catch(e) {}

    return false;
  };

  /**
   * Check if the XHR transport supports cross domain requests.
   *
   * @returns {Boolean}
   * @api public
   */

  XHR.xdomainCheck = function (socket) {
    return XHR.check(socket, true);
  };

})(
    'undefined' != typeof io ? io.Transport : module.exports
  , 'undefined' != typeof io ? io : module.parent.exports
  , this
);

/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function (exports, io, global) {

  /**
   * Expose constructor.
   */

  exports['xhr-polling'] = XHRPolling;

  /**
   * The XHR-polling transport uses long polling XHR requests to create a
   * "persistent" connection with the server.
   *
   * @constructor
   * @api public
   */

  function XHRPolling () {
    io.Transport.XHR.apply(this, arguments);
  };

  /**
   * Inherits from XHR transport.
   */

  io.util.inherit(XHRPolling, io.Transport.XHR);

  /**
   * Merge the properties from XHR transport
   */

  io.util.merge(XHRPolling, io.Transport.XHR);

  /**
   * Transport name
   *
   * @api public
   */

  XHRPolling.prototype.name = 'xhr-polling';

  /**
   * Indicates whether heartbeats is enabled for this transport
   *
   * @api private
   */

  XHRPolling.prototype.heartbeats = function () {
    return false;
  };

  /**
   * Establish a connection, for iPhone and Android this will be done once the page
   * is loaded.
   *
   * @returns {Transport} Chaining.
   * @api public
   */

  XHRPolling.prototype.open = function () {
    var self = this;

    io.Transport.XHR.prototype.open.call(self);
    return false;
  };

  /**
   * Starts a XHR request to wait for incoming messages.
   *
   * @api private
   */

  function empty () {};

  XHRPolling.prototype.get = function () {
    if (!this.isOpen) return;

    var self = this;

    function stateChange () {
      if (this.readyState == 4) {
        this.onreadystatechange = empty;

        if (this.status == 200) {
          self.onData(this.responseText);
          self.get();
        } else {
          self.onClose();
        }
      }
    };

    function onload () {
      this.onload = empty;
      this.onerror = empty;
      self.retryCounter = 1;
      self.onData(this.responseText);
      self.get();
    };

    function onerror () {
      self.retryCounter ++;
      if(!self.retryCounter || self.retryCounter > 3) {
        self.onClose();
      } else {
        self.get();
      }
    };

    this.xhr = this.request();

    if (global.XDomainRequest && this.xhr instanceof XDomainRequest) {
      this.xhr.onload = onload;
      this.xhr.onerror = onerror;
    } else {
      this.xhr.onreadystatechange = stateChange;
    }

    this.xhr.send(null);
  };

  /**
   * Handle the unclean close behavior.
   *
   * @api private
   */

  XHRPolling.prototype.onClose = function () {
    io.Transport.XHR.prototype.onClose.call(this);

    if (this.xhr) {
      this.xhr.onreadystatechange = this.xhr.onload = this.xhr.onerror = empty;
      try {
        this.xhr.abort();
      } catch(e){}
      this.xhr = null;
    }
  };

  /**
   * Webkit based browsers show a infinit spinner when you start a XHR request
   * before the browsers onload event is called so we need to defer opening of
   * the transport until the onload event is called. Wrapping the cb in our
   * defer method solve this.
   *
   * @param {Socket} socket The socket instance that needs a transport
   * @param {Function} fn The callback
   * @api private
   */

  XHRPolling.prototype.ready = function (socket, fn) {
    var self = this;

    io.util.defer(function () {
      fn.call(self);
    });
  };

  /**
   * Add the transport to your public io.transports array.
   *
   * @api private
   */

  io.transports.push('xhr-polling');

})(
    'undefined' != typeof io ? io.Transport : module.exports
  , 'undefined' != typeof io ? io : module.parent.exports
  , this
);

})();</script>
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;meatspaces&quot;, &quot;chat&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;name&quot;: &quot;Meatspaces Chat Room&quot;,
      &quot;description&quot;: &quot;Connects you to a Meatspaces chat room.&quot;,
      &quot;attributes&quot;: {
        &quot;server&quot;: {
          &quot;label&quot;: &quot;Meatspaces Server&quot;,
          &quot;description&quot;: &quot;Meatspaces server to which this app should connect to receive messages.&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;height&quot;: {
          &quot;label&quot;: &quot;Height&quot;,
          &quot;description&quot;: &quot;Height of this brick.&quot;,
          &quot;editable&quot;: &quot;number&quot;
        },
        &quot;mode&quot;: {
          &quot;label&quot;: &quot;Message Mode&quot;,
          &quot;description&quot;: &quot;What to display for each message&quot;,
          &quot;editable&quot;: &quot;select&quot;,
          &quot;options&quot;: [&quot;both&quot;, &quot;text only&quot;, &quot;image only&quot;]
        }
      }
    }
  </ceci-definition>
  <template>
    <style>
      :host {
        display: block;
        width: 100%;
      }

      :host #container {
        overflow: scroll;
      }

      :host #container .message {
        font-size: 1em;
        clear: both;
        width: 100%;
        min-height: 60px;
        padding: .2em 0;
      }

      :host #container .message:nth-child(odd) {
        background: rgba(0, 0, 0, 0.1);
      }

      :host #container .message img {
        float: left;
        height: 50px;
        margin-right: .25em;
      }

      :host #status {
        text-align: center;
        padding: .25em 0;
      }

      :host #container[data-mode="text only"] {
        margin-left: 3%;
      }

      :host #container[data-mode="text only"] .message img {
        display: none;
      }

      :host #container[data-mode="text only"] .message .text {
      }

      :host #container[data-mode="image only"] {
        margin-left: 3%;
      }

      :host #container[data-mode="image only"] .message img {
        width: 100%;
        height: auto;
        float: none;
      }

      :host #container[data-mode="image only"] .message .text {
        display: none;
      }

      :host #container[data-mode="image only"] .message {
        display: inline-block;
        width: 48%;
        background: rgba(0, 0, 0, 0.1);
        padding: 0;
        margin-top: .25em;
      }
    </style>

    <div id="status">{{status}}</div>
    <div id="container" data-mode="{{mode}}">
      <template repeat="{{message in _messages}}">
        <div class="message"><img src="{{message.media}}"><span class="text">{{message.message}}</span></div>
      </template>
    </div>

    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-meatspaces-messages', {
      server: 'https://chat.meatspac.es:443',
      status: 'Connecting...',
      mode: 'both',
      height: 300,
      _messages: [],
      _boundMessageReceived: null,
      _messageReceived: function (data) {
        this._messages.push(data.chat.value);
        this.async(function () {
          this.$.container.scrollTop = this.$.container.scrollHeight + 1000;
        });
      },
      _connect: function () {
        var that = this;

        if (this._socket) { return; }

        var socket = this._socket = io.connect(this.server);
        socket.on('connect', function () {
          socket.emit('join');
          that.status = 'Connected';
        });

        this._boundMessageReceived = this._messageReceived.bind(this);
        socket.on('message', this._boundMessageReceived);
      },
      _disconnect: function () {
        this._socket.removeAllListeners('message');
        window.s = this._socket;
        if (this._socket.socket.connected) {
          this._socket.disconnect();
        }
        this.status = 'Disconnected';
        this._boundMessageReceived = null;
        this._socket = null;
      },
      ready: function () {
        this.super();
        this.heightChanged();
      },
      attached: function (e) {
        this._connect();
        this.super();
      },
      detached: function (e) {
        this._disconnect();
        this.super();
      },
      serverChanged: function (oldValue, newValue) {
        this._disconnect();
        this._messages = [];
        this.async(function () {
          this._connect();
        });
      },
      heightChanged: function () {
        this.$.container.style.height = this.height + 'px';
      }
    });
  </script>
</polymer-element>
<polymer-element name="ceci-meatspaces-input" attributes="image text server mode" extends="ceci-element" assetpath="/bundles/components/component-meatspaces-input/">
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;meatspaces&quot;, &quot;input&quot;, &quot;chat&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Sends your picture and message to the Meatspaces chat room.&quot;,
      &quot;name&quot;: &quot;Meatspaces Chat Input&quot;,
      &quot;listeners&quot;: {
        &quot;send&quot;: {
          &quot;label&quot;: &quot;Send&quot;,
          &quot;description&quot;: &quot;Send message to chat server&quot;,
          &quot;default&quot;: true
        }
      },
      &quot;broadcasts&quot;: {
        &quot;sent&quot;: {
          &quot;label&quot;: &quot;Message Sent&quot;,
          &quot;description&quot;: &quot;Message was sent to chat server&quot;
        }
      },
      &quot;attributes&quot;: {
        &quot;image&quot;: {
          &quot;label&quot;: &quot;Image&quot;,
          &quot;description&quot;: &quot;Data-URL for image to be used&quot;,
          &quot;listener&quot;: true
        },
        &quot;server&quot;: {
          &quot;label&quot;: &quot;Server&quot;,
          &quot;description&quot;: &quot;URL for Appmaker Meatspaces Chat Server&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;mode&quot;: {
          &quot;label&quot;: &quot;Message Mode&quot;,
          &quot;description&quot;: &quot;What kind of messages will be sent.&quot;,
          &quot;editable&quot;: &quot;select&quot;,
          &quot;options&quot;: [&quot;both&quot;, &quot;text only&quot;, &quot;image only&quot;]
        }
      }
    }
  </ceci-definition>
  <template>
    <style>
      :host {
        display: block;
        width: 100%;
        min-height: 160px;
        position: relative;
      }

      :host img {
        width: 100px;
        height: 100px;
        float: left;
        margin-left: 5px;
        background-color: rgba(0, 0, 0, 0.2);
        display: block;
      }

      :host #container {
        padding: 5px 0;
      }

      :host #textarea-container {
        position: absolute;
        left: 110px;
        right: 10px;
        top: 5px;
        bottom: 10px;
      }

      :host textarea {
        width: 100%;
        height: 100%;
        resize: none;
      }

      :host #container[data-mode="text only"] img {
        display: none;
      }

      :host #container[data-mode="text only"] #textarea-container {
        left: 5px;
      }

      :host #container[data-mode="image only"] img {
        float: none;
        margin: 0 auto;
        width: 150px;
        height: 150px;
      }

      :host #container[data-mode="image only"] #textarea-container {
        display: none;
      }
    </style>
    <div id="container" data-mode="{{mode}}">
      <img src="{{image}}">
      <div id="textarea-container">
        <textarea placeholder="Type here">{{text}}</textarea>
      </div>
    </div>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-meatspaces-input', {
      text: '',
      image: 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==',
      server: 'http://appmaker-meatspaces-proxy.herokuapp.com/',
      mode: 'both',
      ready: function () {
        this.super();
      },
      send: function () {
        var payload = {
          image: this.image,
          text: this.text
        };
        var xhr = new XMLHttpRequest();
        xhr.open('POST', this.server + '/add/chat', true);
        xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
        xhr.onload = function (e) {
          console.log(xhr.response);
        };
        xhr.send(JSON.stringify(payload));
        this.text = '';
        this.image = 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==';
      }
    });
  </script>
</polymer-element>
<polymer-element name="ceci-kickdrum" attributes="stickcolor backgroundcolor drumcolor volume" drumcolor="#d60e0e" stickcolor="#000000" backgroundcolor="#FFFFFF" volume=".5" extends="ceci-element" assetpath="/bundles/components/component-kickdrum/">
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;kick&quot;, &quot;drum&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Plays a kickdrum.&quot;,
      &quot;name&quot;: &quot;Kick Drum&quot;,
      &quot;broadcasts&quot;: {},
      &quot;listeners&quot;: {
        &quot;kick&quot;: {
          &quot;description&quot;: &quot;Hits the kick drum!&quot;,
          &quot;label&quot;: &quot;Kick&quot;,
          &quot;default&quot;: true
        }
      },
      &quot;attributes&quot;: {
        &quot;stickcolor&quot;: {
          &quot;label&quot;: &quot;Stick Color&quot;,
          &quot;editable&quot;: &quot;color&quot;
        },
        &quot;volume&quot;: {
          &quot;label&quot;: &quot;Volume&quot;,
          &quot;editable&quot;: &quot;number&quot;,
          &quot;min&quot; : 0,
          &quot;max&quot; : 1
        },
        &quot;backgroundcolor&quot;: {
          &quot;label&quot;: &quot;Background Color&quot;,
          &quot;editable&quot;: &quot;color&quot;
        },
        &quot;drumcolor&quot;: {
          &quot;label&quot;: &quot;Drum Color&quot;,
          &quot;description&quot;: &quot;Color of the drum.&quot;,
          &quot;editable&quot;: &quot;color&quot;
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host #kick {
  overflow: hidden;
  height: 75px;
  display: block;
  cursor: pointer;
  width: 100%;
  position: relative;
}

:host #drum {
  position: absolute;
  background: red;
  left: 0;
  top:0;
  height: 100%;
  width: 50%;
}

:host #face {
  position: absolute;
  background: white;
  width: 200px;
  height: 200px;
  top: calc(50% - 100px);
  -webkit-border-radius: 200px;
     -moz-border-radius: 200px;
          border-radius: 200px;
  right: -100px;
  -webkit-transform: scaleX(.5);
  -moz-transform: scaleX(.5);
  transform: scaleX(.5);
  border: solid 25px red;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

:host #stick {
  position: absolute;
  width: 8px;
  background: black;
  height: 50px;
  bottom: -4px;
  left: calc(50% + 5px);
  -webkit-transform-origin: bottom;
  -moz-transform-origin: bottom;
  transform-origin: bottom;
  -webkit-transform: rotate(15deg);
  -moz-transform: rotate(15deg);
  transform: rotate(15deg);
}

:host #ball {
  -webkit-border-radius: 20px;
  -moz-border-radius: 20px;
  border-radius: 20px;
  width: 20px;
  height: 20px;
  background: black;
  position: absolute;
  top: -4px;
  left: calc(50% - 10px);
}

:host .on #face {
  right: -95px;
}

:host .on #stick {
  -webkit-transform: rotate(0deg);
  -moz-transform: rotate(0deg);
  transform: rotate(0deg);
  left: 50%;
}

:host audio {
  display: none;
}
</style>
    <div id="kick" on-ceci-pressdown="{{kickon}}" on-ceci-pressup="{{kickoff}}">
      <div id="drum">
        <div id="face"></div>
      </div>
      <div id="stick">
        <div id="ball"></div>
      </div>
    </div>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-kickdrum', {
      audioBuffer: null,
      ready: function () {
        this.super();

        this.ctx = window.AudioContext || window.webkitAudioContext;

        if (!this.ctx) {
          console.error('Could not get AudioContext for kickdrum.');
          return;
        }

        this.ctx = new this.ctx();

        var that = this;

        var xhr = new XMLHttpRequest();
        xhr.open("GET", this.resolvePath('sounds/kick.ogg'), true);
        xhr.responseType = "arraybuffer";
        xhr.onload = function () {
          if (xhr.response.byteLength) {
            that.ctx.decodeAudioData(xhr.response, function(data) {
              that.audioBuffer = data;
            },
            function (e) {
              console.error('Error decoding the audio buffer for kickdrum.', arguments);
            });
          }
        };
        xhr.send();
      },
      kickon: function (e) {
        var src = this.ctx.createBufferSource();
        var gain = this.ctx.createGain();
        gain.gain.value = this.volume;
        src.buffer = this.audioBuffer;
        src.loop = false;
        src.connect(gain);
        gain.connect(this.ctx.destination);
        src.start(0);
        this.$.kick.classList.add("on");
      },
      kick : function(){
        this.kickon();
        var that = this;
        window.setTimeout(function(){
          that.kickoff();
        },100)
      },
      kickoff : function(e){
        this.$.kick.classList.remove("on");
      },
      stickcolorChanged: function (oldValue, newValue) {
        this.$.stick.style.background = newValue;
        this.$.ball.style.background = newValue;
      },
      drumcolorChanged: function (oldValue, newValue) {
        this.$.drum.style.background = newValue;
        this.$.face.style.borderColor = newValue;
      },
      backgroundcolorChanged: function (oldValue, newValue) {
        this.$.kick.style.background = newValue;
      }
    });
  </script>
</polymer-element>
<polymer-element name="ceci-jazzhands" attributes="backgroundcolor" backgroundcolor="#ff9900" extends="ceci-element" assetpath="/bundles/components/component-jazzhands/">
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;music&quot;, &quot;instrument&quot;, &quot;tap&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Waves at you when pressed or input is received.&quot;,
      &quot;name&quot;: &quot;Jazz Hands&quot;,
      &quot;broadcasts&quot;: {},
      &quot;listeners&quot;: {
        &quot;both&quot;: {
          &quot;description&quot;: &quot;Jazz both hands&quot;,
          &quot;label&quot;: &quot;Both Hands&quot;,
          &quot;default&quot;: true
        },
        &quot;left&quot;: {
          &quot;description&quot;: &quot;Jazz the left hand&quot;,
          &quot;label&quot;: &quot;Left Hand&quot;
        },
        &quot;right&quot;: {
          &quot;description&quot;: &quot;Jazz the right hand&quot;,
          &quot;label&quot;: &quot;Right Hand&quot;
        }
      },
      &quot;attributes&quot;: {
        &quot;backgroundcolor&quot;: {
          &quot;label&quot;: &quot;Background Color&quot;,
          &quot;editable&quot;: &quot;color&quot;
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  background: orange;
}

:host #kick {
  height: 75px;
  display: block;
  cursor: pointer;
  overflow: hidden;
  width: 100%;
  position: relative;
}

:host #kick, :host #kick * {

}

:host .hand {
  height: 100px;
  width: 100px;
  background-size: 100px;
  position: absolute;

}

:host .one {
  left: 40px;
  top: -15px;
  background-image: url(/bundles/components/component-jazzhands/images/handone.png);
}

:host .two {
  right: 40px;
  background-image: url(/bundles/components/component-jazzhands/images/handtwo.png);
}

:host .both .one {
  -webkit-animation: waveone .6s linear;
  -moz-animation: waveone .6s linear;
}
:host .both .two {
  -webkit-animation: wavetwo .6s linear;
  -moz-animation: waveone .6s linear;
}



:host .left .one {
  -webkit-animation: waveone .6s linear;
  -moz-animation: wavetwo .6s linear;
}

:host .right .two {
  -webkit-animation: wavetwo .6s linear;
  -moz-animation: wavetwo .6s linear;
}



@-moz-keyframes waveone {
  0% {   -moz-transform: rotate(0deg);}
  10% {  -moz-transform: rotate(-12deg) scaleX(.9);}
  20% {  -moz-transform: rotate(0deg);}
  30% {  -moz-transform: rotate(-12deg) scaleX(.9);}
  40% {  -moz-transform: rotate(0deg);}
  50% {  -moz-transform: rotate(-12deg) scaleX(.9);}
  60% {  -moz-transform: rotate(0deg);}
  70% {  -moz-transform: rotate(-12deg) scaleX(.9);}
  80% {  -moz-transform: rotate(0deg);}
  90% {  -moz-transform: rotate(-12deg) scaleX(.9) ;}
  100% { -moz-transform: rotate(0deg);}
}

@-moz-keyframes wavetwo {
  0% {   -moz-transform: rotate(12deg) scaleX(.9);}
  10% {  -moz-transform: rotate(0deg);}
  20% {  -moz-transform: rotate(12deg) scaleX(.9);}
  30% {  -moz-transform: rotate(0deg);}
  40% {  -moz-transform: rotate(12deg) scaleX(.9);}
  50% {  -moz-transform: rotate(0deg);}
  60% {  -moz-transform: rotate(12deg) scaleX(.9);}
  70% {  -moz-transform: rotate(0deg);}
  80% {  -moz-transform: rotate(12deg) scaleX(.9);}
  90% {  -moz-transform: rotate(0deg);}
  100% { -moz-transform: rotate(12deg) scaleX(.9) ;}
}

@-webkit-keyframes waveone {
  0% { -webkit-transform: rotate(0deg);}
  10% { -webkit-transform: rotate(-12deg) scaleX(.9);}
  20% { -webkit-transform: rotate(0deg);}
  30% { -webkit-transform: rotate(-12deg) scaleX(.9);}
  40% { -webkit-transform: rotate(0deg);}
  50% { -webkit-transform: rotate(-12deg) scaleX(.9);}
  60% { -webkit-transform: rotate(0deg);}
  70% { -webkit-transform: rotate(-12deg) scaleX(.9);}
  80% { -webkit-transform: rotate(0deg);}
  90% { -webkit-transform: rotate(-12deg) scaleX(.9) ;}
  100% { -webkit-transform: rotate(0deg);}
}

@-webkit-keyframes wavetwo {
  0% { -webkit-transform: rotate(12deg) scaleX(.9);}
  10% { -webkit-transform: rotate(0deg);}
  20% { -webkit-transform: rotate(12deg) scaleX(.9);}
  30% { -webkit-transform: rotate(0deg);}
  40% { -webkit-transform: rotate(12deg) scaleX(.9);}
  50% { -webkit-transform: rotate(0deg);}
  60% { -webkit-transform: rotate(12deg) scaleX(.9);}
  70% { -webkit-transform: rotate(0deg);}
  80% { -webkit-transform: rotate(12deg) scaleX(.9);}
  90% { -webkit-transform: rotate(0deg);}
  100% { -webkit-transform: rotate(12deg) scaleX(.9) ;}
}


:host audio {
  display: none;
}
</style>
    <div id="kick" on-ceci-pressdown="{{both}}">
      <div id="two" class="hand two"></div>
      <div id="one" class="hand one"></div>
    </div>
    <!-- <audio id="kicksound" src="sounds/snare.mp3" preload=preload></audio> -->
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-jazzhands', {
      ready: function () {
        this.super();
        var that = this;
      },
      both : function(){
        this.kickoff();
        this.$.kick.classList.add("both");
      },
      left : function(){
        this.kickoff();
        this.$.kick.classList.add("left");
      },
      right : function(){
        this.kickoff();
        this.$.kick.classList.add("right");
      },
      kickoff : function(){
        this.$.kick.classList.remove("both");
        this.$.kick.classList.remove("right");
        this.$.kick.classList.remove("left");
        this.$.one.offsetWidth = this.$.one.offsetWidth;
        this.$.two.offsetWidth = this.$.two.offsetWidth;
      },
      backgroundcolorChanged: function (oldValue, newValue) {
        this.$.kick.style.background = newValue;
      }
    });
  </script>
</polymer-element>
<polymer-element name="ceci-image" source="//www.placekitten.com/150/150" attributes="height source" extends="ceci-element" height="160" assetpath="/bundles/components/component-image/">
  <template>
    <style>:host {
  display: block;
  text-align: center;
  width: 100%;
}

:host img {
  margin: 0;
  padding: 0;
  display: inline-block;
}

:host .image-container {
  overflow: hidden;
  width: 100%;
  line-height: 0px;
}
</style>
    <div class="image-container">
      <img id="image">
    </div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;image&quot;, &quot;photo&quot;, &quot;picture&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;name&quot;: &quot;Image&quot;,
      &quot;description&quot;: &quot;Displays an image using a simple web URL or data-uri.&quot;,
      &quot;broadcasts&quot;: {
        &quot;click&quot;: {
          &quot;label&quot;: &quot;Click&quot;,
          &quot;description&quot;: &quot;Occurs when the image is clicked.&quot;,
          &quot;default&quot;: false
        }
      },
      &quot;listeners&quot;: {
        &quot;setImageSource&quot;: {
          &quot;description&quot;: &quot;changes the image tags src attribute.&quot;,
          &quot;label&quot;: &quot;Set Image Source&quot;,
          &quot;default&quot;: true
        }
      },
      &quot;attributes&quot;: {
        &quot;height&quot;: {
          &quot;label&quot;: &quot;Image Height&quot;,
          &quot;description&quot;: &quot;Image Height&quot;,
          &quot;editable&quot;: &quot;number&quot;,
          &quot;listener&quot;: true
        },
        &quot;source&quot;: {
          &quot;label&quot;: &quot;Image Source&quot;,
          &quot;description&quot;: &quot;The Image to Show&quot;,
          &quot;editable&quot;: &quot;text&quot;
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-image', {
      ready: function () {
        this.super();

        var that = this;

        // User-configurable Properties
        // A component's user-configurable properties are stored as attributes.
        // Here they are set to a remembered value, or to a default starting.
        // The attribute name must match the name of the editable property in the 'editables' section.
        this.setAttribute("imageUrl", this.getAttribute("imageUrl") || "");
        this.img = this.$.image;
        this.img.style.height = this.getAttribute( "height" ) + "px";

        this.onclick = function () {
          that.broadcast("click", this.img.getAttribute( "src" ));
        };
      },
      setValue : function(v) {
        this.setImageSource(v);
      },
      sourceChanged : function(oldValue, newValue){
        this.setImageSource(this.source);
      },
      setImageSource : function (val) {
        this.source = val;
        this.img.setAttribute('src', val);
      },
      heightChanged: function( oldValue, newValue ) {
        this.img.style.height = ( newValue || newValue === 0 ? newValue : "160" ) + "px";
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-hot-potato" extends="ceci-element" attributes="min max" min="10" max="15" assetpath="/bundles/components/component-hot-potato/">
  <ceci-definition>
    {
      &quot;name&quot; : &quot;Hot Potato&quot;,
      &quot;tags&quot; : [&quot;game&quot;,&quot;timer&quot;,&quot;time&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Sends out a signal at a random time between two numbers.&quot;,
      &quot;broadcasts&quot;: {
        &quot;finish&quot;: {
          &quot;label&quot;: &quot;Game over&quot;,
          &quot;description&quot;: &quot;Sends a message that the game is over.&quot;,
          &quot;default&quot; : &quot;true&quot;
        }
      },
      &quot;listeners&quot;: {
        &quot;start&quot;: {
          &quot;description&quot;: &quot;Starts a new game.&quot;,
          &quot;label&quot;: &quot;New Game&quot;,
          &quot;default&quot; : &quot;true&quot;
        }
      },
      &quot;attributes&quot;: {
        &quot;min&quot;: {
          &quot;description&quot;: &quot;Minimum&quot;,
          &quot;label&quot;: &quot;Min&quot;,
          &quot;editable&quot;: &quot;number&quot;
        },
        &quot;max&quot;: {
          &quot;description&quot;: &quot;Maximum&quot;,
          &quot;label&quot;: &quot;Max&quot;,
          &quot;editable&quot;: &quot;number&quot;
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host .timer {
  font-family: "FiraSans", sans-serif;
  cursor: pointer;
  position: relative;
  text-decoration: none;
  outline: none;
  border-top: 1px solid rgba(255,255,255,.3);
  border-bottom: 2px solid rgba(0,0,0,.2);
  background-color: #4DB227;
  text-align: center;
  display: block;
  padding-top: 5px;
  padding-bottom: 3px;
  text-overflow: ellipsis;
  overflow: hidden;
  border-radius: 0.2rem;
  font-weight: 600;
  font-size: 1.8rem;
  line-height: 3.8rem;
  color: #ffffff;
  width: 100%;
  margin: 0;
}

:host button {
  border: none;
}


</style>
    <div class="timer">{{diffTime}}</div>
    <shadow></shadow>
  </template>
  <tags>starter,math</tags>
    <script>
      Polymer("ceci-hot-potato", {
        ready: function() {
          this.super();
          this.startTime = 0;
          this.randomTimeBetweenRange = 0;
          this.diffTime = 0;
        },
        start: function() {
          this.startTime = Date.now();
          var max = Number(this.max);
          var min = Number(this.min);
          this.randomTimeBetweenRange = Math.floor(Math.random() * (max - min + 1)) + min;
          this.timer();
        },
        timer: function() {
          var nowTime = Date.now();
          this.diffTime = ( nowTime - this.startTime ) / 1000;
          var that = this;
          if (this.diffTime >= this.randomTimeBetweenRange) {
            this.broadcast("finish", this.diffTime);
            return;
          }
          setTimeout(function() {
            that.timer();
          }, 200);
        }
      });
    </script>
</polymer-element>
<polymer-element name="ceci-header" attributes="header" extends="ceci-element" header="Header" assetpath="/bundles/components/component-header/">
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;starter&quot;, &quot;layout&quot;, &quot;navigation&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Displays a title for a page in your app and lets you navigate to that page.&quot;,
      &quot;name&quot;: &quot;Header&quot;,
      &quot;broadcasts&quot;: {},
      &quot;listeners&quot;: {
        &quot;navigateHere&quot;: {
          &quot;description&quot;: &quot;navigateHere&quot;,
          &quot;label&quot;: &quot;Navigate Here&quot;
        }
      },
      &quot;attributes&quot;: {
        &quot;header&quot;: {
          &quot;label&quot;: &quot;Header Label&quot;,
          &quot;description&quot;: &quot;Text for header label&quot;,
          &quot;editable&quot;: &quot;text&quot;,
          &quot;listener&quot;: true
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

header {
  background-color: #212429;
  width: 100%;
  padding: 0;
  min-height: 5rem;
  line-height: 5rem;
  color: #FFF;
  font-size: 2.4rem;
  text-align: center;
}
</style>
    <header id="headerText">{{header}}</header>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-header', {
      ready: function () {
        this.super();
      },
      navigateHere: function () {
        var parent = this.parentNode;
        while (parent.nodeName !== "CECI-CARD") {
          parent = parent.parentNode;
        }
        if (parent) {
          parent.show();
        }
      }
    });
  </script>
</polymer-element>
<polymer-element name="ceci-game-controller" extends="ceci-element" attributes="leftbuttonvalue upbuttonvalue downbuttonvalue rightbuttonvalue selectbuttonvalue startbuttonvalue abuttonvalue bbuttonvalue" leftbuttonvalue="left" upbuttonvalue="up" downbuttonvalue="down" rightbuttonvalue="right" selectbuttonvalue="select" startbuttonvalue="start" abuttonvalue="a" bbuttonvalue="b" assetpath="/bundles/components/component-game-controller/">
  <ceci-definition>
    {
      &quot;name&quot;: &quot;Game Controller&quot;,
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;A classic NES game controller&quot;,
      &quot;broadcasts&quot;: {
        &quot;press&quot;: {
          &quot;label&quot;: &quot;Any Button Pressed&quot;,
          &quot;description&quot;: &quot;Any button was pressed&quot;,
          &quot;default&quot;: true
        },
        &quot;release&quot;: {
          &quot;label&quot;: &quot;Any Button Released&quot;,
          &quot;description&quot;: &quot;Any button was released&quot;
        },
        &quot;left&quot;: {
          &quot;label&quot;: &quot;Left Button&quot;,
          &quot;description&quot;: &quot;Left button was pressed&quot;
        },
        &quot;up&quot;: {
          &quot;label&quot;: &quot;Up Button&quot;,
          &quot;description&quot;: &quot;Up button was pressed&quot;
        },
        &quot;down&quot;: {
          &quot;label&quot;: &quot;Down Button&quot;,
          &quot;description&quot;: &quot;Down button was pressed&quot;
        },
        &quot;right&quot;: {
          &quot;label&quot;: &quot;Right Button&quot;,
          &quot;description&quot;: &quot;Right button was pressed&quot;
        },
        &quot;select&quot;: {
          &quot;label&quot;: &quot;Select Button&quot;,
          &quot;description&quot;: &quot;Select button was pressed&quot;
        },
        &quot;start&quot;: {
          &quot;label&quot;: &quot;Start Button&quot;,
          &quot;description&quot;: &quot;Start button was pressed&quot;
        },
        &quot;abutton&quot;: {
          &quot;label&quot;: &quot;A Button&quot;,
          &quot;description&quot;: &quot;A button was pressed&quot;
        },
        &quot;bbutton&quot;: {
          &quot;label&quot;: &quot;B Button&quot;,
          &quot;description&quot;: &quot;B button was pressed&quot;
        },
        &quot;konami&quot;: {
          &quot;label&quot;: &quot;Konami code triggered!&quot;,
          &quot;description&quot;: &quot;A classic easter egg to add to your app&quot;
        }
      },
      &quot;attributes&quot;: {
        &quot;leftbuttonvalue&quot;: {
          &quot;label&quot;: &quot;Left Button Value&quot;,
          &quot;description&quot;: &quot;Value to send when this button is clicked&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;upbuttonvalue&quot;: {
          &quot;label&quot;: &quot;Up Button Value&quot;,
          &quot;description&quot;: &quot;Value to send when this button is clicked&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;downbuttonvalue&quot;: {
          &quot;label&quot;: &quot;Down Button Value&quot;,
          &quot;description&quot;: &quot;Value to send when this button is clicked&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;rightbuttonvalue&quot;: {
          &quot;label&quot;: &quot;Right Button Value&quot;,
          &quot;description&quot;: &quot;Value to send when this button is clicked&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;selectbuttonvalue&quot;: {
          &quot;label&quot;: &quot;Select Button Value&quot;,
          &quot;description&quot;: &quot;Value to send when this button is clicked&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;startbuttonvalue&quot;: {
          &quot;label&quot;: &quot;Start Button Value&quot;,
          &quot;description&quot;: &quot;Value to send when this button is clicked&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;abuttonvalue&quot;: {
          &quot;label&quot;: &quot;A Button Value&quot;,
          &quot;description&quot;: &quot;Value to send when this button is clicked&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;bbuttonvalue&quot;: {
          &quot;label&quot;: &quot;B Button Value&quot;,
          &quot;description&quot;: &quot;Value to send when this button is clicked&quot;,
          &quot;editable&quot;: &quot;text&quot;
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  position: relative;
}

:host .game-controller {
  height: 120px;
  border: 5px solid lightgrey;
  background-color: lightgrey;
  border-top-width: 15px;
  border-radius: 5px;
}

:host .game-controller:after {
  content: "";
  display: block;
  border-radius: 5px;
  background-color: black;
  height: 100%;
}

:host .d-pad-container {
  position: absolute;
  left: 0px;
  top: 0px;
  bottom: 0px;
  width: 33%;
}

:host .start-select-container {
  position: absolute;
  left: 33%;
  top: 0px;
  bottom: 0px;
  width: 33%;
}

:host .a-b-buttons-container {
  position: absolute;
  right: 0;
  top: 0px;
  bottom: 0px;
  width: 33%;
}

:host .d-pad {
  position: absolute;
  left: 0;
  right: 0;
  height: 50%;
  bottom: 20%;
}

:host .left-button {
  position: absolute;
  border-radius: 5px 0 0 5px;
  border-style: solid;
  border-color: lightgrey;
  height: 20px;
  width: 20px;
  border-width: 5px;
  border-right-width: 0;
  left: 15px;
  top: 20px;
  cursor: pointer;
}
:host .up-button {
  position: absolute;
  border-style: solid;
  border-radius: 5px 5px 0 0;
  border-color: lightgrey;
  height: 20px;
  width: 20px;
  border-width: 5px;
  border-bottom-width: 0;
  top: 0;
  left: 35px;
  cursor: pointer;
}
:host .down-button {
  position: absolute;
  border-radius: 0 0 5px 5px;
  border-style: solid;
  border-color: lightgrey;
  height: 20px;
  width: 20px;
  border-width: 5px;
  border-top-width: 0;
  bottom: 0;
  left: 35px;
  cursor: pointer;
}
:host .right-button {
  position: absolute;
  border-radius: 0 5px 5px 0;
  border-style: solid;
  border-color: lightgrey;
  height: 20px;
  width: 20px;
  border-width: 5px;
  border-left-width: 0;
  right: 17px;
  top: 20px;
  cursor: pointer;
}

:host .start-select {
  position: absolute;
  left: 0;
  right: 0;
  background-color: lightgrey;
  border-radius: 5px;
  height: 30%;
  bottom: 20%;
}

:host .select-button {
  background-color: black;
  border-radius: 5px;
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  right: 50%;
  margin: 16% 5% 16% 10%;
  cursor: pointer;
}

:host .start-button {
  background-color: black;
  border-radius: 5px;
  position: absolute;
  left: 50%;
  top: 0;
  bottom: 0;
  right: 0;
  margin: 16% 10% 16% 5%;
  cursor: pointer;
}

:host .a-b-buttons {
  position: absolute;
  left: 0;
  right: 0;
  height: 30%;
  bottom: 20%;
}

:host .a-button {
  background-color: #D3D3D3;
  border-radius: 5px;
  position: absolute;
  left: 0px;
  top: 0px;
  bottom: 0px;
  margin: 0px 4%;
  width: 40%;
  cursor: pointer;
}

:host .b-button {
  background-color: #D3D3D3;
  border-radius: 5px;
  position: absolute;
  left: 43%;
  top: 0px;
  bottom: 0px;
  margin: 0px 5%;
  width: 40%;
  cursor: pointer;
}

:host .a-button:after,
:host .b-button:after {
  content: "";
  display: block;
  border-radius: 50%;
  background-color: red;
  top: 10%;
  bottom: 10%;
  left: 10%;
  right: 10%;
  position: absolute;
}

</style>
    <div class="game-controller">
      <div class="d-pad-container">
        <div class="d-pad">
          <div class="left-button" on-mousedown="{{onMouseDown}}" on-mouseup="{{onMouseUp}}" on-touchstart="{{onTouchStart}}" on-touchend="{{onTouchEnd}}" on-click="{{leftClicked}}"></div>
          <div class="up-button" on-mousedown="{{onPress}}" on-mouseup="{{onRelease}}" on-touchstart="{{onTouchStart}}" on-touchend="{{onTouchEnd}}" on-click="{{upClicked}}"></div>
          <div class="down-button" on-mousedown="{{onPress}}" on-mouseup="{{onRelease}}" on-touchstart="{{onTouchStart}}" on-touchend="{{onTouchEnd}}" on-click="{{downClicked}}"></div>
          <div class="right-button" on-mousedown="{{onPress}}" on-mouseup="{{onRelease}}" on-touchstart="{{onTouchStart}}" on-touchend="{{onTouchEnd}}" on-click="{{rightClicked}}"></div>
        </div>
      </div>
      <div class="start-select-container">
        <div class="start-select">
          <div class="select-button" on-mousedown="{{onPress}}" on-mouseup="{{onRelease}}" on-touchstart="{{onTouchStart}}" on-touchend="{{onTouchEnd}}" on-click="{{selectClicked}}"></div>
          <div class="start-button" on-mousedown="{{onPress}}" on-mouseup="{{onRelease}}" on-touchstart="{{onTouchStart}}" on-touchend="{{onTouchEnd}}" on-click="{{startClicked}}"></div>
        </div>
      </div>
      <div class="a-b-buttons-container">
        <div class="a-b-buttons">
          <div class="a-button" on-mousedown="{{onPress}}" on-mouseup="{{onRelease}}" on-touchstart="{{onTouchStart}}" on-touchend="{{onTouchEnd}}" on-click="{{aButtonClicked}}"></div>
          <div class="b-button" on-mousedown="{{onPress}}" on-mouseup="{{onRelease}}" on-touchstart="{{onTouchStart}}" on-touchend="{{onTouchEnd}}" on-click="{{bButtonClicked}}"></div>
        </div>
      </div>
    </div>
    <shadow></shadow>
  </template>
  <tags>game</tags>
    <script>
      Polymer("ceci-game-controller", {
        ready: function() {
          this.super();

          // Looking for         B A
          this.sequence = [];
          this.KONAMI_CODE = "up,up,down,down,left,right,left,right,b,a";

          var that = this;
          function detechTouch() {
            // Disable mouse events
            that.onMouseDown = function() {};
            that.onMouseUp = function() {};
            this.removeEventListener("touchstart", detechTouch);
          }
          this.addEventListener("touchstart", detechTouch);
        },
        onPress: function(e) {
          var button = e.target.classList[0].split("-")[0];
          this.sequence.push(button);

          if (this.sequence.length > 10) {
            this.sequence.shift();
          }

          if (this.sequence.join(",") == this.KONAMI_CODE) {
            this.broadcast("konami", this.KONAMI_CODE);
          }

          this.broadcast("press", e.target.classList[0]);
        },
        onRelease: function(e) {
          this.broadcast("release", e.target.classList[0]);
        },
        onMouseDown: function(e) {
          this.onPress(e);
        },
        onMouseUp: function(e) {
          this.onRelease(e);
        },
        onTouchStart: function(e) {
          this.onPress(e);
        },
        onTouchEnd: function(e) {
          this.onRelease(e);
        },
        leftClicked: function(e) {
          this.broadcast("left", this.leftbuttonvalue);
        },
        upClicked: function(e) {
          this.broadcast("up", this.upbuttonvalue);
        },
        downClicked: function(e) {
          this.broadcast("down", this.downbuttonvalue);
        },
        rightClicked: function(e) {
          this.broadcast("right", this.rightbuttonvalue);
        },
        selectClicked: function(e) {
          this.broadcast("select", this.selectbuttonvalue);
        },
        startClicked: function(e) {
          this.broadcast("start", this.startbuttonvalue);
        },
        aButtonClicked: function(e) {
          this.broadcast("abutton", this.abuttonvalue);
        },
        bButtonClicked: function(e) {
          this.broadcast("bbutton", this.bbuttonvalue);
        }
      });
    </script>
</polymer-element>
<polymer-element name="ceci-fireworks" attributes="fireworksound" extends="ceci-element" fireworksound="Kaboom!" assetpath="/bundles/components/component-fireworks/">
  <template>
    <style>:host {
  display: block;
  background: black;
}

:host .app-fireworks {
  background-color: #0e1012;
  display: inline-block;
}

:host canvas {
  height: 100%;
  width: 100%;
}
</style>
    <div class="fireworks-wrapper">
      <canvas id="canvas" class="fireworks-canvas" on-click="{{click}}">Canvas is not supported in your browser.</canvas>
    </div>
    <shadow></shadow>
  </template>
  <ceci-definition>
      {
        &quot;tags&quot;: [&quot;animated&quot;, &quot;starter&quot;, &quot;fun&quot;],
        &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
        &quot;description&quot;: &quot;Celebrates with fireworks whenever input is received.&quot;,
        &quot;name&quot;: &quot;Fireworks&quot;,
        &quot;broadcasts&quot;: {
          &quot;kaboom&quot;: {
            &quot;label&quot;: &quot;Kaboom&quot;,
            &quot;description&quot;: &quot;Occurs when a rocket explodes&quot;
          }
        },
        &quot;listeners&quot;: {
          &quot;shootRocket&quot;: {
            &quot;description&quot;: &quot;Causes a rocket to launch&quot;,
            &quot;label&quot;: &quot;Shoot Rocket&quot;,
            &quot;default&quot;: true
          },
          &quot;shootThisManyRockets&quot;: {
            &quot;description&quot;: &quot;Shoot a number of rockets&quot;,
            &quot;label&quot;: &quot;Shoot This Many Rockets&quot;
          }
        },
        &quot;attributes&quot;: {
          &quot;fireworksound&quot;: {
            &quot;label&quot;: &quot;Firework Sound&quot;,
            &quot;description&quot;: &quot;Tell the fireworks what to broadcast every shot.&quot;,
            &quot;editable&quot;: &quot;text&quot;,
            &quot;listener&quot;: true
          }
        }
      }
    </ceci-definition>
  <script>
    Polymer('ceci-fireworks', {
      ready: function () {
        this.super();
        // when animating on canvas, it is best to use requestAnimationFrame instead of setTimeout or setInterval
        // not supported in all browsers though and sometimes needs a prefix, so we need a shim
        window.requestAnimFrame = ( function() {
          return window.requestAnimationFrame ||
                window.webkitRequestAnimationFrame ||
                window.mozRequestAnimationFrame ||
                function( callback ) {
                  window.setTimeout( callback, 1000 / 60 );
                };
        })();

        this.setAttribute('fireworksound', this.getAttribute("fireworksound") || 'Kapow!');

        // now we will setup our basic variables for the demo
        var canvas = this.$.canvas,
            ctx = canvas.getContext( '2d' ),

            // firework collection
            fireworks = [],
            // particle collection
            particles = [],
            // when launching fireworks with a click, too many get launched at once without a limiter, one launch per 5 loop ticks
            limiterTotal = 5,
            limiterTick = 0,
            mousedown = false,
            // mouse x coordinate,
            mx,
            // mouse y coordinate
            my;

        // starting hue
        this.hue = 120;
        // this will time the auto launches of fireworks, one launch per 80 loop ticks
        this.timerTotal = 80,
        this.timerTick = 0,

        this.ctx = ctx;

        // now we are going to setup our function placeholders for the entire demo

        // get a random number within a range
        function random( min, max ) {
          return Math.random() * ( max - min ) + min;
        }
        this.random = random;

        // calculate the distance between two points
        function calculateDistance( p1x, p1y, p2x, p2y ) {
          var xDistance = p1x - p2x,
              yDistance = p1y - p2y;
          return Math.sqrt( Math.pow( xDistance, 2 ) + Math.pow( yDistance, 2 ) );
        }

        var t = this;
        // create firework
        function Firework( sx, sy, tx, ty, hue ) {
          // actual coordinates
          this.x = sx;
          this.y = sy;
          // starting coordinates
          this.sx = sx;
          this.sy = sy;
          // target coordinates
          this.tx = tx;
          this.ty = ty;
          this.hue = hue;
          // distance from starting point to target
          this.distanceToTarget = calculateDistance( sx, sy, tx, ty );
          this.distanceTraveled = 0;
          // track the past coordinates of each firework to create a trail effect, increase the coordinate count to create more prominent trails
          this.coordinates = [];
          this.coordinateCount = 3;
          // populate initial coordinate collection with the current coordinates
          while( this.coordinateCount-- ) {
            this.coordinates.push( [ this.x, this.y ] );
          }
          this.angle = Math.atan2( ty - sy, tx - sx );
          this.speed = 2;
          this.acceleration = 1.05;
          this.brightness = random( 50, 70 );
        }
        // update firework
        Firework.prototype.update = function( index ) {
          // remove last item in coordinates array
          this.coordinates.pop();
          // add current coordinates to the start of the array
          this.coordinates.unshift( [ this.x, this.y ] );

          // speed up the firework
          this.speed *= this.acceleration;

          // get the current velocities based on angle and speed
          var vx = Math.cos( this.angle ) * this.speed,
              vy = Math.sin( this.angle ) * this.speed;
          // how far will the firework have traveled with velocities applied?
          this.distanceTraveled = calculateDistance( this.sx, this.sy, this.x + vx, this.y + vy );

          // if the distance traveled, including velocities, is greater than the initial distance to the target, then the target has been reached
          if( this.distanceTraveled >= this.distanceToTarget ) {
            t.broadcast('kaboom', t.getAttribute('fireworksound'));
            createParticles( this.tx, this.ty, this.hue );
            // remove the firework, use the index passed into the update function to determine which to remove
            fireworks.splice( index, 1 );
          } else {
            // target not reached, keep traveling
            this.x += vx;
            this.y += vy;
          }
        }
        // draw firework
        Firework.prototype.draw = function() {
          ctx.beginPath();
          // move to the last tracked coordinate in the set, then draw a line to the current x and y
          ctx.moveTo( this.coordinates[ this.coordinates.length - 1][ 0 ], this.coordinates[ this.coordinates.length - 1][ 1 ] );
          ctx.lineTo( this.x, this.y );
          ctx.strokeStyle = 'hsl(' + this.hue + ', 100%, ' + this.brightness + '%)';
          ctx.stroke();

          ctx.beginPath();
          // draw the target for this firework with a pulsing circle
          ctx.arc( this.tx, this.ty, this.targetRadius, 0, Math.PI * 2 );
        }
        // create particle
        function Particle( x, y, hue ) {
          this.x = x;
          this.y = y;
          // track the past coordinates of each particle to create a trail effect, increase the coordinate count to create more prominent trails
          this.coordinates = [];
          this.coordinateCount = 5;
          while( this.coordinateCount-- ) {
            this.coordinates.push( [ this.x, this.y ] );
          }
          // set a random angle in all possible directions, in radians
          this.angle = random( 0, Math.PI * 2 );
          this.speed = random( 1, 10 );
          // friction will slow the particle down
          this.friction = 0.95;
          // gravity will be applied and pull the particle down
          this.gravity = 1;
          // set the hue to a random number +-20 of the overall hue variable
          this.hue = random( hue - 20, hue + 20 );
          this.brightness = random( 50, 80 );
          this.alpha = 1;
          // set how fast the particle fades out
          this.decay = random( 0.015, 0.03 );
        }
        // update particle
        Particle.prototype.update = function( index ) {
          // remove last item in coordinates array
          this.coordinates.pop();
          // add current coordinates to the start of the array
          this.coordinates.unshift( [ this.x, this.y ] );
          // slow down the particle
          this.speed *= this.friction;
          // apply velocity
          this.x += Math.cos( this.angle ) * this.speed;
          this.y += Math.sin( this.angle ) * this.speed + this.gravity;
          // fade out the particle
          this.alpha -= this.decay;
          // remove the particle once the alpha is low enough, based on the passed in index
          if( this.alpha <= this.decay ) {
            particles.splice( index, 1 );
          }
        }
        // draw particle
        Particle.prototype.draw = function() {
          ctx.beginPath();
          // move to the last tracked coordinates in the set, then draw a line to the current x and y
          ctx.moveTo( this.coordinates[ this.coordinates.length - 1 ][ 0 ], this.coordinates[ this.coordinates.length - 1 ][ 1 ] );
          ctx.lineTo( this.x, this.y );
          ctx.strokeStyle = 'hsla(' + this.hue + ', 100%, ' + this.brightness + '%, ' + this.alpha + ')';
          ctx.stroke();
        }
        // create particle group/explosion
        function createParticles( x, y, hue ) {
          // increase the particle count for a bigger explosion, beware of the canvas performance hit with the increased particles though
          var particleCount = 30;
          while( particleCount-- ) {
            particles.push( new Particle( x, y, hue ) );
          }
        }
        this.Firework = Firework;
        this.Particle = Particle;
        this.fireworks = fireworks;
        this.particles = particles;

        (function loop() {
          // this function will run endlessly with requestAnimationFrame
          requestAnimFrame( loop );
          // increase the hue to get different colored fireworks over time
          t.hue += t.random(0,20)
          // normally, clearRect() would be used to clear the canvas
          // we want to create a trailing effect though
          // setting the composite operation to destination-out will allow us to clear the canvas at a specific opacity, rather than wiping it entirely
          t.ctx.globalCompositeOperation = 'destination-out';
          // decrease the alpha property to create more prominent trails
          t.ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
          t.ctx.fillRect( 0, 0, t.cw, t.ch );
          // change the composite operation back to our main mode
          // lighter creates bright highlight points as the fireworks and particles overlap each other
          t.ctx.globalCompositeOperation = 'lighter';
          // loop over each firework, draw it, update it
          var i = t.fireworks.length;
          while( i-- ) {
            t.fireworks[ i ].draw();
            t.fireworks[ i ].update( i );
          }
          // loop over each particle, draw it, update it
          var i = t.particles.length;
          while( i-- ) {
            t.particles[ i ].draw();
            t.particles[ i ].update( i );
          }
        })();

      },
      launchRocket: function() {
        this.fireworks.push( new this.Firework( this.cw / 2, this.ch,
        this.random( 0, this.cw ), this.random( 0, this.ch / 2 ), this.hue));
      },
      shootRocket: function (count, channel) {
        this.launchRocket();
      },
      shootThisManyRockets: function (count, channel) {
        var intRegex = /^\d+$/;
        if (intRegex.test(count)) {

          var n = Number(count);
          if (n > 15){
            n = 15;
          }
          for (var i=0; i < n; i++) {
            this.launchRocket();
          }
        } else {
          this.launchRocket();
        }
      },
      attached: function() {
        var rect = this.getBoundingClientRect();
        this.$.canvas.width = this.cw = rect.width;
        this.$.canvas.height = this.ch = rect.width;
        this.super();
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-double-button" attributes="textcolor rightbuttoncolor leftbuttoncolor leftlabel rightlabel value" value="Click" extends="ceci-element" leftlabel="OK" rightlabel="Cancel" textcolor="#ffffff" leftbuttoncolor="#4DB227" rightbuttoncolor="#bd400a" assetpath="/bundles/components/component-double-button/">
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;button&quot;, &quot;click&quot;, &quot;tap&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Responds to your clicks and taps.&quot;,
      &quot;name&quot;: &quot;Double Button&quot;,
      &quot;broadcasts&quot;: {
        &quot;clickleft&quot;: {
          &quot;label&quot;: &quot;Left Button&quot;,
          &quot;description&quot;: &quot;Occurs when left button is clicked.&quot;,
          &quot;default&quot;: &quot;blue&quot;
        },
        &quot;clickright&quot;: {
          &quot;label&quot;: &quot;Right Button&quot;,
          &quot;description&quot;: &quot;Occurs when right button is clicked.&quot;,
          &quot;default&quot;: &quot;blue-two&quot;
        }
      },
      &quot;listeners&quot;: {},
      &quot;attributes&quot;: {
        &quot;leftlabel&quot;: {
          &quot;label&quot;: &quot;Left Button Label&quot;,
          &quot;description&quot;: &quot;Text shown on the left button.&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;leftbuttoncolor&quot;: {
          &quot;label&quot;: &quot;Left Button Color&quot;,
          &quot;description&quot;: &quot;Background color of the left button.&quot;,
          &quot;editable&quot;: &quot;color&quot;
        },
        &quot;rightlabel&quot;: {
          &quot;label&quot;: &quot;Right Button Label&quot;,
          &quot;description&quot;: &quot;Text shown on the right button.&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;rightbuttoncolor&quot;: {
          &quot;label&quot;: &quot;Right Button Color&quot;,
          &quot;description&quot;: &quot;Background color of the right button.&quot;,
          &quot;editable&quot;: &quot;color&quot;
        },
        &quot;textcolor&quot;: {
          &quot;label&quot;: &quot;Text Color&quot;,
          &quot;description&quot;: &quot;Color of the text on the button&apos;s label.&quot;,
          &quot;editable&quot;: &quot;color&quot;
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  word-spacing: -1;
}

:host .buttons-wrapper {
  line-height: 0px;
  font-size: 0px;
}

:host .button-wrapper {
  position: relative;
  display: inline-block;
  width: 50%;
}

:host .button {
  cursor: pointer;
  border-bottom: 2px solid rgba(0,0,0,.1);
  display: block;
  text-align: center;
  padding: 12px 0 10px 0;
  text-overflow: ellipsis;
  overflow: hidden;
  font-weight: 300;
  font-size: 1.8rem;
  line-height: 1.8rem;
  width: 100%;
  display: inline-block;
  -webkit-box-sizing: border-box;
}

:host #leftbutton {
 border-right: 2px solid rgba(0,0,0,.1);
}

:host #rightbutton {
  border-left: 2px solid rgba(255,255,255,.1);
}

:host .overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  opacity: 0;
}

:host .active-overlay {
  background: black;
}

:host .hover-overlay {
  background: white;
}

:host .button-wrapper:hover .hover-overlay {
  opacity: .1;
}

:host .button-wrapper:active .active-overlay {
  opacity: .1;
}
:host .button-wrapper:active .hover-overlay {
  opacity: 0;
}

:host .button-wrapper:active .button {
  border-top: solid 2px rgba(0,0,0,.1);
  border-bottom: none;
}

:host button {
  border: none;
}
</style>
    <div class="buttons-wrapper">
      <div class="button-wrapper" on-ceci-pressdown="{{clickleft}}">
        <div class="button" id="leftbutton">{{leftlabel}}</div>
        <div class="overlay active-overlay"></div>
        <div class="overlay hover-overlay"></div>
      </div>
      <div class="button-wrapper" on-ceci-pressdown="{{clickright}}">
        <div class="button" id="rightbutton">{{rightlabel}}</div>
        <div class="overlay active-overlay"></div>
        <div class="overlay hover-overlay"></div>
      </div>
    </div>
    <shadow></shadow></template>
  <script>
    Polymer('ceci-double-button', {
      ready: function () {
        this.super();
        var that = this;
      },
      clickleft: function () {
        this.broadcast('clickleft', this.getAttribute('value'));
      },
      clickright: function () {
        this.broadcast('clickright', this.getAttribute('value'));
      },
      textcolorChanged: function (oldValue, newValue) {
        this.$.leftbutton.style.color = newValue;
        this.$.rightbutton.style.color = newValue;
      },
      leftbuttoncolorChanged: function (oldValue, newValue) {
        this.$.leftbutton.style.backgroundColor = newValue;
      },
      rightbuttoncolorChanged: function (oldValue, newValue) {
        this.$.rightbutton.style.backgroundColor = newValue;
      }

    });
  </script>
</polymer-element>
<polymer-element name="ceci-daily-counter" collectionname="times" extends="ceci-element" attributes="unit increment collectionname" assetpath="/bundles/components/component-daily-counter/">
  <ceci-definition>
    {
      &quot;name&quot;: &quot;Daily Counter&quot;,
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Counts daily progress toward your goals. Tells you how much time you have left and resets at the end of the day.&quot;,
      &quot;broadcasts&quot;: {
        &quot;currentCount&quot;: {
          &quot;label&quot;: &quot;Current Count&quot;,
          &quot;description&quot;: &quot;Broadcasts the current count.&quot;
        }
      },
      &quot;listeners&quot;: {
        &quot;countUp&quot;: {
          &quot;description&quot;: &quot;Increment the total by the increment value&quot;,
          &quot;label&quot;: &quot;Count Up!&quot;,
          &quot;default&quot; : false
        },
        &quot;countDown&quot;: {
          &quot;description&quot;: &quot;Decrement the total by the increment value&quot;,
          &quot;label&quot;: &quot;Count Down&quot;
        },
        &quot;resetCount&quot;: {
          &quot;description&quot;: &quot;Reset the total to 0.&quot;,
          &quot;label&quot;: &quot;Reset Count&quot;
        }
      },
      &quot;attributes&quot;: {
        &quot;unit&quot;: {
          &quot;description&quot;: &quot;Name for items which are being counted.&quot;,
          &quot;label&quot;: &quot;Unit&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;collectionname&quot;: {
          &quot;description&quot;: &quot;The name of the collection to store the value&quot;,
          &quot;label&quot;: &quot;Collection Name&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;increment&quot;: {
          &quot;description&quot;: &quot;Count up or down with this number.&quot;,
          &quot;label&quot;: &quot;Increment By&quot;,
          &quot;editable&quot;: &quot;number&quot;,
          &quot;min&quot; : 1
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  background: #DDD;
  text-align: center;
  padding: 5px ;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}

:host .timer {
  text-align: center;
  font-size: 16px;
  padding: 5px 0;
}

:host .counter {
  font-size: 16px;
  color: #666;
  margin: 5px auto;
  text-align: center;
  padding: 10px 12px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  border: 1px #CCC solid;
  border-bottom-width: 2px;
  background: white;
  display: inline-block;
  font-weight: bold;
}
</style>
      <div class="timer">
        <span>{{dayCountDown}}</span>
        <span class="label">left Today</span>
      </div>
      <div class="counter">
        <span>{{value}}</span>
        <span class="label">{{displayUnit}}</span>
      </div>
    <shadow></shadow>
  </template>
  <tags></tags>
  <script>
    Polymer("ceci-daily-counter", {
      ready: function() {
        this.dayCountDown = '00:00';
        this.increment = Number(this.increment) || 1;
        this.value = this.getTodaysValue() || 0;
        this.displayUnit = this.unit;
        this.updateUnit();
        var t = this;
        this.countdownInterval = setInterval(function(){
          t.updateCountdown();
        }, 2000);
        t.updateCountdown();
        this.super();
      },
      value: 0,
      increment: 1,
      unit: 'Times',
      updateCountdown: function(){
        function minutesUntilMidnight() {
          var midnight = new Date();
          midnight.setHours(24);
          midnight.setMinutes(0);
          midnight.setSeconds(0);

          var hours = Math.floor(
            (midnight.getTime() - new Date().getTime()) / 1000 / 60 / 60
          );

          if (hours < 10) {
            hours = "0" + hours;
          }

          var minutes = Math.ceil(
            (midnight.getTime() - new Date().getTime()) / 1000 / 60 % 60
          );

          if (minutes < 10) {
            minutes = "0" + minutes;
          }

          return [hours, minutes].join(":");
        }

        this.dayCountDown = minutesUntilMidnight();
      },
      incrementChanged: function(oldValue, newValue) {
        this.increment = Number(this.increment) || 0;
      },
      updateUnit : function(){
        if (this.unit) {
          var unit = this.unit.trim();
          if (unit.length > 0) {

            var pluralChar = "";
            if((Number(this.value) !== 1) && (unit[unit.length - 1] !== 's')){
              pluralChar = "s";
            }

            if(unit[unit.length - 1] === unit[unit.length - 1].toUpperCase()) {
              pluralChar = pluralChar.toUpperCase()
            }
            this.displayUnit = " " + unit + pluralChar;
          }
        }
      },
      unitChanged: function() {
        this.updateUnit();
      },
      getTodaysValue: function(){
        var collection = localStorage['hack-collection-' + this.collectionname];

        // This will go away when collections are redone
        if (!collection){
          localStorage['hack-collection-' + this.collectionname] = JSON.stringify({});
        }

        var data = JSON.parse(localStorage['hack-collection-' + this.collectionname]);

        return data[new Date().toLocaleDateString()];
      },
      storeValue: function(val) {
        var collection = localStorage['hack-collection-' + this.collectionname];

        // This will go away when collections are redone
        if (!collection){
          localStorage['hack-collection-' + this.collectionname] = JSON.stringify({});
        }

        var data = JSON.parse(localStorage['hack-collection-' + this.collectionname]);

        data[new Date().toLocaleDateString()] = val;
        localStorage['hack-collection-' + this.collectionname] = JSON.stringify(data);
      },
      valueChanged: function() {
        this.broadcast("currentCount", this.value);
        this.storeValue(this.value);
        this.updateUnit();
      },
      countUp: function() {
        this.value = Number(this.value) + Number(this.increment, 10);
      },
      countDown: function() {
        this.value = Number(this.value) - Number(this.increment, 10);
      },
      resetCount: function() {
        this.value = 0;
      }
    });
  </script>
</polymer-element>
<polymer-element name="ceci-cowbell" attributes="bellcolor volume backgroundcolor" bellcolor="#FFFFFF" backgroundcolor="#4DB227" volume=".5" extends="ceci-element" assetpath="/bundles/components/component-cowbell/">
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;music&quot;, &quot;audio&quot;, &quot;cowbell&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Plays a cowbell.&quot;,
      &quot;name&quot;: &quot;Cowbell&quot;,
      &quot;broadcasts&quot;: {},
      &quot;listeners&quot;: {
        &quot;kick&quot;: {
          &quot;description&quot;: &quot;Hits the cowbell!&quot;,
          &quot;label&quot;: &quot;More&quot;,
          &quot;default&quot;: true
        }
      },
      &quot;attributes&quot;: {
        &quot;backgroundcolor&quot;: {
          &quot;label&quot;: &quot;Background Color&quot;,
          &quot;editable&quot;: &quot;color&quot;
        },
        &quot;volume&quot;: {
          &quot;label&quot;: &quot;Volume&quot;,
          &quot;editable&quot;: &quot;number&quot;,
          &quot;min&quot; : 0,
          &quot;max&quot; : 1
        },
        &quot;bellcolor&quot;: {
          &quot;label&quot;: &quot;Cowbell Color&quot;,
          &quot;description&quot;: &quot;Color of the drum.&quot;,
          &quot;editable&quot;: &quot;color&quot;
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  background: orange;
}

:host #wrapper {
  height: 75px;
  display: block;
  cursor: pointer;
  overflow: hidden;
  width: 100%;
  position: relative;
}

:host #bell {
  position: absolute;
  left: calc(50% - 75px);
  width: 50px;
  top: -20px;
  border-bottom: 100px solid white;
  border-left: 50px solid transparent;
  border-right: 50px solid transparent;
}

:host .hit #bell {
  -webkit-transform: scale(1.2);
  -moz-transform: scale(1.2);
  transform: scale(1.2);
}

:host audio {
  display: none;
}
</style>
    <div id="wrapper" class="off" on-ceci-pressdown="{{kickon}}" on-ceci-pressup="{{kickoff}}">
      <div id="bell"></div>
    </div>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-cowbell', {
      audioBuffer: null,
      ready: function () {
        this.super();

        this.ctx = window.AudioContext || window.webkitAudioContext;

        if (!this.ctx) {
          console.error('Could not get AudioContext for kickdrum.');
          return;
        }

        this.ctx = new this.ctx();
        var that = this;
        var xhr = new XMLHttpRequest();
        xhr.open("GET", this.resolvePath('sounds/sound.mp3'), true);
        xhr.responseType = "arraybuffer";
        xhr.onload = function () {
          if (xhr.response.byteLength) {
            that.ctx.decodeAudioData(xhr.response, function(data) {
              that.audioBuffer = data;
            },
            function (e) {
              console.error('Error decoding the audio buffer for kickdrum.', arguments);
            });
          }
        };
        xhr.send();
      },
      kickon: function () {
        var src = this.ctx.createBufferSource();
        var gain = this.ctx.createGain();
        gain.gain.value = this.volume;
        src.buffer = this.audioBuffer;
        src.loop = false;
        src.connect(gain);
        gain.connect(this.ctx.destination);
        src.start(0);
        this.$.wrapper.classList.add("hit");
      },
      kick : function(){
        this.kickon();
        var that = this;
        window.setTimeout(function(){
          that.kickoff();
        },100);
      },
      kickoff : function(){
        this.$.wrapper.classList.remove("hit");
      },
      backgroundcolorChanged: function (oldValue, newValue) {
        this.$.wrapper.style.background = newValue;
      },
      bellcolorChanged: function (oldValue, newValue) {
        this.$.bell.style.borderBottom = "solid 100px " + newValue;
      }
    });
  </script>
</polymer-element>
<polymer-element name="ceci-counter" extends="ceci-element" attributes="unit increment value" assetpath="/bundles/components/component-counter/">
  <ceci-definition>
    {
      &quot;name&quot;: &quot;Counter&quot;,
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Counts up and down by any increment.&quot;,
      &quot;broadcasts&quot;: {
        &quot;currentCount&quot;: {
          &quot;label&quot;: &quot;Current Count&quot;,
          &quot;description&quot;: &quot;Broadcasts the current count.&quot;
        }
      },
      &quot;listeners&quot;: {
        &quot;countUp&quot;: {
          &quot;description&quot;: &quot;Increment the total by the increment value&quot;,
          &quot;label&quot;: &quot;Count Up!&quot;,
          &quot;default&quot; : true
        },
        &quot;countDown&quot;: {
          &quot;description&quot;: &quot;Decrement the total by the increment value&quot;,
          &quot;label&quot;: &quot;Count Down&quot;
        },
        &quot;resetCount&quot;: {
          &quot;description&quot;: &quot;Reset the total to 0.&quot;,
          &quot;label&quot;: &quot;Reset Count&quot;
        }
      },
      &quot;attributes&quot;: {
        &quot;unit&quot;: {
          &quot;description&quot;: &quot;Name for items which are being counted.&quot;,
          &quot;label&quot;: &quot;Unit&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;increment&quot;: {
          &quot;description&quot;: &quot;Count up or down with this number.&quot;,
          &quot;label&quot;: &quot;Increment By&quot;,
          &quot;editable&quot;: &quot;number&quot;,
          &quot;min&quot; : 1
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host .counter {
  text-align: center;
  font-size: 16px;
  padding: 8px 0px;
  background: #DDD;
  color: #666;
}

:host .counter .count-wrapper {
  display: inline-block;
  background: white;
  padding: 5px 12px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  border: solid 1px #CCC;
  border-width: 1px 1px 2px 1px;
}
</style>
    <div class="counter">
      <div class="count-wrapper">
        <span class="count">{{value}}</span>
        <span class="count-label">{{displayUnit}}</span>
      </div>
    </div>
    <shadow></shadow>
  </template>
  <tags>starter,math</tags>
    <script>
      Polymer("ceci-counter", {
        ready: function() {
          this.increment = Number(this.increment) || 1;
          this.value = Number(this.value) || 0;
          this.super();
          this.displayUnit = this.unit;
          this.updateUnit();
        },
        value: 0,
        increment: 1,
        unit: 'Sprocket',
        incrementChanged: function(oldValue, newValue) {
          this.increment = Number(this.increment) || 0;
        },
        updateUnit : function(){
          if (this.unit) {
            var unit = this.unit.trim();
            if (unit.length > 0) {

              var pluralChar = "";
              if((Number(this.value) !== 1) && (unit[unit.length - 1] !== 's')){
                pluralChar = "s";
              }

              if(unit[unit.length - 1] === unit[unit.length - 1].toUpperCase()) {
                pluralChar = pluralChar.toUpperCase()
              }
              this.displayUnit = " " + unit + pluralChar;
            }
          }
        },
        unitChanged: function() {
          this.updateUnit();
        },
        valueChanged: function() {
          this.broadcast("currentCount", this.value);
          this.updateUnit();
        },
        countUp: function() {
          this.value = Number(this.value) + Number(this.increment, 10);
        },
        countDown: function() {
          this.value = Number(this.value) - Number(this.increment, 10);
        },
        resetCount: function() {
          this.value = 0;
        }
      });
    </script>
</polymer-element>
<polymer-element name="ceci-combiner" extends="ceci-element" assetpath="/bundles/components/component-combiner/">
  <template>
    <style>:host, :host .combiner {
  display: block;
  width: 100%;
  height: 50px;
}

:host .combiner {
  background: url(/bundles/components/component-combiner/thumbnail.png) black no-repeat center;
}
</style>
    <div class="combiner"></div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;component-combiner&quot;, &quot;combiner&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Combines signals from multiple channels and broadcasts them on a single channel.&quot;,
      &quot;name&quot;: &quot;Channel Combiner&quot;,
      &quot;broadcasts&quot;: {
        &quot;output&quot;: {
          &quot;label&quot;: &quot;Output&quot;,
          &quot;description&quot;: &quot;Repeats input&quot;,
          &quot;default&quot;: true
        }
      },
      &quot;listeners&quot;: {
        &quot;input1&quot;: {
          &quot;description&quot;: &quot;Input 1&quot;,
          &quot;label&quot;: &quot;Input 1&quot;,
          &quot;default&quot;: &quot;green&quot;
        },
        &quot;input2&quot;: {
          &quot;description&quot;: &quot;Input 2&quot;,
          &quot;label&quot;: &quot;Input 2&quot;,
          &quot;default&quot;: &quot;red&quot;
        },
        &quot;input3&quot;: {
          &quot;description&quot;: &quot;Input 3&quot;,
          &quot;label&quot;: &quot;Input 3&quot;
        },
        &quot;input4&quot;: {
          &quot;description&quot;: &quot;Input 4&quot;,
          &quot;label&quot;: &quot;Input 4&quot;
        },
        &quot;input5&quot;: {
          &quot;description&quot;: &quot;Input 5&quot;,
          &quot;label&quot;: &quot;Input 5&quot;
        },
        &quot;input6&quot;: {
          &quot;description&quot;: &quot;Input 6&quot;,
          &quot;label&quot;: &quot;Input 6&quot;
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-combiner', {
      ready: function () {
        this.super();

        var i = 0;
        while (i++ < Object.keys(this.ceci.listeners).length) {
          this['input' + i] = this.input;
        }
      },
      input: function(val) {
        this.broadcast('output', val);
      }
    });
  </script>
</polymer-element>

<polymer-element name="ceci-chat-window" attributes="username room" extends="ceci-element" username="Anonymous" room="Mozilla" assetpath="/bundles/components/component-chat-window/">
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;chat&quot;, &quot;social&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Connects you to a simple chat room.&quot;,
      &quot;name&quot;: &quot;Chat Room&quot;,
      &quot;broadcasts&quot;: {
        &quot;messageposted&quot;: {
          &quot;label&quot;: &quot;Message posted&quot;,
          &quot;description&quot;: &quot;Occurs when a message is posted in the chatroom.&quot;,
          &quot;default&quot;: &quot;green&quot;
        }
      },
      &quot;listeners&quot;: {
        &quot;clear&quot;: {
          &quot;description&quot;: &quot;Clear all messages from the chat room&quot;,
          &quot;label&quot;: &quot;Clear&quot;
        },
        &quot;sendMessage&quot;: {
          &quot;default&quot;: true,
          &quot;description&quot;: &quot;Send a message to the chat room&quot;,
          &quot;label&quot;: &quot;Send message&quot;
        }
      },
      &quot;attributes&quot;: {
        &quot;username&quot;: {
          &quot;description&quot;: &quot;A username to send messages as&quot;,
          &quot;editable&quot;: &quot;text&quot;,
          &quot;label&quot;: &quot;Username&quot;,
          &quot;listener&quot;: true
        },
        &quot;room&quot;: {
          &quot;description&quot;: &quot;A chat room to send messages to&quot;,
          &quot;editable&quot;: &quot;text&quot;,
          &quot;label&quot;: &quot;Room&quot;,
          &quot;listener&quot;: true
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  position: relative;
}

:host header {
  background: #333;
  padding: 1.5rem;
  color: white;
}

:host header h1 {
  text-align: left;
  font-size: 1.6rem;
  color: #DDD;
  font-weight: 400;
}

:host header .room-name-wrapper {
  float: right;
  color: #999;
  font-size: 1.4rem;
}

:host ul {
  margin: 0;
  padding: 1rem 1.5rem;
  list-style-type: none;
  border-top: 1px solid #ccc;
  height: 200px;
  top: 7.5rem;
  bottom: 0;
  left: 1rem;
  right: 1rem;
  overflow-y: auto;
  overflow-x: hidden;
}

:host li {
  font-size: 1.2rem;
  font-family: "FiraSans", sans-serif;
  padding: 0.1rem 0rem;
  color: #777;
}

:host li:last-child {
  border: none;
}
</style>
    <header>
      <h1><span id="chatRoom"></span><span class="room-name-wrapper"><span id="roomName"></span> <span class="room-name">{{room}}</span></span></h1>
    </header>
    <ul id="messages"></ul>
    <shadow></shadow>
  </template>
  <script>
    var defaultAppID = 'appmaker';

    Polymer("ceci-chat-window", {
      "chatRoom": "Chat Room",
      "roomName": "Room:",
      ready: function() {
        this.super();

        this.$.chatRoom.textContent = this.gettext("ceci-chat-window/chatRoom") || this.chatRoom;
        this.$.roomName.textContent = this.gettext("ceci-chat-window/roomName") || this.roomName;

        if (!window.Firebase) {
          var script = document.createElement("script");
          script.onload = this._connect.bind(this);
          script.src = "https://cdn.firebase.com/v0/firebase.js";
          document.head.appendChild(script);
          return;
        }

        this._db = null;
        this._connect();
      },
      clear: function () {
        this._clear();
      },
      usernameChanged: function(oldValue, newValue) {
        if (oldValue && oldValue != 'null'){
          this._sendMessage(
            oldValue + " " +
            this.gettext("ceci-chat-window/is now known as") + " " +
            newValue
          );
        }
      },
      roomChanged: function(oldValue, newValue) {
        this._connect();
      },
      sendMessage: function(event) {
        this._sendMessage(this.username + ": " + event);
      },
      _clear: function() {
        if (!window.Firebase) {
          return;
        }

        this._db.remove();
      },
      _connect: function() {
        if (!window.Firebase) {
          return;
        }
        if(this.__prevQuery) {
          this.__prevQuery.off("child_added");
          this.__prevQuery.off("child_removed");
        }

        this._db = new Firebase("https://appmaker.firebaseio.com/" + defaultAppID + "/chat-window/" + this.room);

        var query = this._db.limit(20);
        query.on("child_added", function(snapshot) {
          var li = document.createElement("li");
          li.textContent = snapshot.val().message;
          li.setAttribute("id", "chat-message-" + snapshot.name().substr(1));
          this.$.messages.appendChild(li);
          this.broadcast('messageposted', snapshot.val().message);
          this.$.messages.scrollTop = this.$.messages.scrollHeight;
        }.bind(this));
        query.on("child_removed", function(snapshot) {
          var messageElement = document.getElementById("chat-message-" + snapshot.name().substr(1));
          if (messageElement) {
            messageElement.remove();
            this.$.messages.scrollTop = this.$.messages.scrollHeight;
          }
        }.bind(this));
        this.__prevQuery = query;
      },
      _sendMessage: function(msg) {
        if (!window.Firebase) {
          return;
        }

        this._db.push({message: msg});
      }
    });
  </script>
</polymer-element>
<polymer-element name="ceci-chart" collectionname="times" extends="ceci-element" attributes="unit increment value collectionname" assetpath="/bundles/components/component-chart/">
  <script>var Chart=function(s){function v(a,c,b){a=A((a-c.graphMin)/(c.steps*c.stepValue),1,0);return b*c.steps*a}function x(a,c,b,e){function h(){g+=f;var k=a.animation?A(d(g),null,0):1;e.clearRect(0,0,q,u);a.scaleOverlay?(b(k),c()):(c(),b(k));if(1>=g)D(h);else if("function"==typeof a.onAnimationComplete)a.onAnimationComplete()}var f=a.animation?1/A(a.animationSteps,Number.MAX_VALUE,1):1,d=B[a.animationEasing],g=a.animation?0:1;"function"!==typeof c&&(c=function(){});D(h)}function C(a,c,b,e,h,f){var d;a=
Math.floor(Math.log(e-h)/Math.LN10);h=Math.floor(h/(1*Math.pow(10,a)))*Math.pow(10,a);e=Math.ceil(e/(1*Math.pow(10,a)))*Math.pow(10,a)-h;a=Math.pow(10,a);for(d=Math.round(e/a);d<b||d>c;)a=d<b?a/2:2*a,d=Math.round(e/a);c=[];z(f,c,d,h,a);return{steps:d,stepValue:a,graphMin:h,labels:c}}function z(a,c,b,e,h){if(a)for(var f=1;f<b+1;f++)c.push(E(a,{value:(e+h*f).toFixed(0!=h%1?h.toString().split(".")[1].length:0)}))}function A(a,c,b){return!isNaN(parseFloat(c))&&isFinite(c)&&a>c?c:!isNaN(parseFloat(b))&&
isFinite(b)&&a<b?b:a}function y(a,c){var b={},e;for(e in a)b[e]=a[e];for(e in c)b[e]=c[e];return b}function E(a,c){var b=!/\W/.test(a)?F[a]=F[a]||E(document.getElementById(a).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return c?
b(c):b}var r=this,B={linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return-1*a*(a-2)},easeInOutQuad:function(a){return 1>(a/=0.5)?0.5*a*a:-0.5*(--a*(a-2)-1)},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return 1*((a=a/1-1)*a*a+1)},easeInOutCubic:function(a){return 1>(a/=0.5)?0.5*a*a*a:0.5*((a-=2)*a*a+2)},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return-1*((a=a/1-1)*a*a*a-1)},easeInOutQuart:function(a){return 1>(a/=0.5)?
0.5*a*a*a*a:-0.5*((a-=2)*a*a*a-2)},easeInQuint:function(a){return 1*(a/=1)*a*a*a*a},easeOutQuint:function(a){return 1*((a=a/1-1)*a*a*a*a+1)},easeInOutQuint:function(a){return 1>(a/=0.5)?0.5*a*a*a*a*a:0.5*((a-=2)*a*a*a*a+2)},easeInSine:function(a){return-1*Math.cos(a/1*(Math.PI/2))+1},easeOutSine:function(a){return 1*Math.sin(a/1*(Math.PI/2))},easeInOutSine:function(a){return-0.5*(Math.cos(Math.PI*a/1)-1)},easeInExpo:function(a){return 0==a?1:1*Math.pow(2,10*(a/1-1))},easeOutExpo:function(a){return 1==
a?1:1*(-Math.pow(2,-10*a/1)+1)},easeInOutExpo:function(a){return 0==a?0:1==a?1:1>(a/=0.5)?0.5*Math.pow(2,10*(a-1)):0.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return 1<=a?a:-1*(Math.sqrt(1-(a/=1)*a)-1)},easeOutCirc:function(a){return 1*Math.sqrt(1-(a=a/1-1)*a)},easeInOutCirc:function(a){return 1>(a/=0.5)?-0.5*(Math.sqrt(1-a*a)-1):0.5*(Math.sqrt(1-(a-=2)*a)+1)},easeInElastic:function(a){var c=1.70158,b=0,e=1;if(0==a)return 0;if(1==(a/=1))return 1;b||(b=0.3);e<Math.abs(1)?(e=1,c=b/4):c=b/(2*
Math.PI)*Math.asin(1/e);return-(e*Math.pow(2,10*(a-=1))*Math.sin((1*a-c)*2*Math.PI/b))},easeOutElastic:function(a){var c=1.70158,b=0,e=1;if(0==a)return 0;if(1==(a/=1))return 1;b||(b=0.3);e<Math.abs(1)?(e=1,c=b/4):c=b/(2*Math.PI)*Math.asin(1/e);return e*Math.pow(2,-10*a)*Math.sin((1*a-c)*2*Math.PI/b)+1},easeInOutElastic:function(a){var c=1.70158,b=0,e=1;if(0==a)return 0;if(2==(a/=0.5))return 1;b||(b=1*0.3*1.5);e<Math.abs(1)?(e=1,c=b/4):c=b/(2*Math.PI)*Math.asin(1/e);return 1>a?-0.5*e*Math.pow(2,10*
(a-=1))*Math.sin((1*a-c)*2*Math.PI/b):0.5*e*Math.pow(2,-10*(a-=1))*Math.sin((1*a-c)*2*Math.PI/b)+1},easeInBack:function(a){return 1*(a/=1)*a*(2.70158*a-1.70158)},easeOutBack:function(a){return 1*((a=a/1-1)*a*(2.70158*a+1.70158)+1)},easeInOutBack:function(a){var c=1.70158;return 1>(a/=0.5)?0.5*a*a*(((c*=1.525)+1)*a-c):0.5*((a-=2)*a*(((c*=1.525)+1)*a+c)+2)},easeInBounce:function(a){return 1-B.easeOutBounce(1-a)},easeOutBounce:function(a){return(a/=1)<1/2.75?1*7.5625*a*a:a<2/2.75?1*(7.5625*(a-=1.5/2.75)*
a+0.75):a<2.5/2.75?1*(7.5625*(a-=2.25/2.75)*a+0.9375):1*(7.5625*(a-=2.625/2.75)*a+0.984375)},easeInOutBounce:function(a){return 0.5>a?0.5*B.easeInBounce(2*a):0.5*B.easeOutBounce(2*a-1)+0.5}},q=s.canvas.width,u=s.canvas.height;window.devicePixelRatio&&(s.canvas.style.width=q+"px",s.canvas.style.height=u+"px",s.canvas.height=u*window.devicePixelRatio,s.canvas.width=q*window.devicePixelRatio,s.scale(window.devicePixelRatio,window.devicePixelRatio));this.PolarArea=function(a,c){r.PolarArea.defaults={scaleOverlay:!0,
scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",
animateRotate:!0,animateScale:!1,onAnimationComplete:null};var b=c?y(r.PolarArea.defaults,c):r.PolarArea.defaults;return new G(a,b,s)};this.Radar=function(a,c){r.Radar.defaults={scaleOverlay:!1,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!1,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",
scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,angleShowLineOut:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:12,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null};var b=c?y(r.Radar.defaults,c):r.Radar.defaults;return new H(a,b,s)};this.Pie=function(a,
c){r.Pie.defaults={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null};var b=c?y(r.Pie.defaults,c):r.Pie.defaults;return new I(a,b,s)};this.Doughnut=function(a,c){r.Doughnut.defaults={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,
onAnimationComplete:null};var b=c?y(r.Doughnut.defaults,c):r.Doughnut.defaults;return new J(a,b,s)};this.Line=function(a,c){r.Line.defaults={scaleOverlay:!1,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,
pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:2,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null};var b=c?y(r.Line.defaults,c):r.Line.defaults;return new K(a,b,s)};this.Bar=function(a,c){r.Bar.defaults={scaleOverlay:!1,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",
scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null};var b=c?y(r.Bar.defaults,c):r.Bar.defaults;return new L(a,b,s)};var G=function(a,c,b){var e,h,f,d,g,k,j,l,m;g=Math.min.apply(Math,[q,u])/2;g-=Math.max.apply(Math,[0.5*c.scaleFontSize,0.5*c.scaleLineWidth]);
d=2*c.scaleFontSize;c.scaleShowLabelBackdrop&&(d+=2*c.scaleBackdropPaddingY,g-=1.5*c.scaleBackdropPaddingY);l=g;d=d?d:5;e=Number.MIN_VALUE;h=Number.MAX_VALUE;for(f=0;f<a.length;f++)a[f].value>e&&(e=a[f].value),a[f].value<h&&(h=a[f].value);f=Math.floor(l/(0.66*d));d=Math.floor(0.5*(l/d));m=c.scaleShowLabels?c.scaleLabel:null;c.scaleOverride?(j={steps:c.scaleSteps,stepValue:c.scaleStepWidth,graphMin:c.scaleStartValue,labels:[]},z(m,j.labels,j.steps,c.scaleStartValue,c.scaleStepWidth)):j=C(l,f,d,e,h,
m);k=g/j.steps;x(c,function(){for(var a=0;a<j.steps;a++)if(c.scaleShowLine&&(b.beginPath(),b.arc(q/2,u/2,k*(a+1),0,2*Math.PI,!0),b.strokeStyle=c.scaleLineColor,b.lineWidth=c.scaleLineWidth,b.stroke()),c.scaleShowLabels){b.textAlign="center";b.font=c.scaleFontStyle+" "+c.scaleFontSize+"px "+c.scaleFontFamily;var e=j.labels[a];if(c.scaleShowLabelBackdrop){var d=b.measureText(e).width;b.fillStyle=c.scaleBackdropColor;b.beginPath();b.rect(Math.round(q/2-d/2-c.scaleBackdropPaddingX),Math.round(u/2-k*(a+
1)-0.5*c.scaleFontSize-c.scaleBackdropPaddingY),Math.round(d+2*c.scaleBackdropPaddingX),Math.round(c.scaleFontSize+2*c.scaleBackdropPaddingY));b.fill()}b.textBaseline="middle";b.fillStyle=c.scaleFontColor;b.fillText(e,q/2,u/2-k*(a+1))}},function(e){var d=-Math.PI/2,g=2*Math.PI/a.length,f=1,h=1;c.animation&&(c.animateScale&&(f=e),c.animateRotate&&(h=e));for(e=0;e<a.length;e++)b.beginPath(),b.arc(q/2,u/2,f*v(a[e].value,j,k),d,d+h*g,!1),b.lineTo(q/2,u/2),b.closePath(),b.fillStyle=a[e].color,b.fill(),
c.segmentShowStroke&&(b.strokeStyle=c.segmentStrokeColor,b.lineWidth=c.segmentStrokeWidth,b.stroke()),d+=h*g},b)},H=function(a,c,b){var e,h,f,d,g,k,j,l,m;a.labels||(a.labels=[]);g=Math.min.apply(Math,[q,u])/2;d=2*c.scaleFontSize;for(e=l=0;e<a.labels.length;e++)b.font=c.pointLabelFontStyle+" "+c.pointLabelFontSize+"px "+c.pointLabelFontFamily,h=b.measureText(a.labels[e]).width,h>l&&(l=h);g-=Math.max.apply(Math,[l,1.5*(c.pointLabelFontSize/2)]);g-=c.pointLabelFontSize;l=g=A(g,null,0);d=d?d:5;e=Number.MIN_VALUE;
h=Number.MAX_VALUE;for(f=0;f<a.datasets.length;f++)for(m=0;m<a.datasets[f].data.length;m++)a.datasets[f].data[m]>e&&(e=a.datasets[f].data[m]),a.datasets[f].data[m]<h&&(h=a.datasets[f].data[m]);f=Math.floor(l/(0.66*d));d=Math.floor(0.5*(l/d));m=c.scaleShowLabels?c.scaleLabel:null;c.scaleOverride?(j={steps:c.scaleSteps,stepValue:c.scaleStepWidth,graphMin:c.scaleStartValue,labels:[]},z(m,j.labels,j.steps,c.scaleStartValue,c.scaleStepWidth)):j=C(l,f,d,e,h,m);k=g/j.steps;x(c,function(){var e=2*Math.PI/
a.datasets[0].data.length;b.save();b.translate(q/2,u/2);if(c.angleShowLineOut){b.strokeStyle=c.angleLineColor;b.lineWidth=c.angleLineWidth;for(var d=0;d<a.datasets[0].data.length;d++)b.rotate(e),b.beginPath(),b.moveTo(0,0),b.lineTo(0,-g),b.stroke()}for(d=0;d<j.steps;d++){b.beginPath();if(c.scaleShowLine){b.strokeStyle=c.scaleLineColor;b.lineWidth=c.scaleLineWidth;b.moveTo(0,-k*(d+1));for(var f=0;f<a.datasets[0].data.length;f++)b.rotate(e),b.lineTo(0,-k*(d+1));b.closePath();b.stroke()}c.scaleShowLabels&&
(b.textAlign="center",b.font=c.scaleFontStyle+" "+c.scaleFontSize+"px "+c.scaleFontFamily,b.textBaseline="middle",c.scaleShowLabelBackdrop&&(f=b.measureText(j.labels[d]).width,b.fillStyle=c.scaleBackdropColor,b.beginPath(),b.rect(Math.round(-f/2-c.scaleBackdropPaddingX),Math.round(-k*(d+1)-0.5*c.scaleFontSize-c.scaleBackdropPaddingY),Math.round(f+2*c.scaleBackdropPaddingX),Math.round(c.scaleFontSize+2*c.scaleBackdropPaddingY)),b.fill()),b.fillStyle=c.scaleFontColor,b.fillText(j.labels[d],0,-k*(d+
1)))}for(d=0;d<a.labels.length;d++){b.font=c.pointLabelFontStyle+" "+c.pointLabelFontSize+"px "+c.pointLabelFontFamily;b.fillStyle=c.pointLabelFontColor;var f=Math.sin(e*d)*(g+c.pointLabelFontSize),h=Math.cos(e*d)*(g+c.pointLabelFontSize);b.textAlign=e*d==Math.PI||0==e*d?"center":e*d>Math.PI?"right":"left";b.textBaseline="middle";b.fillText(a.labels[d],f,-h)}b.restore()},function(d){var e=2*Math.PI/a.datasets[0].data.length;b.save();b.translate(q/2,u/2);for(var g=0;g<a.datasets.length;g++){b.beginPath();
b.moveTo(0,d*-1*v(a.datasets[g].data[0],j,k));for(var f=1;f<a.datasets[g].data.length;f++)b.rotate(e),b.lineTo(0,d*-1*v(a.datasets[g].data[f],j,k));b.closePath();b.fillStyle=a.datasets[g].fillColor;b.strokeStyle=a.datasets[g].strokeColor;b.lineWidth=c.datasetStrokeWidth;b.fill();b.stroke();if(c.pointDot){b.fillStyle=a.datasets[g].pointColor;b.strokeStyle=a.datasets[g].pointStrokeColor;b.lineWidth=c.pointDotStrokeWidth;for(f=0;f<a.datasets[g].data.length;f++)b.rotate(e),b.beginPath(),b.arc(0,d*-1*
v(a.datasets[g].data[f],j,k),c.pointDotRadius,2*Math.PI,!1),b.fill(),b.stroke()}b.rotate(e)}b.restore()},b)},I=function(a,c,b){for(var e=0,h=Math.min.apply(Math,[u/2,q/2])-5,f=0;f<a.length;f++)e+=a[f].value;x(c,null,function(d){var g=-Math.PI/2,f=1,j=1;c.animation&&(c.animateScale&&(f=d),c.animateRotate&&(j=d));for(d=0;d<a.length;d++){var l=j*a[d].value/e*2*Math.PI;b.beginPath();b.arc(q/2,u/2,f*h,g,g+l);b.lineTo(q/2,u/2);b.closePath();b.fillStyle=a[d].color;b.fill();c.segmentShowStroke&&(b.lineWidth=
c.segmentStrokeWidth,b.strokeStyle=c.segmentStrokeColor,b.stroke());g+=l}},b)},J=function(a,c,b){for(var e=0,h=Math.min.apply(Math,[u/2,q/2])-5,f=h*(c.percentageInnerCutout/100),d=0;d<a.length;d++)e+=a[d].value;x(c,null,function(d){var k=-Math.PI/2,j=1,l=1;c.animation&&(c.animateScale&&(j=d),c.animateRotate&&(l=d));for(d=0;d<a.length;d++){var m=l*a[d].value/e*2*Math.PI;b.beginPath();b.arc(q/2,u/2,j*h,k,k+m,!1);b.arc(q/2,u/2,j*f,k+m,k,!0);b.closePath();b.fillStyle=a[d].color;b.fill();c.segmentShowStroke&&
(b.lineWidth=c.segmentStrokeWidth,b.strokeStyle=c.segmentStrokeColor,b.stroke());k+=m}},b)},K=function(a,c,b){var e,h,f,d,g,k,j,l,m,t,r,n,p,s=0;g=u;b.font=c.scaleFontStyle+" "+c.scaleFontSize+"px "+c.scaleFontFamily;t=1;for(d=0;d<a.labels.length;d++)e=b.measureText(a.labels[d]).width,t=e>t?e:t;q/a.labels.length<t?(s=45,q/a.labels.length<Math.cos(s)*t?(s=90,g-=t):g-=Math.sin(s)*t):g-=c.scaleFontSize;d=c.scaleFontSize;g=g-5-d;e=Number.MIN_VALUE;h=Number.MAX_VALUE;for(f=0;f<a.datasets.length;f++)for(l=
0;l<a.datasets[f].data.length;l++)a.datasets[f].data[l]>e&&(e=a.datasets[f].data[l]),a.datasets[f].data[l]<h&&(h=a.datasets[f].data[l]);f=Math.floor(g/(0.66*d));d=Math.floor(0.5*(g/d));l=c.scaleShowLabels?c.scaleLabel:"";c.scaleOverride?(j={steps:c.scaleSteps,stepValue:c.scaleStepWidth,graphMin:c.scaleStartValue,labels:[]},z(l,j.labels,j.steps,c.scaleStartValue,c.scaleStepWidth)):j=C(g,f,d,e,h,l);k=Math.floor(g/j.steps);d=1;if(c.scaleShowLabels){b.font=c.scaleFontStyle+" "+c.scaleFontSize+"px "+c.scaleFontFamily;
for(e=0;e<j.labels.length;e++)h=b.measureText(j.labels[e]).width,d=h>d?h:d;d+=10}r=q-d-t;m=Math.floor(r/(a.labels.length-1));n=q-t/2-r;p=g+c.scaleFontSize/2;x(c,function(){b.lineWidth=c.scaleLineWidth;b.strokeStyle=c.scaleLineColor;b.beginPath();b.moveTo(q-t/2+5,p);b.lineTo(q-t/2-r-5,p);b.stroke();0<s?(b.save(),b.textAlign="right"):b.textAlign="center";b.fillStyle=c.scaleFontColor;for(var d=0;d<a.labels.length;d++)b.save(),0<s?(b.translate(n+d*m,p+c.scaleFontSize),b.rotate(-(s*(Math.PI/180))),b.fillText(a.labels[d],
0,0),b.restore()):b.fillText(a.labels[d],n+d*m,p+c.scaleFontSize+3),b.beginPath(),b.moveTo(n+d*m,p+3),c.scaleShowGridLines&&0<d?(b.lineWidth=c.scaleGridLineWidth,b.strokeStyle=c.scaleGridLineColor,b.lineTo(n+d*m,5)):b.lineTo(n+d*m,p+3),b.stroke();b.lineWidth=c.scaleLineWidth;b.strokeStyle=c.scaleLineColor;b.beginPath();b.moveTo(n,p+5);b.lineTo(n,5);b.stroke();b.textAlign="right";b.textBaseline="middle";for(d=0;d<j.steps;d++)b.beginPath(),b.moveTo(n-3,p-(d+1)*k),c.scaleShowGridLines?(b.lineWidth=c.scaleGridLineWidth,
b.strokeStyle=c.scaleGridLineColor,b.lineTo(n+r+5,p-(d+1)*k)):b.lineTo(n-0.5,p-(d+1)*k),b.stroke(),c.scaleShowLabels&&b.fillText(j.labels[d],n-8,p-(d+1)*k)},function(d){function e(b,c){return p-d*v(a.datasets[b].data[c],j,k)}for(var f=0;f<a.datasets.length;f++){b.strokeStyle=a.datasets[f].strokeColor;b.lineWidth=c.datasetStrokeWidth;b.beginPath();b.moveTo(n,p-d*v(a.datasets[f].data[0],j,k));for(var g=1;g<a.datasets[f].data.length;g++)c.bezierCurve?b.bezierCurveTo(n+m*(g-0.5),e(f,g-1),n+m*(g-0.5),
e(f,g),n+m*g,e(f,g)):b.lineTo(n+m*g,e(f,g));b.stroke();c.datasetFill?(b.lineTo(n+m*(a.datasets[f].data.length-1),p),b.lineTo(n,p),b.closePath(),b.fillStyle=a.datasets[f].fillColor,b.fill()):b.closePath();if(c.pointDot){b.fillStyle=a.datasets[f].pointColor;b.strokeStyle=a.datasets[f].pointStrokeColor;b.lineWidth=c.pointDotStrokeWidth;for(g=0;g<a.datasets[f].data.length;g++)b.beginPath(),b.arc(n+m*g,p-d*v(a.datasets[f].data[g],j,k),c.pointDotRadius,0,2*Math.PI,!0),b.fill(),b.stroke()}}},b)},L=function(a,
c,b){var e,h,f,d,g,k,j,l,m,t,r,n,p,s,w=0;g=u;b.font=c.scaleFontStyle+" "+c.scaleFontSize+"px "+c.scaleFontFamily;t=1;for(d=0;d<a.labels.length;d++)e=b.measureText(a.labels[d]).width,t=e>t?e:t;q/a.labels.length<t?(w=45,q/a.labels.length<Math.cos(w)*t?(w=90,g-=t):g-=Math.sin(w)*t):g-=c.scaleFontSize;d=c.scaleFontSize;g=g-5-d;e=Number.MIN_VALUE;h=Number.MAX_VALUE;for(f=0;f<a.datasets.length;f++)for(l=0;l<a.datasets[f].data.length;l++)a.datasets[f].data[l]>e&&(e=a.datasets[f].data[l]),a.datasets[f].data[l]<
h&&(h=a.datasets[f].data[l]);f=Math.floor(g/(0.66*d));d=Math.floor(0.5*(g/d));l=c.scaleShowLabels?c.scaleLabel:"";c.scaleOverride?(j={steps:c.scaleSteps,stepValue:c.scaleStepWidth,graphMin:c.scaleStartValue,labels:[]},z(l,j.labels,j.steps,c.scaleStartValue,c.scaleStepWidth)):j=C(g,f,d,e,h,l);k=Math.floor(g/j.steps);d=1;if(c.scaleShowLabels){b.font=c.scaleFontStyle+" "+c.scaleFontSize+"px "+c.scaleFontFamily;for(e=0;e<j.labels.length;e++)h=b.measureText(j.labels[e]).width,d=h>d?h:d;d+=10}r=q-d-t;m=
Math.floor(r/a.labels.length);s=(m-2*c.scaleGridLineWidth-2*c.barValueSpacing-(c.barDatasetSpacing*a.datasets.length-1)-(c.barStrokeWidth/2*a.datasets.length-1))/a.datasets.length;n=q-t/2-r;p=g+c.scaleFontSize/2;x(c,function(){b.lineWidth=c.scaleLineWidth;b.strokeStyle=c.scaleLineColor;b.beginPath();b.moveTo(q-t/2+5,p);b.lineTo(q-t/2-r-5,p);b.stroke();0<w?(b.save(),b.textAlign="right"):b.textAlign="center";b.fillStyle=c.scaleFontColor;for(var d=0;d<a.labels.length;d++)b.save(),0<w?(b.translate(n+
d*m,p+c.scaleFontSize),b.rotate(-(w*(Math.PI/180))),b.fillText(a.labels[d],0,0),b.restore()):b.fillText(a.labels[d],n+d*m+m/2,p+c.scaleFontSize+3),b.beginPath(),b.moveTo(n+(d+1)*m,p+3),b.lineWidth=c.scaleGridLineWidth,b.strokeStyle=c.scaleGridLineColor,b.lineTo(n+(d+1)*m,5),b.stroke();b.lineWidth=c.scaleLineWidth;b.strokeStyle=c.scaleLineColor;b.beginPath();b.moveTo(n,p+5);b.lineTo(n,5);b.stroke();b.textAlign="right";b.textBaseline="middle";for(d=0;d<j.steps;d++)b.beginPath(),b.moveTo(n-3,p-(d+1)*
k),c.scaleShowGridLines?(b.lineWidth=c.scaleGridLineWidth,b.strokeStyle=c.scaleGridLineColor,b.lineTo(n+r+5,p-(d+1)*k)):b.lineTo(n-0.5,p-(d+1)*k),b.stroke(),c.scaleShowLabels&&b.fillText(j.labels[d],n-8,p-(d+1)*k)},function(d){b.lineWidth=c.barStrokeWidth;for(var e=0;e<a.datasets.length;e++){b.fillStyle=a.datasets[e].fillColor;b.strokeStyle=a.datasets[e].strokeColor;for(var f=0;f<a.datasets[e].data.length;f++){var g=n+c.barValueSpacing+m*f+s*e+c.barDatasetSpacing*e+c.barStrokeWidth*e;b.beginPath();
b.moveTo(g,p);b.lineTo(g,p-d*v(a.datasets[e].data[f],j,k)+c.barStrokeWidth/2);b.lineTo(g+s,p-d*v(a.datasets[e].data[f],j,k)+c.barStrokeWidth/2);b.lineTo(g+s,p);c.barShowStroke&&b.stroke();b.closePath();b.fill()}}},b)},D=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)},F={}};</script>
  <ceci-definition>
    {
      &quot;name&quot;: &quot;Line Graph&quot;,
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Shows a line graph of a data set over time.&quot;,
      &quot;tags&quot;: [&quot;asdf&quot;],
      &quot;broadcasts&quot;: {
      },
      &quot;listeners&quot;: {
        &quot;graph&quot;: {
          &quot;description&quot;: &quot;Graphs available data.&quot;,
          &quot;label&quot;: &quot;Graph&quot;,
          &quot;default&quot;: true
        }
      },
      &quot;attributes&quot;: {
        &quot;collectionname&quot;: {
          &quot;description&quot;: &quot;The name of the collection to store the value&quot;,
          &quot;label&quot;: &quot;Collection Name&quot;,
          &quot;editable&quot;: &quot;text&quot;
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host .wrapper {
  width: 100%;
  min-height: 400px;
}

:host canvas {
  height: 400px;
  width: 100%;
}
</style>
    <div class="wrapper">
      <canvas id="canvas" width="310" height="400"></canvas>
    </div>
    <shadow></shadow>
  </template>
  <tags></tags>
  <script>
    Polymer("ceci-chart", {
      ready: function() {
        this.super();
        var canvas = this.$.canvas;
        var ctx = canvas.getContext('2d');
        this.chart = new Chart(ctx);

        localStorage['hack-collection-times'] = JSON.stringify({
          "6/2/2014":20,
          "6/3/2014":20,
          "6/4/2014":23,
          "6/5/2014":25,
          "6/6/2014":30,
          "6/7/2014":32,
          "6/8/2014":35,
          "6/9/2014":36,
          "6/10/2014":33,
          "6/11/2014":25,
          "6/12/2014":34,
          "6/13/2014":60
        });

        this.graph();

      },
      getData: function() {
        var data = JSON.parse(localStorage['hack-collection-' + this.collectionname]);

        var values = [];
        var keys = Object.keys(data);

        for (var i in keys){
          values.push(data[keys[i]]);
        }

        return {
          labels: keys,
          datasets: [
            {
              fillColor: "rgba(54, 171, 42, .6)",
              strokeColor: "rgba(30, 151, 29, 1.0000)",
              data: values
            }
          ]
        };
      },
      getIntegerScaleParameters: function(data) {
        var maxValue = false;
        for (datasetIndex = 0; datasetIndex < data.datasets.length; ++datasetIndex) {
           var setMax = Math.max.apply(null, data.datasets[datasetIndex].data);
           if (maxValue === false || setMax > maxValue) maxValue = setMax;
        }

        var steps = new Number(maxValue);
        var stepWidth = new Number(1);
        if (maxValue > 10) {
           stepWidth = Math.floor(maxValue / 10);
           steps = Math.ceil(maxValue / stepWidth);
        }
        return { animation: false, scaleOverride: true, scaleSteps: steps, scaleStepWidth: stepWidth, scaleStartValue: 0 };
      },
      graph: function() {
        var data = this.getData();
        this.chart.Line(data, this.getIntegerScaleParameters(data));
      }
    });
  </script>
</polymer-element>
<polymer-element name="ceci-channel-gate" attributes="" extends="ceci-element" assetpath="/bundles/components/component-channel-gate/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
  padding: 10px;
  background: #555;
  text-align: center;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
}

:host .output-channel {
  padding: 5px 10px;
  background: #999;
  margin: 0 3px;
  display: inline-block;
  border: solid 2px #555;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
  cursor: pointer;
}

:host .output-channel:not(.next-up):hover {
  background: #AAA;
}

:host .next-up {
  background: white;
  border: solid 2px white;
  font-weight: bold;
}
</style>
    <div id="channels"></div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;alternating-gate&quot;, &quot;low-level&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;name&quot;: &quot;Channel Gate&quot;,
      &quot;description&quot;: &quot;Sends an incoming signal on a broadcast channel of your choosing.&quot;,
      &quot;broadcasts&quot;: {
        &quot;A&quot;: {
          &quot;label&quot;: &quot;Output A&quot;,
          &quot;description&quot;: &quot;The first broadcast in the rotation.&quot;,
          &quot;default&quot;: &quot;green&quot;
        },
        &quot;B&quot;: {
          &quot;label&quot;: &quot;Output B&quot;,
          &quot;description&quot;: &quot;The second broadcast in the rotation.&quot;,
          &quot;default&quot;: &quot;yellow&quot;
        },
        &quot;C&quot;: {
          &quot;label&quot;: &quot;Output C&quot;,
          &quot;description&quot;: &quot;The third broadcast in the rotation.&quot;
        },
        &quot;D&quot;: {
          &quot;label&quot;: &quot;Output D&quot;,
          &quot;description&quot;: &quot;The fourth broadcast in the rotation.&quot;
        },
        &quot;E&quot;: {
          &quot;label&quot;: &quot;Output E&quot;,
          &quot;description&quot;: &quot;The fifth broadcast in the rotation.&quot;
        }
      },
      &quot;listeners&quot;: {
        &quot;input&quot;: {
          &quot;description&quot;: &quot;The input that alternates out the broadcasts.&quot;,
          &quot;label&quot;: &quot;Input&quot;,
          &quot;default&quot;: true
        }
      },
      &quot;attributes&quot;: {}
    }
  </ceci-definition>
  <script>
    Polymer('ceci-channel-gate', {
      nextBroadcast : "",
      ready: function() {
        this.super();
        this.lastBroadcast = null;
      },
      attached : function(){
        this.super();
      },
      domReady: function() {
        var that = this;
        this.onChannelUpdate = function(){
          that.updateChannels();
          that.updateUI();
        };
        window.addEventListener("channelUpdate", this.onChannelUpdate);
        this.updateChannels();
        this.nextBroadcast = this.activeBroadcasts[0];
        this.updateUI();
      },
      detached: function() {
        window.removeEventListener("channelUpdate", this.onChannelUpdate);
      },
      updateUI : function(){
        Array.prototype.forEach.call(this.$.channels.querySelectorAll(".output-channel"), function(c) {
          c.classList.remove("next-up");
        });
        var selected = this.$.channels.querySelector("." + this.nextBroadcast);
        if(selected){
          selected.classList.add("next-up");
        }
      },
      channelClick : function(from){
        this.nextBroadcast = from;
        this.updateUI();
      },
      updateChannels: function(){
        var that = this;
        this.activeBroadcasts = [];
        that.$.channels.textContent = "";
        Array.prototype.forEach.call(this.querySelectorAll("ceci-broadcast"), function(broadcast) {
          that.activeBroadcasts.push(broadcast.getAttribute("from"));
          var channel = document.createElement("div");
          channel.classList.add("output-channel");
          channel.classList.add(broadcast.getAttribute("from"));
          channel.textContent = broadcast.getAttribute("from");
          var from = broadcast.getAttribute("from");
          channel.addEventListener("click",function(){
            that.channelClick(from);
          });
          that.$.channels.appendChild(channel);
        });
      },
      input: function(value) {
        this.broadcast(this.nextBroadcast, value);
      }
    });
  </script>
</polymer-element>
<polymer-element name="ceci-component-canvas" extends="ceci-element" attributes="height pensize readonly imageurl generateonchange" assetpath="/bundles/components/component-canvas/">
  <ceci-definition>
    {
      &quot;name&quot;: &quot;Drawing Canvas&quot;,
      &quot;tags&quot;: [&quot;canvas&quot;,&quot;drawing&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Lets you draw simple images.&quot;,
      &quot;broadcasts&quot;: {
        &quot;imageGenerated&quot;: {
          &quot;label&quot;: &quot;Image Generated&quot;,
          &quot;description&quot;: &quot;A portable image URL was generated&quot;,
          &quot;default&quot;: &quot;green&quot;
        }
      },
      &quot;listeners&quot;: {
        &quot;generateImage&quot;: {
          &quot;label&quot;: &quot;Generate Image&quot;,
          &quot;description&quot;: &quot;Generates a portable image URL from the drawing&quot;
        },
        &quot;reset&quot;: {
          &quot;label&quot;: &quot;Reset&quot;,
          &quot;description&quot;: &quot;Description for reset&quot;
        }
      },
      &quot;attributes&quot;: {
        &quot;generateonchange&quot;: {
          &quot;label&quot;: &quot;Generate on Change&quot;,
          &quot;description&quot;: &quot;Generate image when canvas is changed&quot;,
          &quot;editable&quot;: &quot;boolean&quot;
        },
        &quot;pensize&quot;: {
          &quot;label&quot;: &quot;Pen Size&quot;,
          &quot;description&quot;: &quot;Width of pen used for drawing&quot;,
          &quot;editable&quot;: &quot;number&quot;,
          &quot;min&quot;: 1
        },
        &quot;readonly&quot;: {
          &quot;label&quot;: &quot;Read Only&quot;,
          &quot;description&quot;: &quot;Locks/unlocks drawn content&quot;,
          &quot;editable&quot;: &quot;boolean&quot;
        },
        &quot;height&quot;: {
          &quot;label&quot;: &quot;Height&quot;,
          &quot;description&quot;: &quot;Height of canvas&quot;,
          &quot;editable&quot;: &quot;number&quot;
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  position: relative;
  background-color: #fff;
  background-image: linear-gradient(rgba(201, 210, 248, 0.4) .1em, transparent .1em);
  background-size: 100% 1.2em;
}

:host canvas {
  width: 100%;
  height: 100%;
  cursor: none;
}

:host #cursor {
  background: #000;
  position: absolute;
  cursor: none;
  pointer-events: none;
}
</style>
    <canvas id="canvas"></canvas>
    <div id="cursor" hidden="true"></div>
    <shadow></shadow>
  </template>
    <script>
      function getMousePositionOffset(e, canvas) {
        var rect = canvas.getBoundingClientRect();

        if (e.touches) {
          return [e.touches[0].clientX - rect.left, e.touches[0].clientY - rect.top];
        }
        else if (e.offsetX) {
          return [e.offsetX, e.offsetY];
        }
        else {
          // recover from PointerEvents bug... :/
          return [e.clientX - rect.left, e.clientY - rect.top];
        }
      }

      function enableCanvas (canvas, changedCallback) {
        changedCallback = changedCallback || function () {};

        return function (eMouseDown) {
          var canvas = eMouseDown.target;
          var ctx = canvas.getContext('2d');

          var moved = false;

          var canvasRect = canvas.getBoundingClientRect();
          var startPos = getMousePositionOffset(eMouseDown, canvas);

          ctx.beginPath();
          ctx.moveTo(startPos[0], startPos[1]);

          function onCanvasMouseMove (eMouseMove) {
            var movedPos = getMousePositionOffset(eMouseMove, canvas);
            ctx.lineTo(movedPos[0], movedPos[1]);
            ctx.stroke();
            moved = true;
            eMouseMove.preventDefault();
          }

          function onCanvasMouseUp (eMouseUp) {
            canvas.removeEventListener('mousemove', onCanvasMouseMove, false);
            window.removeEventListener('mouseup', onCanvasMouseUp, false);
            canvas.removeEventListener('touchmove', onCanvasMouseMove, false);
            window.removeEventListener('touchend', onCanvasMouseUp, false);

            if (!moved) {
              ctx.lineTo(startPos[0] + ctx.lineWidth, startPos[1] + ctx.lineWidth);
              ctx.stroke();
            }
            ctx.closePath();
            changedCallback();
          }

          canvas.addEventListener('mousemove', onCanvasMouseMove, false);
          window.addEventListener('mouseup', onCanvasMouseUp, false);
          canvas.addEventListener('touchmove', onCanvasMouseMove, false);
          window.addEventListener('touchend', onCanvasMouseUp, false);
        }
      }

      Polymer("ceci-component-canvas", {
        readonly: 'false',
        pensize: 5,
        height: 100,
        generateonchange: 'false',
        heightChanged: function () {
          this.style.height = this.height + 'px';
          this.async(function () {
            var rect = this.getBoundingClientRect();
            this.$.canvas.width = rect.width;
            this.$.canvas.height = rect.height;
          });
        },
        ready: function() {
          this.super();

          var that = this;
          var cursor = this.$.cursor;
          this.$.canvas.addEventListener('mousemove', function (e) {
            var pos = getMousePositionOffset(e, that.$.canvas);
            cursor.style.left = pos[0] + 'px';
            cursor.style.top = pos[1] + 'px';
          }, false);

          this.$.canvas.addEventListener('mouseenter', function (e) {
            cursor.hidden = false;
          }, false);

          this.$.canvas.addEventListener('mouseleave', function (e) {
            cursor.hidden = true;
          }, false);

          if (this.imageurl && this.imageurl.indexOf('data:image/png;base64,') === 0) {
            var img = new Image();
            var canvas = this.$.canvas;
            img.onload = function () {
              canvas.getContext('2d').drawImage(img,0,0);
            };
            img.src = this.imageurl;
          }

          this.readonlyChanged();
          this.pensizeChanged();
        },
        readonlyChanged: function () {
          var that = this;
          if (this.readonly === 'false') {
            this._onCanvasMouseDown = enableCanvas(this.$.canvas, function () {
              that.imageurl = that.$.canvas.toDataURL();
              if (that.generateonchange === 'true') {
                that.broadcast('imageGenerated', that.$.canvas.toDataURL());
              }
            });
            this.$.canvas.addEventListener('mousedown', this._onCanvasMouseDown, false);
            this.$.canvas.addEventListener('touchstart', this._onCanvasMouseDown, false);
          }
          else {
            if (this._onCanvasMouseDown) {
              this.$.canvas.removeEventListener('mousedown', this._onCanvasMouseDown, false);
              this.$.canvas.removeEventListener('touchdown', this._onCanvasMouseDown, false);
            }
          }
        },
        pensizeChanged: function () {
          var size = parseInt(this.pensize);
          this.$.canvas.getContext('2d').lineWidth = parseInt(this.pensize);
          this.$.cursor.style.width = size + 'px';
          this.$.cursor.style.height = size + 'px';
          this.$.cursor.style.marginTop = -(size/2) + 'px';
          this.$.cursor.style.marginLeft = -(size/2) + 'px';
        },
        generateImage: function () {
          this.broadcast('imageGenerated', this.$.canvas.toDataURL());
        },
        attached: function () {
          var rect = this.getBoundingClientRect();
          this.$.canvas.width = rect.width;
          this.$.canvas.height = rect.height;
          this.super();
        },
        reset: function() {
          var c = this.$.canvas;
          c.getContext('2d').clearRect(0, 0, c.width, c.height);
          this.broadcast('reset');
        }
      });
    </script>
</polymer-element>
<polymer-element name="ceci-camera-button" attributes="textcolor buttoncolor buttonactivecolor label value imageheight imagewidth" extends="ceci-element" label="Enable Camera" textcolor="#ffffff" buttoncolor="#4DB227" buttonactivecolor="#358915" imageheight="160" imagewidth="160" assetpath="/bundles/components/component-camera-button/">
  <template>
    <style>:host {
  position: relative;
  display: block;
  width: 100%;
  background: #555;
}

:host .mode-content img {
  width: 80px;
  opacity: .5;
}

/* Pending Mode */

:host .mode-pending .mode-content {
  padding-top: 30px;
}

:host .mode-pending img {
  width: 120px;
}


/* Disabled Mode */

:host .mode-disabled {
  background-position: center 10px;
  background-repeat: no-repeat;
  background-size: 100px;
}

:host .mode-disabled img {
  margin-bottom: 5px;
}

:host .mode-disabled .mode-content {
  padding-top: 30px;
}

:host .mode-disabled img {
  width: 120px;
}

/* File Mode */

:host .mode-file .mode-content {
  padding: 15px 15px 20px 15px;
  min-height: 0;
}

:host .mode-content h2 {
  color: #EEE;
  font-size: 18px;
  padding: 0;
  margin: 0 0 0 0;
}

:host .mode-content p {
  color: #CCC;
  font-size: 16px;
  padding: 0 40px;
  margin: 0 0 20px 0;
}

/* Enabled Mode */

:host .mode-enabled .shutter-bar {
  opacity: 1;
}

/* From File Mode */

:host .mode-file p {
  top: 0;
}

:host .mode {
  text-align: center;
  position: relative;
}

:host .mode-content {
  min-height: 180px;
}

:host  .shutter-bar {
  background: #333;
  padding: 10px 0 12px 0px;
  width: 100%;
  opacity: .2;
  border-top: solid 2px #666;
}

:host .shutter-button {
  margin: 0 auto;
  bottom: 0px;
  background: #DDD;
  height: 35px;
  width: 35px;
  border-radius: 35px;
  background: #4DB227 -webkit-linear-gradient(#DDD,white);
  border: solid 3px #777;
}

:host .mode-enabled .shutter-button {
  cursor: pointer;
}

:host button {
  display: block;
  margin: 0 auto;
  padding: 8px 14px;
  border: 1px solid rgba(0,0,0,.35) ;
  border-bottom: 2px solid rgba(0,0,0,.35);
  border-radius: 0.2rem;
  text-shadow: 0px -1px 0px rgba(0,0,0,.3);
  background: #4DB227 -webkit-linear-gradient(#58c82d,#4DB227);
  color: #ffffff;
  font-family: "FiraSans", sans-serif;
  font-weight: 400;
  font-size: 16px;
  -webkit-border-radius: 3px;
  text-align: center;
  text-decoration: none;
  text-overflow: ellipsis;
  cursor: pointer;
  position: relative;
  outline: rgba(0,0,0,.2) 5px solid;
  overflow: hidden;
  position: realtive;
}

:host button:active {
  background: #4DB227 -webkit-linear-gradient(#4DB227,#58c82d);
  background: #4DB227 -moz-linear-gradient(#4DB227,#58c82d);
  background: #4DB227 linear-gradient(#4DB227,#58c82d);
}

:host #camerainput {
  display: none;
}

:host #videoinput {
  width: 100%;
  display: block;
}

:host #canvasinput {
  display: none;
  height: 200px;
}
</style>

    <div class="mode mode-disabled">
      <div class="mode-content">
        <img src="/bundles/components/component-camera-button/images/camera-asleep.png">
        <button id="enable-camera" on-click="{{enableCamera}}">Enable Camera</button>
      </div>
      <div class="shutter-bar">
        <div class="shutter-button"></div>
      </div>
    </div>

    <div class="mode mode-pending">
      <div class="mode-content">
        <img src="/bundles/components/component-camera-button/images/arrow-up.png">
        <p>Please allow your device to use your camera.</p>
      </div>
      <div class="shutter-bar">
        <div class="shutter-button"></div>
      </div>
    </div>

    <div class="mode mode-file">
      <div class="mode-content">
        <img src="/bundles/components/component-camera-button/images/folder-photo.png">
        <h2>Oops!</h2>
        <p>This device doesn&apos;t have a camera but you can...</p>
        <button on-click="{{pickFile}}">Choose an Image File</button>
      </div>
    </div>

    <div class="mode mode-enabled">
      <div class="mode-content">
        <video id="videoinput"></video>
      </div>
      <div class="shutter-bar">
        <div class="shutter-button" on-click="{{takePhoto}}"></div>
      </div>
    </div>

    <canvas id="canvasinput"></canvas>

    <input id="camerainput" type="file" accept="image/*">
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;camera&quot;,&quot;photo&quot;,&quot;image&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;name&quot;: &quot;Camera&quot;,
      &quot;description&quot;: &quot;Takes a picture.&quot;,
      &quot;broadcasts&quot;: {
        &quot;photo&quot;: {
          &quot;label&quot;: &quot;Photo&quot;,
          &quot;description&quot;: &quot;Broadcasts the photo image data.&quot;,
          &quot;default&quot;: true
        }
      },
      &quot;listeners&quot;: {}
    }
  </ceci-definition>
  <script>
    Polymer('ceci-camera-button', {
      ready: function () {
        this.super();
        // do we have getMedia available?
        navigator.getMedia = (navigator.getUserMedia ||
          navigator.webkitGetUserMedia ||
          navigator.mozGetUserMedia ||
          navigator.msGetUserMedia);
      },
      attached : function(){
        if (!navigator.getMedia) {
          this.cameraMode("file");
        } else {
          this.cameraMode("disabled");
        }
        this.super();
      },
      cameraMode : function(mode) {
        var modes = this.shadowRoot.querySelectorAll(".mode");
        modes = Array.prototype.slice.call(modes);
        var fn = function(e) {
          e.style.display = "none";
        };
        modes.forEach(fn);
        this.shadowRoot.querySelector(".mode-" + mode).style.display = "block";
      },
      enableCamera: function() {
        if (navigator.getMedia) {

          this.cameraMode("pending");

          this.streaming = false;
          var that = this;
          var video = this.video = this.$.videoinput;
          var cameraPurpose = {
            video: true,
            audio: false
          };

          var streamHandler = function(stream) {
            that.videoStream = stream;
            if (navigator.mozGetUserMedia) {
              video.mozSrcObject = stream;
            } else {
              var vendorURL = window.URL || window.webkitURL;
              video.src = vendorURL.createObjectURL(stream);
            }
            video.play();
          };

          var errorHandler = function(err) {
            console.log("An error occured! " + err);
            that.cameraMode("disabled");
          };

          navigator.getMedia(cameraPurpose, streamHandler, errorHandler);

          video.addEventListener('canplay', function(ev) {

            if (!that.streaming) {
              that.cameraMode("enabled");
              that.streaming = true;
            }
          }, false);
        }
        // end of ready() code
      },

      takePhoto : function(){
        if ("mozActivity" in navigator) {
          return this.ffosClick();
        }

        var that = this;

        if (navigator.getMedia) {
          var canvas = this.$.canvasinput;
          var video = this.$.videoinput;
          var width = parseInt(this.imagewidth,10);
          var height = video.videoHeight / (video.videoWidth/width);
          canvas.width = width;
          canvas.height = height;
          canvas.getContext('2d').drawImage(video, 0, 0, width, height);
          var data = canvas.toDataURL('image/png');
          console.log("broadcasting");
          this.broadcast('photo', data);

          // Stops the video stream and resets camera
          video.src = "";
          this.videoStream.stop();
          this.cameraMode("disabled");
        }
      },
      ffosClick: function() {
        var activity = new MozActivity({
          // Ask for the "pick" activity
          name: "pick",

          // Provide the data required by the filters of the activity
          data: {
            type: ["image/jpeg", "image/png"]
          }
        });

        var that = this;

        activity.onsuccess = function() {
          var data =  window.URL.createObjectURL(this.result.blob);
          console.log("A picture has been retrieved");
          that.broadcast("photo", data);
        };

        activity.onerror = function() {
          console.log(this.error);
        };
      },
      pickFile : function(){
        var that = this;
        function selectImageFile() {
          var reader = new FileReader();
          var file = that.$.camerainput.files[0];

          reader.onloadend = function() {
            console.log("File", reader.result);
            that.broadcast("photo", reader.result);
          };

          if (file) {
            reader.readAsDataURL(file);
          }
        }

        this.$.camerainput.addEventListener("change", selectImageFile, false);
        this.$.camerainput.click();
      }
    });
  </script>
</polymer-element>
<polymer-element name="ceci-button-with-confirmation" attributes="textcolor buttoncolor buttonactivecolor label confirmationmessage value" extends="ceci-element" label="Click and Confirm Me" textcolor="#ffffff" buttoncolor="#4DB227" buttonactivecolor="#358915" confirmationmessage="Are you sure?" assetpath="/bundles/components/component-button-with-confirmation/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
  height: 50px;
}

:host button {
  font-family: "FiraSans", sans-serif;
  cursor: pointer;
  position: relative;
  text-decoration: none;
  outline: none;
  border-top: 1px solid rgba(255,255,255,.3);
  border-bottom: 2px solid rgba(0,0,0,.2);
  background-color: #4DB227;
  text-align: center;
  display: block;
  padding-top: 5px;
  padding-bottom: 3px;
  text-overflow: ellipsis;
  overflow: hidden;
  border-radius: 0.2rem;
  font-weight: 600;
  font-size: 1.8rem;
  line-height: 3.8rem;
  color: #ffffff;
  width: 100%;
  margin: 0;
}

:host button {
  border: none;
}

</style>
    <button id="button" on-ceci-pressdown="{{click}}">{{label}}</button>
    <shadow></shadow>

  </template>
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;button&quot;, &quot;click&quot;, &quot;tap&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;name&quot;: &quot;Button with Confirmation&quot;,
      &quot;description&quot;: &quot;Responds to your clicks and taps by asking you \&quot;Are you sure?\&quot;&quot;,
      &quot;broadcasts&quot;: {
        &quot;click&quot;: {
          &quot;label&quot;: &quot;Click&quot;,
          &quot;description&quot;: &quot;Occurs when button is clicked.&quot;,
          &quot;default&quot;: true
        },
        &quot;cancelClick&quot;: {
          &quot;label&quot;: &quot;Cancel Click&quot;,
          &quot;description&quot;: &quot;Occurs when button is clicked and the user denies the confirmation message.&quot;
        }
      },
      &quot;listeners&quot;: {},
      &quot;attributes&quot;: {
        &quot;label&quot;: {
          &quot;label&quot;: &quot;Label&quot;,
          &quot;description&quot;: &quot;Text shown on the button.&quot;,
          &quot;editable&quot;: &quot;text&quot;,
          &quot;listener&quot;: true
        },
         &quot;confirmationmessage&quot;: {
          &quot;label&quot;: &quot;Confirmation Message&quot;,
          &quot;description&quot;: &quot;Confirmation message that is displayed to the user before executing action.&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;value&quot;: {
          &quot;label&quot;: &quot;Value&quot;,
          &quot;description&quot;: &quot;Value sent by the button.&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;textcolor&quot;: {
          &quot;label&quot;: &quot;Text Color&quot;,
          &quot;description&quot;: &quot;Color of the text on the button&apos;s label.&quot;,
          &quot;editable&quot;: &quot;color&quot;
        },
        &quot;buttoncolor&quot;: {
          &quot;label&quot;: &quot;Button Color&quot;,
          &quot;description&quot;: &quot;Background color of the button.&quot;,
          &quot;editable&quot;: &quot;color&quot;,
          &quot;listener&quot; : &quot;true&quot;
        },
        &quot;buttonactivecolor&quot;: {
          &quot;label&quot;: &quot;Button Active Color&quot;,
          &quot;description&quot;: &quot;Background color of the button while it is being clicked or tapped.&quot;,
          &quot;editable&quot;: &quot;color&quot;
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-button-with-confirmation', {
      ready: function () {
        this.super();

        var that = this;
        this.$.button.addEventListener('mousedown', function (e) {
          var valueBefore = that.buttoncolor;
          if (that.buttonactivecolor) {
            that.$.button.style.backgroundColor = that.buttonactivecolor;
            window.addEventListener('mouseup', function (e) {
              that.$.button.style.backgroundColor = valueBefore;
            }, false);
          }
        }, false);

        this.confirmationmessage = this.getAttribute('confirmationmessage') || "extra default";
      },
      confirmationmessage: (this.confirmationmessage || "default thingy"),
      click: function () {
        if (window.confirm(this.confirmationmessage)) {
            this.broadcast('click', this.getAttribute('value'));
        } else {
            this.broadcast('cancelClick', this.getAttribute('value'));
        }
      },
      textcolorChanged: function (oldValue, newValue) {
          this.$.button.style.color = newValue;
      },
      buttoncolorChanged: function (oldValue, newValue) {
        this.$.button.style.backgroundColor = newValue;
      },
      confirmationmessageChanged: function(oldValue, newValue) {
        this.confirmationmessage = newValue;

      }
    });
  </script>
</polymer-element>
<polymer-element name="ceci-button" attributes="textcolor buttoncolor label value" value="Press" extends="ceci-element" label="Press Me" textcolor="#ffffff" buttoncolor="#4DB227" assetpath="/bundles/components/component-button/">
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;button&quot;, &quot;click&quot;, &quot;tap&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Responds to your clicks and taps.&quot;,
      &quot;name&quot;: &quot;Button&quot;,
      &quot;broadcasts&quot;: {
        &quot;click&quot;: {
          &quot;label&quot;: &quot;Press&quot;,
          &quot;description&quot;: &quot;Occurs when button is clicked.&quot;,
          &quot;default&quot;: true
        }
      },
      &quot;listeners&quot;: {},
      &quot;attributes&quot;: {
        &quot;label&quot;: {
          &quot;label&quot;: &quot;Label&quot;,
          &quot;description&quot;: &quot;Text shown on the button.&quot;,
          &quot;editable&quot;: &quot;text&quot;,
          &quot;listener&quot;: true
        },
        &quot;value&quot;: {
          &quot;label&quot;: &quot;Broadcast Value&quot;,
          &quot;description&quot;: &quot;Value sent by the button.&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;textcolor&quot;: {
          &quot;label&quot;: &quot;Text Color&quot;,
          &quot;description&quot;: &quot;Color of the text on the button&apos;s label.&quot;,
          &quot;editable&quot;: &quot;color&quot;
        },
        &quot;buttoncolor&quot;: {
          &quot;label&quot;: &quot;Button Color&quot;,
          &quot;description&quot;: &quot;Background color of the button.&quot;,
          &quot;editable&quot;: &quot;color&quot;,
          &quot;listener&quot;: true
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host .button-wrapper {
  position: relative;
}

:host #buttonwrapper {
  cursor: pointer;
}

:host #button {

  border-bottom: 2px solid rgba(0,0,0,.1);
  display: block;
  text-align: center;
  padding: 12px 0 10px 0;
  text-overflow: ellipsis;
  overflow: hidden;
  font-weight: 300;
  font-size: 1.8rem;
  line-height: 1.8rem;
}

:host .overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  opacity: 0;
}

:host .active-overlay {
  background: black;
}

:host .hover-overlay {
  background: white;
}

:host .pressdown .active-overlay {
  opacity: .1;
}

:host .pressdown #button {
  border-top: solid 2px rgba(0,0,0,.1);
  border-bottom: none;
}

:host button {
  border: none;
}
</style>
    <div id="buttonwrapper" on-ceci-pressdown="{{pressdown}}" on-ceci-pressup="{{pressup}}" class="button-wrapper">
      <div id="button">{{label}}</div>
      <div class="overlay active-overlay"></div>
    </div>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-button', {
      ready: function () {
        this.super();
      },
      attached : function(){
        this.super();
      },
      pressup : function(){
        this.$.buttonwrapper.classList.remove("pressdown");
      },
      pressdown : function(){
        this.$.buttonwrapper.classList.add("pressdown");
        this.broadcast('click', this.getAttribute('value'));
      },
      textcolorChanged: function (oldValue, newValue) {
        this.$.button.style.color = newValue;
      },
      buttoncolorChanged: function (oldValue, newValue) {
        this.$.button.style.backgroundColor = newValue;
      }
    });
  </script>
</polymer-element>
<polymer-element name="ceci-boolean-gate" attributes="" extends="ceci-element" assetpath="/bundles/components/component-boolean-gate/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
  padding: 10px;
  background: #555;
  text-align: center;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
}

:host .output-channel {
  padding: 5px 10px;
  background: #999;
  margin: 0 3px;
  display: inline-block;
  border: solid 2px #555;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
  cursor: pointer;
}

:host #state.open {
  background: red;
  border: solid 2px white;
  font-weight: bold;
}

:host #state {
  background: white;
  border: solid 2px white;
  font-weight: bold;
}
</style>
    <div id="state">OPEN</div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;boolean-gate&quot;, &quot;low-level&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;name&quot;: &quot;Channel Filter&quot;,
      &quot;description&quot;: &quot;Allows or stops a signal from passing through.&quot;,
      &quot;broadcasts&quot;: {
        &quot;Out&quot;: {
          &quot;label&quot;: &quot;Output&quot;,
          &quot;description&quot;: &quot;Broadcasts the message, if allowed&quot;,
          &quot;default&quot;: &quot;green&quot;
        }
      },
      &quot;listeners&quot;: {
        &quot;input&quot;: {
          &quot;description&quot;: &quot;The input that is to be broadcast&quot;,
          &quot;label&quot;: &quot;Input&quot;,
          &quot;default&quot;: true
        },
        &quot;open&quot;: {
          &quot;description&quot;: &quot;Open the gate&quot;,
          &quot;label&quot;: &quot;Open&quot;
        },
        &quot;close&quot;: {
          &quot;description&quot;: &quot;Close the gate&quot;,
          &quot;label&quot;: &quot;Close&quot;
        }
      },
      &quot;attributes&quot;: {}
    }
  </ceci-definition>
  <script>
    Polymer('ceci-boolean-gate', {
      isOpen: true,
      ready: function() {
        this.super();
        this.isOpen = true;
      },
      attached: function(){
        var that = this;
        this.addEventListener("channelUpdated",function(){
          this.updateUI();
        });
        this.updateUI();
        this.super();
      },
      updateUI: function(){
        if(this.isOpen){
          this.$.state.classList.remove("open");
        } else {
          this.$.state.classList.add("open");
        }
      },
      open: function() {
        this.isOpen = true;
        this.updateUI();
      },
      close: function() {
        this.isOpen = false;
        this.updateUI();
      },
      input:function(value) {
        if ( this.isOpen ) {
          this.broadcast("Out", value);
        }
      }
    });
  </script>
</polymer-element>
<polymer-element name="ceci-bool" extends="ceci-element" attributes="checkif" checkif="hello" assetpath="/bundles/components/component-boolean/">
  <ceci-definition>
    {
      &quot;name&quot;: &quot;Boolean Gate&quot;,
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Compares input to a value you choose and reports \&quot;true\&quot; or \&quot;false\&quot;.&quot;,
      &quot;broadcasts&quot;: {
        &quot;true&quot;: {
          &quot;label&quot;: &quot;True&quot;,
          &quot;description&quot;: &quot;The signal matches the condition.&quot;,
          &quot;default&quot; : true
        },
        &quot;false&quot;: {
          &quot;label&quot;: &quot;False&quot;,
          &quot;description&quot;: &quot;The signal doesn&apos;t match the condition.&quot;
        }
      },

      &quot;listeners&quot;: {
        &quot;signal&quot;: {
          &quot;description&quot;: &quot;The signal to match&quot;,
          &quot;label&quot;: &quot;Signal&quot;,
          &quot;default&quot; : true
        }
      },
      &quot;attributes&quot;: {
        &quot;checkif&quot;: {
          &quot;description&quot;: &quot;Check if the incoming signal matches this string.&quot;,
          &quot;label&quot;: &quot;Check If&quot;,
          &quot;editable&quot;: &quot;Text&quot;,
          &quot;default&quot; : true
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  box-sizing: border-box;
  background: #DDD;
  padding: 5px 10px;
  text-align: center;
}

:host span.checkif {
  display: inline-block;
  background-color: white;
  padding: 4px 5px;
  border-top-left-radius: 5px;
  border-top-right-radius: 5px;
  border-bottom-right-radius: 5px;
  border-bottom-left-radius: 5px;
  border-style: solid;
  border-color: rgb(204, 204, 204);
  border-width: 1px 1px 2px;
}</style>

    <div class="rule">
      Does the signal equal <span class="checkif">&quot;{{checkif}}&quot;</span> ?
    </div>

    <shadow></shadow>
  </template>
  <tags>starter,math</tags>

    <script>
      Polymer("ceci-bool", {
        ready: function() {
          this.super();
        },
        attached : function(){
          this.super();
        },
        signal : function(value){
          if (value.toString().toLowerCase() === this.checkif.toLowerCase()) {
            this.broadcast("true", "true");
          }
          else {
            this.broadcast("false", "false");
          }
        }
      });
    </script>
</polymer-element>
<polymer-element name="ceci-audio" attributes="source speed label value tapecolor volume" extends="ceci-element" label="dogs.wav" volume=".5" source="http://soundjax.com/reddo/21812%5Edog_bark_x.mp3" tapecolor="#2181cb" speed="1.0" assetpath="/bundles/components/component-audio/">
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;sound&quot;, &quot;audio&quot;, &quot;music&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;description&quot;: &quot;Plays an audio clip using a URL or data-uri as input.&quot;,
      &quot;name&quot;: &quot;Audio Clip&quot;,
      &quot;broadcasts&quot;: {},
      &quot;listeners&quot;: {
        &quot;play&quot;: {
          &quot;description&quot;: &quot;Play the audio clip.&quot;,
          &quot;label&quot;: &quot;Play&quot;,
          &quot;default&quot;: true
        },
        &quot;pause&quot;: {
          &quot;description&quot;: &quot;Pause the audio clip.&quot;,
          &quot;label&quot;: &quot;Pause&quot;
        },
        &quot;stopsound&quot;: {
          &quot;description&quot;: &quot;Stop the audio clip.&quot;,
          &quot;label&quot;: &quot;Stop&quot;
        }
      },
      &quot;attributes&quot;: {
        &quot;source&quot;: {
          &quot;label&quot;: &quot;Audio source URL&quot;,
          &quot;description&quot;: &quot;The URL for the sound clip you want to play&quot;,
          &quot;editable&quot;: &quot;text&quot;,
          &quot;listener&quot;: true
        },
        &quot;volume&quot;: {
          &quot;label&quot;: &quot;Volume&quot;,
          &quot;editable&quot;: &quot;number&quot;,
          &quot;min&quot; : 0,
          &quot;max&quot; : 1
        },
        &quot;speed&quot;: {
          &quot;label&quot;: &quot;Audio playback rate&quot;,
          &quot;description&quot;: &quot;1 for normal speed, 2 for twice speed, -1 for reverse, etc.&quot;,
          &quot;editable&quot;: &quot;number&quot;
        },
        &quot;label&quot;: {
          &quot;label&quot;: &quot;Label&quot;,
          &quot;description&quot;: &quot;Text shown on the button.&quot;,
          &quot;editable&quot;: &quot;text&quot;
        },
        &quot;tapecolor&quot;: {
          &quot;label&quot;: &quot;Value&quot;,
          &quot;description&quot;: &quot;Color of the tape&quot;,
          &quot;editable&quot;: &quot;color&quot;
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host .wrapper {
  cursor: pointer;
  background: orange;
  height: 75px;
  position: relative;
  overflow: hidden;
}

:host .wrapper .label {
  background: white;
  position: absolute;
  top: 8px;
  width: 218px;
  height: 30px;
  left: 45px;
  -webkit-border-radius: 2px;
  border-radius: 2px;
}

:host .wrapper .text {
  position: absolute;
  top: 3px;
  width: 100%;
  height: 30px;
  text-align:center;
  font-size: 18px;
}

:host .wrapper .circles {
  position: absolute;
  bottom: -40px;
  height: 70px;
  width: 230px;
  -webkit-border-radius: 60px;
  border-radius: 60px;
  -webkit-transform: rotate(0deg);
  transform: rotate(0deg);
  left: 40px;
  overflow: hidden;
  background-color: white;
  border-top: solid 5px black;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}

:host .circle {
  background-image: url(/bundles/components/component-audio/images/circle.png);
  background-size: 50px;
  background-repeat: no-repeat;
  background-position: center;
  position: absolute;
  top: 5px;
  background-color: black;
  -webkit-border-radius: 100px;
  border-radius: 100px;
}

:host .cantplay .right,
:host .cantplay .left {
  -webkit-animation: cantplay linear .075s 5;
  animation: cantplay linear .075s 5;
}

@-webkit-keyframes cantplay {
  0% { -webkit-transform: rotate(0deg);}
  50% { -webkit-transform: rotate(15deg);}
  100% { -webkit-transform: rotate(0deg);}
}

@keyframes cantplay {
  0% { transform: rotate(0deg);}
  50% { transform: rotate(15deg);}
  100% { transform: rotate(0deg);}
}


@-webkit-keyframes spin {
  0% { -webkit-transform: rotate(0deg);}
  100% { -webkit-transform: rotate(360deg);}
}

@keyframes spin {
  0% { transform: rotate(0deg);}
  100% { transform: rotate(360deg);}
}
:host .left {
  left: -40px;
  top: -45px;
  height: 150px;
  width: 150px;

}

:host .playing .left {
  -webkit-animation: spin linear 1.5s infinite;
  animation: spin linear 1.5s infinite;
}



:host .right {
  right: -20px;
  top: -25px;
  height: 110px;
  width: 110px;
}

:host .playing .right {
    -webkit-animation: spin linear 1.3s infinite;
    animation: spin linear 1.3s infinite;
}

:host audio {
  display: none;
}
</style>
    <div id="wrapper" on-ceci-pressdown="{{play}}" class="wrapper">
      <div class="label">
        <div class="text">{{label}}</div>
      </div>
      <div class="circles">
        <div class="circle left"></div>
        <div class="circle right"></div>
      </div>
    </div>
    <audio id="sound" src="/bundles/components/component-audio/sounds/snare.mp3" preload="auto"></audio>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-audio', {
      ready: function() {
        this.super();
        var that = this;
        this.$.sound.addEventListener("ended",function(){
          that.stopsound();
        });
      },
      state : "stopped",
      stopsound : function(){
        this.$.sound.pause();
        this.$.sound.currentTime = 0;
        this.$.wrapper.classList.remove("playing");
        this.state = "stopped";
      },
      play: function() {
        var readyState = this.$.sound.readyState;
        if(readyState != 0) {
          this.$.wrapper.classList.add("playing");
          if(this.state == "paused") {
            this.$.sound.play();
            this.state = "playing";
          } else {
            this.$.sound.pause();
            this.$.sound.currentTime = 0;
            this.$.sound.play();
            this.state = "playing";
          }
        } else {
          this.$.wrapper.classList.remove("cantplay");
          this.$.wrapper.offsetWidth = this.$.wrapper.offsetWidth;
          this.$.wrapper.classList.add("cantplay");
        }
      },
      pause : function(){
        this.$.wrapper.classList.remove("playing");
        this.$.sound.pause();
        this.state = "paused";
      },
      sourceChanged: function(oldValue, newValue) {
        this.$.sound.src = newValue;
      },
      setSpeed: function(channel, value) {
        this.speedChanged(this.$.sound.playbackRate || 1, value);
      },
      volumeChanged : function(oldValue, newValue){
        this.$.sound.volume = newValue;
      },
      tapecolorChanged: function (oldValue, newValue) {
        this.$.wrapper.style.background = newValue;
      },
      speedChanged: function(oldValue, newValue) {
        try  {
          var f = parseFloat(newValue);
          if (f) {
            this.$.sound.playbackRate = parseFloat(newValue);
          }
        } catch (e) {}
      }
    });
  </script>
</polymer-element>
<polymer-element name="ceci-alternating-gate" attributes="countbeforeswitch" extends="ceci-element" assetpath="/bundles/components/component-alternating-gate/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
  padding: 10px;
  background: #555;
  text-align: center;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
}

:host .output-channel {
  padding: 5px 10px;
  background: #999;
  margin: 0 3px;
  display: inline-block;
  border: solid 2px #555;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
}

:host .next-up {
  background: white;
  border: solid 2px white;
  font-weight: bold;
}
</style>
    <div id="channels"></div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      &quot;tags&quot;: [&quot;alternating-gate&quot;, &quot;low-level&quot;],
      &quot;thumbnail&quot;: &quot;./thumbnail.png&quot;,
      &quot;name&quot;: &quot;Alternating Gate&quot;,
      &quot;description&quot;: &quot;Alternates output between set broadcasts from a single input&quot;,
      &quot;broadcasts&quot;: {
        &quot;A&quot;: {
          &quot;label&quot;: &quot;Output A&quot;,
          &quot;description&quot;: &quot;The first broadcast in the rotation.&quot;,
          &quot;default&quot;: &quot;green&quot;
        },
        &quot;B&quot;: {
          &quot;label&quot;: &quot;Output B&quot;,
          &quot;description&quot;: &quot;The second broadcast in the rotation.&quot;,
          &quot;default&quot;: &quot;yellow&quot;
        },
        &quot;C&quot;: {
          &quot;label&quot;: &quot;Output C&quot;,
          &quot;description&quot;: &quot;The third broadcast in the rotation.&quot;
        },
        &quot;D&quot;: {
          &quot;label&quot;: &quot;Output D&quot;,
          &quot;description&quot;: &quot;The fourth broadcast in the rotation.&quot;
        },
        &quot;E&quot;: {
          &quot;label&quot;: &quot;Output E&quot;,
          &quot;description&quot;: &quot;The fifth broadcast in the rotation.&quot;
        }
      },
      &quot;listeners&quot;: {
        &quot;input&quot;: {
          &quot;description&quot;: &quot;The input that alternates out the broadcasts.&quot;,
          &quot;label&quot;: &quot;Input&quot;,
          &quot;default&quot;: true
        }
      },
      &quot;attributes&quot;: {
        &quot;countbeforeswitch&quot;: {
          &quot;label&quot;: &quot;Count Before Switch&quot;,
          &quot;description&quot;: &quot;How many events to send on each channel before switching&quot;,
          &quot;editable&quot;: &quot;number&quot;,
          &quot;min&quot; : 1
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-alternating-gate', {
      nextBroadcast : "",
      ready: function() {
        this.countbeforeswitch = Number(this.countbeforeswitch) || 1;
        this.lastBroadcast = null;
        this.count = 0;
        this.super();
      },
      countbeforeswitch: 1,
      attached : function(){
        this.super();
      },
      domReady: function() {
        var that = this;
        this.onChannelUpdate = function(){
          that.updateChannels();
          that.updateUI();
        };
        window.addEventListener("channelUpdate", this.onChannelUpdate);
        this.updateChannels();
        this.nextBroadcast = this.activeBroadcasts[0];
        this.lastBroadcast = this.activeBroadcasts[0];
        this.updateUI();
      },
      detached: function() {
        window.removeEventListener("channelUpdate", this.onChannelUpdate);
      },
      updateUI : function(){
        Array.prototype.forEach.call(this.$.channels.querySelectorAll(".output-channel"), function(c) {
          c.classList.remove("next-up");
        });
        var selected = this.$.channels.querySelector("." + this.nextBroadcast);
        if(selected){
          selected.classList.add("next-up");
        }
      },
      updateChannels: function(){
        var that = this;
        this.activeBroadcasts = [];
        that.$.channels.textContent = "";
        Array.prototype.forEach.call(this.querySelectorAll("ceci-broadcast"), function(broadcast) {
          that.activeBroadcasts.push(broadcast.getAttribute("from"));
          var channel = document.createElement("div");
          channel.classList.add("output-channel");
          channel.classList.add(broadcast.getAttribute("from"));
          channel.textContent = broadcast.getAttribute("from");
          that.$.channels.appendChild(channel);
        });
      },
      input: function(value) {
        this.broadcast(this.nextBroadcast, value);
        this.count += 1;
        this.count = this.count % this.countbeforeswitch || 0;

        // Only switch broadcaster if we've hit this one {{this.countbeforeswitch}} times
        if (this.count == 0) {
          this.nextBroadcast = this.activeBroadcasts.indexOf(this.lastBroadcast) + 1;
          this.nextBroadcast %= this.activeBroadcasts.length;
          this.nextBroadcast = this.activeBroadcasts[this.nextBroadcast];
          this.lastBroadcast = this.nextBroadcast;
          this.updateUI();
        }
      }
    });
  </script>
</polymer-element>
